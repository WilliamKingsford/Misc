<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: seafile-4.1.2/common/index/index.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">seafile-4.1.2/common/index/index.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;common.h&quot;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;limits.h&gt;</code><br/>
<code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;dirent.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &quot;utils.h&quot;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;arpa/inet.h&gt;</code><br/>
<code>#include &lt;netdb.h&gt;</code><br/>
<code>#include &lt;sys/mman.h&gt;</code><br/>
</div>
<p><a href="index_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__header.html">cache_header</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__time.html">cache_time</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structondisk__cache__entry.html">ondisk_cache_entry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__time64.html">cache_time64</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structondisk__cache__entry2.html">ondisk_cache_entry2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structondisk__cache__entry__extended.html">ondisk_cache_entry_extended</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__ext__hdr.html">cache_ext_hdr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry.html">cache_entry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structindex__state.html">index_state</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1aff26cd99832c880caba07bedb86e3e">DTYPE</a>(de)&#160;&#160;&#160;((de)-&gt;d_type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#acfc83a4d096b9c0056236d948896ad86">S_IFINVALID</a>&#160;&#160;&#160;0030000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a4dba57703d56f844b1869ffa201e5d08">S_IFGITLINK</a>&#160;&#160;&#160;0160000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a63e538171307b264dd11b7685c94b9ac">S_ISGITLINK</a>(m)&#160;&#160;&#160;(((m) &amp; S_IFMT) == <a class="el" href="index_8h.html#a4dba57703d56f844b1869ffa201e5d08">S_IFGITLINK</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1df97b2e673364fd2f0d469e21b1c4e4">CACHE_SIGNATURE</a>&#160;&#160;&#160;0x44495243    /* &quot;DIRC&quot; */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#aac01f026b0dad25cdade5134d4870190">CACHE_EXT_MODIFIER</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a92e847bc81d825658bd3ef392e2f6c3b">CE_NAMEMASK</a>&#160;&#160;&#160;(0x0fff)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ae53d91d6dee84ef5e3793ab535ea01c0">CE_STAGEMASK</a>&#160;&#160;&#160;(0x3000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a31729cb24b83a49a72edf8e2c59c3ebe">CE_EXTENDED</a>&#160;&#160;&#160;(0x4000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a85680cf3653d1fd82efb449619733ea4">CE_VALID</a>&#160;&#160;&#160;(0x8000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a5aab5883561880af062241493be324cd">CE_STAGESHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1d46becf22e28d6f8bffa8ee949acb45">CE_UPDATE</a>&#160;&#160;&#160;(1 &lt;&lt; 16)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#aa5ee599d9d7af67f19dba204ce9030c0">CE_REMOVE</a>&#160;&#160;&#160;(1 &lt;&lt; 17)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a0af6f85f1def3c429744e08d34c65003">CE_UPTODATE</a>&#160;&#160;&#160;(1 &lt;&lt; 18)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a586309b1feb22f9865dd8925c4a998b2">CE_ADDED</a>&#160;&#160;&#160;(1 &lt;&lt; 19)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a4c6ac242046e51f8bd8a82fd7ba586cd">CE_HASHED</a>&#160;&#160;&#160;(1 &lt;&lt; 20)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a5808b104dc5c393d448471d68841eae7">CE_UNHASHED</a>&#160;&#160;&#160;(1 &lt;&lt; 21)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ab8db831d893aba29775bf7251661296b">CE_WT_REMOVE</a>&#160;&#160;&#160;(1 &lt;&lt; 22) /* remove in work directory */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ae8aa611804959bb2ae74143429242dca">CE_CONFLICTED</a>&#160;&#160;&#160;(1 &lt;&lt; 23)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ab9f9391faf6b3de1d55d71cb07417d0e">CE_UNPACKED</a>&#160;&#160;&#160;(1 &lt;&lt; 24)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a8067adb7b7861023504f0dccaf0db8f3">CE_NEW_SKIP_WORKTREE</a>&#160;&#160;&#160;(1 &lt;&lt; 25)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a0dd46d4dea2c88bf73657cc4a30a1e54">CE_INTENT_TO_ADD</a>&#160;&#160;&#160;(1 &lt;&lt; 29)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#aa61d80aefce2cc18dbf4f3b9c04db6e7">CE_SKIP_WORKTREE</a>&#160;&#160;&#160;(1 &lt;&lt; 30)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a5fec288abf6bf424611c0bc0810cc7dc">CE_EXTENDED2</a>&#160;&#160;&#160;(1 &lt;&lt; 31)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ac4a72ef3e798ab19bb638128104de7be">CE_EXTENDED_FLAGS</a>&#160;&#160;&#160;(<a class="el" href="index_8h.html#a0dd46d4dea2c88bf73657cc4a30a1e54">CE_INTENT_TO_ADD</a> | <a class="el" href="index_8h.html#aa61d80aefce2cc18dbf4f3b9c04db6e7">CE_SKIP_WORKTREE</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#adac75a97465362dbf9b07ac6cfe063e2">CE_STATE_MASK</a>&#160;&#160;&#160;(<a class="el" href="index_8h.html#a4c6ac242046e51f8bd8a82fd7ba586cd">CE_HASHED</a> | <a class="el" href="index_8h.html#a5808b104dc5c393d448471d68841eae7">CE_UNHASHED</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#acde7ea7616605cb5336badf6884a87ca">ce_size</a>(ce)&#160;&#160;&#160;<a class="el" href="index_8h.html#a07a18158c879287d1606ceec992ba702">cache_entry_size</a>(ce_namelen(ce))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ad562eeda2e10022dc93db2b51b3df1e9">ondisk_ce_size</a>(ce)&#160;&#160;&#160;<a class="el" href="index_8h.html#a552b967e5899126e52804b4ddd388fbf">ondisk_cache_entry_size</a>(ce_namelen(ce))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a75e5d7a68fa10d5816da166b78d2d25a">ondisk_ce_size2</a>(ce)&#160;&#160;&#160;<a class="el" href="index_8h.html#a015f9daf88cfcc4c60b8719912851477">ondisk_cache_entry_size2</a>(ce_namelen(ce))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(ce)&#160;&#160;&#160;((<a class="el" href="index_8h.html#ae53d91d6dee84ef5e3793ab535ea01c0">CE_STAGEMASK</a> &amp; (ce)-&gt;ce_flags) &gt;&gt; <a class="el" href="index_8h.html#a5aab5883561880af062241493be324cd">CE_STAGESHIFT</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ad55a581e1adce0475f3b6e044e8b3411">ce_uptodate</a>(ce)&#160;&#160;&#160;((ce)-&gt;ce_flags &amp; <a class="el" href="index_8h.html#a0af6f85f1def3c429744e08d34c65003">CE_UPTODATE</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#aa9cb581aaeefbbd01aa6c7997f44a5e4">ce_skip_worktree</a>(ce)&#160;&#160;&#160;((ce)-&gt;ce_flags &amp; <a class="el" href="index_8h.html#aa61d80aefce2cc18dbf4f3b9c04db6e7">CE_SKIP_WORKTREE</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#af89192589f914101b8c8cea880ab350d">ce_mark_uptodate</a>(ce)&#160;&#160;&#160;((ce)-&gt;ce_flags |= <a class="el" href="index_8h.html#a0af6f85f1def3c429744e08d34c65003">CE_UPTODATE</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a29b7e76e0238ae503aed4add6c07f88a">ce_permissions</a>(<a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>)&#160;&#160;&#160;(((<a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>) &amp; 0100) ? 0755 : 0644)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(STRUCT, len)&#160;&#160;&#160;((offsetof(struct STRUCT,<a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>) + (len) + 8) &amp; ~7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a07a18158c879287d1606ceec992ba702">cache_entry_size</a>(len)&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structcache__entry.html">cache_entry</a>,len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a552b967e5899126e52804b4ddd388fbf">ondisk_cache_entry_size</a>(len)&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structondisk__cache__entry.html">ondisk_cache_entry</a>,len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a015f9daf88cfcc4c60b8719912851477">ondisk_cache_entry_size2</a>(len)&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structondisk__cache__entry2.html">ondisk_cache_entry2</a>,len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a46067e4c46abc66cde0fd1f5239438f5">ondisk_cache_entry_extended_size</a>(len)&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structondisk__cache__entry__extended.html">ondisk_cache_entry_extended</a>,len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a96824974fc1cbb6da7418f3ac5e4d57d">alloc_nr</a>(x)&#160;&#160;&#160;(((x)+16)*3/2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a736bc90b74e5164dc5060b9c4f41b425">ALLOC_GROW</a>(x, nr, alloc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a4e7659151088d67c163cc90e6f12c39c">ADD_CACHE_OK_TO_ADD</a>&#160;&#160;&#160;1        /* Ok to add */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a6b5725eef5481c5f354df57bd32a4d87">ADD_CACHE_OK_TO_REPLACE</a>&#160;&#160;&#160;2    /* Ok to replace file/directory */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a36965ae826e331dc71a67c748a3bca80">ADD_CACHE_SKIP_DFCHECK</a>&#160;&#160;&#160;4    /* Ok to skip DF conflict checks */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#af3eef6db4672ee6e240c3eb4862f3b2a">ADD_CACHE_JUST_APPEND</a>&#160;&#160;&#160;8        /* Append only; tree.c::read_tree() */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a6ebc7bd06aeacf22dfb0f3a04a1b0d7f">ADD_CACHE_NEW_ONLY</a>&#160;&#160;&#160;16        /* Do not replace existing ones */</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a5e7d31d20b5b9aea8bb09489ab8ebc59">ADD_CACHE_VERBOSE</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a51ca0be402a397871ddd370bedd9877d">ADD_CACHE_PRETEND</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#abdb517015bb0ca030d986985bd26040e">ADD_CACHE_IGNORE_ERRORS</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a5dfb8286fcee3126d37ee703f589d114">ADD_CACHE_IGNORE_REMOVAL</a>&#160;&#160;&#160;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a2a004997d129c837e5959615a6b4d63b">ADD_CACHE_INTENT</a>&#160;&#160;&#160;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a3ecb29f06d046b6a99ed2148f91ae0c3">CE_MATCH_IGNORE_VALID</a>&#160;&#160;&#160;01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a68c76b444c1d81fe952b07ad9f0f5fb7">CE_MATCH_RACY_IS_DIRTY</a>&#160;&#160;&#160;02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#abd49280eba10dafd6f24cc3a6eab6313">CE_MATCH_IGNORE_SKIP_WORKTREE</a>&#160;&#160;&#160;04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1bbe02a47ba31459df61e21d7c87abbc">MTIME_CHANGED</a>&#160;&#160;&#160;0x0001</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a69a2a3240c9e4e77fcb46d34a0f6f07d">CTIME_CHANGED</a>&#160;&#160;&#160;0x0002</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ad3b376409af05e250ebd84cb16e96530">OWNER_CHANGED</a>&#160;&#160;&#160;0x0004</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a8014aaa9fc4ef3c56a331bdda0c7a71c">MODE_CHANGED</a>&#160;&#160;&#160;0x0008</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ae7b02c083326b7a8691d3cf601dd48c6">INODE_CHANGED</a>&#160;&#160;&#160;0x0010</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a795e49b040736f9ff8d888ac89841d66">DATA_CHANGED</a>&#160;&#160;&#160;0x0020</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ad70ed9dc79ab15539f7b907efe10b4c7">TYPE_CHANGED</a>&#160;&#160;&#160;0x0040</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ad3590c8e6928357777aec72d944c748d">IndexCB</a> )(const char *repo_id, int <a class="el" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, const char *path, unsigned char <a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>[], struct <a class="el" href="structSeafileCrypt.html">SeafileCrypt</a> *crypt, gboolean write_data)</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623">object_type</a> { <br/>
&#160;&#160;<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a8bd46dc1ca2cf7ed50f1ac7e23c1748a">OBJ_BAD</a> =  -1, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a01ff4d160d4dacb219fa040042af5626">OBJ_NONE</a> =  0, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623ad13f153b038964740388f11eb2336b20">OBJ_COMMIT</a> =  1, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623aab56f8210d066445853058072941f6d7">OBJ_TREE</a> =  2, 
<br/>
&#160;&#160;<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a349804bd0b40b4a3a21bd0fb78154459">OBJ_BLOB</a> =  3, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a99b205a3adddf115c7c5d8438c82b597">OBJ_TAG</a> =  4, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a43256709a9db879bd71aff7ce2d46db6">OBJ_OFS_DELTA</a> =  6, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623ad0e1199bf543b19a0fc1738a982c5671">OBJ_REF_DELTA</a> =  7, 
<br/>
&#160;&#160;<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a56b7c0fbc2151c62167c30eb87491d67">OBJ_ANY</a>, 
<a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a7584313de0f049ccd0263ce9e4b17dc7">OBJ_MAX</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structondisk__cache__entry.html">ondisk_cache_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#adfd6cd987e8fb11e4c03491cb8ba81f2">__attribute__</a> ((packed))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a45877e999dd8e120ca513bc9ac78134d">hash_name</a> (const char *<a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, int namelen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1b15aa920bb803ad2f0dca518444cb5c">read_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a3fb828874bbad7bb1facad7b4fc4cd74">read_index_preload</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, const char **pathspec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a34634123a8512d58dda6621a79080e56">read_index_from</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, const char *path, int repo_version)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a23cf99ad7e0d7bffd70767fecdd7a8bd">is_index_unborn</a> (struct <a class="el" href="structindex__state.html">index_state</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ab2db9c5059611a9e8dd09a95ea39048c">read_index_unmerged</a> (struct <a class="el" href="structindex__state.html">index_state</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#aec9458995edf7bf9c6389908ab3366f5">write_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, int newfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a8a33b476c3dc728e33e68cd63bda31e0">discard_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#adb97ed95dd5c3c043e0f1cdf05d0f667">unmerged_index</a> (const struct <a class="el" href="structindex__state.html">index_state</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a255f3c14715b9792f50ca3b2b600e91c">verify_path</a> (const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a6d8301cfe39c3625c2e6132d81ea4867">index_name_pos</a> (const struct <a class="el" href="structindex__state.html">index_state</a> *, const char *<a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, int namelen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a039d9ed6b4e6ece63bb1f4002ed6d16f">add_index_entry</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, struct <a class="el" href="structcache__entry.html">cache_entry</a> *ce, int option)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a13d0146720f641b66d3561c7270e8771">rename_index_entry_at</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, int pos, const char *new_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a0e4ddc1ec8c4039bc06b09cff58995d3">remove_index_entry_at</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, int pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a12825d79310dd67cd238e49161be5bfd">remove_marked_cache_entries</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a478519e092fd07dacd10c804cfec4282">remove_file_from_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a2988327a0a98dd3e8868b4b902d310bf">add_to_index</a> (const char *repo_id, int <a class="el" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *path, const char *full_path, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st, int <a class="el" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>, struct <a class="el" href="structSeafileCrypt.html">SeafileCrypt</a> *crypt, <a class="el" href="index_8h.html#ad3590c8e6928357777aec72d944c748d">IndexCB</a> index_cb, const char *modifier, gboolean *added)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a0a287241a624545389a63a0b22a98513">add_empty_dir_to_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *path, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a86bf1084dfc4e0057a52b4da1922de9b">remove_from_index_with_prefix</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *path_prefix, gboolean *not_found)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a56d1945a0677d925b25c610d613aeefc">rename_index_entries</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *src_path, const char *dst_path, gboolean *not_found)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ac3edae475009ceeec48b372556153c70">add_empty_dir_to_index_with_check</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *path, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a21d6b0245750631144db52218a179633">remove_empty_parent_dir_entry</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a7420273c624bff707bc95a4b1b796f19">add_file_to_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *, const char *path, int <a class="el" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ac1791afc7341bbfdee313b82eb250c2c">make_cache_entry</a> (unsigned int <a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>, const unsigned char *<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>, const char *path, const char *full_path, int stage, int refresh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a72b1cce809dbffd745f5cba8e28ddbc5">ce_same_name</a> (struct <a class="el" href="structcache__entry.html">cache_entry</a> *a, struct <a class="el" href="structcache__entry.html">cache_entry</a> *b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a13768493c08fbb4629b5a8984f114681">index_name_is_other</a> (const struct <a class="el" href="structindex__state.html">index_state</a> *, const char *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> (struct <a class="el" href="structcache__entry.html">cache_entry</a> *ce)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ab298f4c9f4e01e029692bef63517a852">ie_match_stat</a> (struct <a class="el" href="structcache__entry.html">cache_entry</a> *, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *, unsigned int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#afc68df9efb649e642b531aebe1a0299c">ie_modified</a> (const struct <a class="el" href="structindex__state.html">index_state</a> *, struct <a class="el" href="structcache__entry.html">cache_entry</a> *, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *, unsigned int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ab890017e37e01d5c50db73c40e72c24d">ce_path_match</a> (const struct <a class="el" href="structcache__entry.html">cache_entry</a> *ce, const char **pathspec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a37ae9831253a5201f6d773a14e1da9ac">index_fd</a> (unsigned char *<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>, int fd, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st, enum <a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623">object_type</a> <a class="el" href="fs-mgr_8c.html#a65cfc9e13d3352fd9099a0408cba715c">type</a>, const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a35caece3e3575d32521f820a8f0a24a7">index_path</a> (unsigned char *<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>, const char *path, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a8225ef1fb93e6538cc4c632928516314">fill_stat_cache_info</a> (struct <a class="el" href="structcache__entry.html">cache_entry</a> *ce, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1bcae1e686ad516d8b562a214c9e2cd8">mark_all_ce_unused</a> (struct <a class="el" href="structindex__state.html">index_state</a> *index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a62df0f7f37866aabf0b0faf196fc0ddf">remove_name_hash</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, struct <a class="el" href="structcache__entry.html">cache_entry</a> *ce)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a6807b08fb7e98733bcdc6b4207993524">add_name_hash</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, struct <a class="el" href="structcache__entry.html">cache_entry</a> *ce)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a3931a94c55aad8bf8267f179ae846711">index_name_exists</a> (struct <a class="el" href="structindex__state.html">index_state</a> *istate, const char *<a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, int namelen, int igncase)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ab905f6df06b1e76ab15e4572afbd35b1">cache_name_compare</a> (const char *name1, int len1, const char *name2, int len2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a8a3589fc007481a8224103522e189254">df_name_compare</a> (const char *name1, int len1, int mode1, const char *name2, int len2, int mode2)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcache__time.html">cache_time</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a774773e5c25d1b44dac32468246cc980">ctime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcache__time.html">cache_time</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#adb9fb1ca66f1a67516c2ee1492e6ab2b">mtime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a81b8f11ea30b5b983ddee745abe7c899">dev</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a5d1468ac5e50f60df1da127284f23497">ino</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a0ef93dab71a01da4660664f3ce20134e">uid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#ae945e2877b4b8aef4ea41f53fb516f37">gid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a> [20]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a> [0]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcache__time64.html">cache_time64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a6dea30e127b517c889b26275d1d91b4f">__attribute__</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a6ca8a533250260e3d223c57328e61203">flags2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a05ae5c9eb0d8296ef927e0b5a466e3d9">ext_name</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a354d23f31e90a8c379e18909f031edf3">ext_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structindex__state.html">index_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#a279b4625934d92ac44db8489a4c8c913">the_index</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="index_8h.html#aa8899f660155df7922b5527eac3b8d0f">null_sha1</a> [20]</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abdb517015bb0ca030d986985bd26040e"></a><!-- doxytag: member="index.h::ADD_CACHE_IGNORE_ERRORS" ref="abdb517015bb0ca030d986985bd26040e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#abdb517015bb0ca030d986985bd26040e">ADD_CACHE_IGNORE_ERRORS</a>&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00413">413</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5dfb8286fcee3126d37ee703f589d114"></a><!-- doxytag: member="index.h::ADD_CACHE_IGNORE_REMOVAL" ref="a5dfb8286fcee3126d37ee703f589d114" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a5dfb8286fcee3126d37ee703f589d114">ADD_CACHE_IGNORE_REMOVAL</a>&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00414">414</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2a004997d129c837e5959615a6b4d63b"></a><!-- doxytag: member="index.h::ADD_CACHE_INTENT" ref="a2a004997d129c837e5959615a6b4d63b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a2a004997d129c837e5959615a6b4d63b">ADD_CACHE_INTENT</a>&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00415">415</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="af3eef6db4672ee6e240c3eb4862f3b2a"></a><!-- doxytag: member="index.h::ADD_CACHE_JUST_APPEND" ref="af3eef6db4672ee6e240c3eb4862f3b2a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#af3eef6db4672ee6e240c3eb4862f3b2a">ADD_CACHE_JUST_APPEND</a>&#160;&#160;&#160;8        /* Append only; tree.c::read_tree() */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00403">403</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6ebc7bd06aeacf22dfb0f3a04a1b0d7f"></a><!-- doxytag: member="index.h::ADD_CACHE_NEW_ONLY" ref="a6ebc7bd06aeacf22dfb0f3a04a1b0d7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a6ebc7bd06aeacf22dfb0f3a04a1b0d7f">ADD_CACHE_NEW_ONLY</a>&#160;&#160;&#160;16        /* Do not replace existing ones */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00404">404</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4e7659151088d67c163cc90e6f12c39c"></a><!-- doxytag: member="index.h::ADD_CACHE_OK_TO_ADD" ref="a4e7659151088d67c163cc90e6f12c39c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a4e7659151088d67c163cc90e6f12c39c">ADD_CACHE_OK_TO_ADD</a>&#160;&#160;&#160;1        /* Ok to add */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00400">400</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6b5725eef5481c5f354df57bd32a4d87"></a><!-- doxytag: member="index.h::ADD_CACHE_OK_TO_REPLACE" ref="a6b5725eef5481c5f354df57bd32a4d87" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a6b5725eef5481c5f354df57bd32a4d87">ADD_CACHE_OK_TO_REPLACE</a>&#160;&#160;&#160;2    /* Ok to replace file/directory */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00401">401</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a51ca0be402a397871ddd370bedd9877d"></a><!-- doxytag: member="index.h::ADD_CACHE_PRETEND" ref="a51ca0be402a397871ddd370bedd9877d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a51ca0be402a397871ddd370bedd9877d">ADD_CACHE_PRETEND</a>&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00412">412</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a36965ae826e331dc71a67c748a3bca80"></a><!-- doxytag: member="index.h::ADD_CACHE_SKIP_DFCHECK" ref="a36965ae826e331dc71a67c748a3bca80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a36965ae826e331dc71a67c748a3bca80">ADD_CACHE_SKIP_DFCHECK</a>&#160;&#160;&#160;4    /* Ok to skip DF conflict checks */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00402">402</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e7d31d20b5b9aea8bb09489ab8ebc59"></a><!-- doxytag: member="index.h::ADD_CACHE_VERBOSE" ref="a5e7d31d20b5b9aea8bb09489ab8ebc59" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a5e7d31d20b5b9aea8bb09489ab8ebc59">ADD_CACHE_VERBOSE</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00411">411</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a736bc90b74e5164dc5060b9c4f41b425"></a><!-- doxytag: member="index.h::ALLOC_GROW" ref="a736bc90b74e5164dc5060b9c4f41b425" args="(x, nr, alloc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a736bc90b74e5164dc5060b9c4f41b425">ALLOC_GROW</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">nr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">alloc&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        if ((nr) &gt; alloc) { \
            if (<a class="code" href="index_8h.html#a96824974fc1cbb6da7418f3ac5e4d57d">alloc_nr</a>(alloc) &lt; (nr)) \
                alloc = (nr); \
            else \
                alloc = <a class="code" href="index_8h.html#a96824974fc1cbb6da7418f3ac5e4d57d">alloc_nr</a>(alloc); \
            x = realloc((x), alloc * <span class="keyword">sizeof</span>(*(x))); \
        } \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Definition at line <a class="el" href="index_8h_source.html#l00378">378</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a96824974fc1cbb6da7418f3ac5e4d57d"></a><!-- doxytag: member="index.h::alloc_nr" ref="a96824974fc1cbb6da7418f3ac5e4d57d" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a96824974fc1cbb6da7418f3ac5e4d57d">alloc_nr</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;(((x)+16)*3/2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00369">369</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a07a18158c879287d1606ceec992ba702"></a><!-- doxytag: member="index.h::cache_entry_size" ref="a07a18158c879287d1606ceec992ba702" args="(len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a07a18158c879287d1606ceec992ba702">cache_entry_size</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structcache__entry.html">cache_entry</a>,len)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00322">322</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="aac01f026b0dad25cdade5134d4870190"></a><!-- doxytag: member="index.h::CACHE_EXT_MODIFIER" ref="aac01f026b0dad25cdade5134d4870190" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#aac01f026b0dad25cdade5134d4870190">CACHE_EXT_MODIFIER</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00173">173</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1df97b2e673364fd2f0d469e21b1c4e4"></a><!-- doxytag: member="index.h::CACHE_SIGNATURE" ref="a1df97b2e673364fd2f0d469e21b1c4e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a1df97b2e673364fd2f0d469e21b1c4e4">CACHE_SIGNATURE</a>&#160;&#160;&#160;0x44495243    /* &quot;DIRC&quot; */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00095">95</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a586309b1feb22f9865dd8925c4a998b2"></a><!-- doxytag: member="index.h::CE_ADDED" ref="a586309b1feb22f9865dd8925c4a998b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a586309b1feb22f9865dd8925c4a998b2">CE_ADDED</a>&#160;&#160;&#160;(1 &lt;&lt; 19)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00215">215</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae8aa611804959bb2ae74143429242dca"></a><!-- doxytag: member="index.h::CE_CONFLICTED" ref="ae8aa611804959bb2ae74143429242dca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ae8aa611804959bb2ae74143429242dca">CE_CONFLICTED</a>&#160;&#160;&#160;(1 &lt;&lt; 23)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00220">220</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a31729cb24b83a49a72edf8e2c59c3ebe"></a><!-- doxytag: member="index.h::CE_EXTENDED" ref="a31729cb24b83a49a72edf8e2c59c3ebe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a31729cb24b83a49a72edf8e2c59c3ebe">CE_EXTENDED</a>&#160;&#160;&#160;(0x4000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00199">199</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5fec288abf6bf424611c0bc0810cc7dc"></a><!-- doxytag: member="index.h::CE_EXTENDED2" ref="a5fec288abf6bf424611c0bc0810cc7dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a5fec288abf6bf424611c0bc0810cc7dc">CE_EXTENDED2</a>&#160;&#160;&#160;(1 &lt;&lt; 31)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00231">231</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac4a72ef3e798ab19bb638128104de7be"></a><!-- doxytag: member="index.h::CE_EXTENDED_FLAGS" ref="ac4a72ef3e798ab19bb638128104de7be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ac4a72ef3e798ab19bb638128104de7be">CE_EXTENDED_FLAGS</a>&#160;&#160;&#160;(<a class="el" href="index_8h.html#a0dd46d4dea2c88bf73657cc4a30a1e54">CE_INTENT_TO_ADD</a> | <a class="el" href="index_8h.html#aa61d80aefce2cc18dbf4f3b9c04db6e7">CE_SKIP_WORKTREE</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00233">233</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4c6ac242046e51f8bd8a82fd7ba586cd"></a><!-- doxytag: member="index.h::CE_HASHED" ref="a4c6ac242046e51f8bd8a82fd7ba586cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a4c6ac242046e51f8bd8a82fd7ba586cd">CE_HASHED</a>&#160;&#160;&#160;(1 &lt;&lt; 20)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00217">217</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0dd46d4dea2c88bf73657cc4a30a1e54"></a><!-- doxytag: member="index.h::CE_INTENT_TO_ADD" ref="a0dd46d4dea2c88bf73657cc4a30a1e54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a0dd46d4dea2c88bf73657cc4a30a1e54">CE_INTENT_TO_ADD</a>&#160;&#160;&#160;(1 &lt;&lt; 29)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00228">228</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="af89192589f914101b8c8cea880ab350d"></a><!-- doxytag: member="index.h::ce_mark_uptodate" ref="af89192589f914101b8c8cea880ab350d" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#af89192589f914101b8c8cea880ab350d">ce_mark_uptodate</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;((ce)-&gt;ce_flags |= <a class="el" href="index_8h.html#a0af6f85f1def3c429744e08d34c65003">CE_UPTODATE</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00283">283</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="abd49280eba10dafd6f24cc3a6eab6313"></a><!-- doxytag: member="index.h::CE_MATCH_IGNORE_SKIP_WORKTREE" ref="abd49280eba10dafd6f24cc3a6eab6313" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#abd49280eba10dafd6f24cc3a6eab6313">CE_MATCH_IGNORE_SKIP_WORKTREE</a>&#160;&#160;&#160;04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00469">469</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3ecb29f06d046b6a99ed2148f91ae0c3"></a><!-- doxytag: member="index.h::CE_MATCH_IGNORE_VALID" ref="a3ecb29f06d046b6a99ed2148f91ae0c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a3ecb29f06d046b6a99ed2148f91ae0c3">CE_MATCH_IGNORE_VALID</a>&#160;&#160;&#160;01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00465">465</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a68c76b444c1d81fe952b07ad9f0f5fb7"></a><!-- doxytag: member="index.h::CE_MATCH_RACY_IS_DIRTY" ref="a68c76b444c1d81fe952b07ad9f0f5fb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a68c76b444c1d81fe952b07ad9f0f5fb7">CE_MATCH_RACY_IS_DIRTY</a>&#160;&#160;&#160;02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00467">467</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a92e847bc81d825658bd3ef392e2f6c3b"></a><!-- doxytag: member="index.h::CE_NAMEMASK" ref="a92e847bc81d825658bd3ef392e2f6c3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a92e847bc81d825658bd3ef392e2f6c3b">CE_NAMEMASK</a>&#160;&#160;&#160;(0x0fff)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00197">197</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8067adb7b7861023504f0dccaf0db8f3"></a><!-- doxytag: member="index.h::CE_NEW_SKIP_WORKTREE" ref="a8067adb7b7861023504f0dccaf0db8f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a8067adb7b7861023504f0dccaf0db8f3">CE_NEW_SKIP_WORKTREE</a>&#160;&#160;&#160;(1 &lt;&lt; 25)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00223">223</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a29b7e76e0238ae503aed4add6c07f88a"></a><!-- doxytag: member="index.h::ce_permissions" ref="a29b7e76e0238ae503aed4add6c07f88a" args="(mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a29b7e76e0238ae503aed4add6c07f88a">ce_permissions</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>) &amp; 0100) ? 0755 : 0644)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00285">285</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa5ee599d9d7af67f19dba204ce9030c0"></a><!-- doxytag: member="index.h::CE_REMOVE" ref="aa5ee599d9d7af67f19dba204ce9030c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#aa5ee599d9d7af67f19dba204ce9030c0">CE_REMOVE</a>&#160;&#160;&#160;(1 &lt;&lt; 17)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00213">213</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="acde7ea7616605cb5336badf6884a87ca"></a><!-- doxytag: member="index.h::ce_size" ref="acde7ea7616605cb5336badf6884a87ca" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#acde7ea7616605cb5336badf6884a87ca">ce_size</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a07a18158c879287d1606ceec992ba702">cache_entry_size</a>(ce_namelen(ce))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00277">277</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa61d80aefce2cc18dbf4f3b9c04db6e7"></a><!-- doxytag: member="index.h::CE_SKIP_WORKTREE" ref="aa61d80aefce2cc18dbf4f3b9c04db6e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#aa61d80aefce2cc18dbf4f3b9c04db6e7">CE_SKIP_WORKTREE</a>&#160;&#160;&#160;(1 &lt;&lt; 30)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00229">229</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa9cb581aaeefbbd01aa6c7997f44a5e4"></a><!-- doxytag: member="index.h::ce_skip_worktree" ref="aa9cb581aaeefbbd01aa6c7997f44a5e4" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#aa9cb581aaeefbbd01aa6c7997f44a5e4">ce_skip_worktree</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;((ce)-&gt;ce_flags &amp; <a class="el" href="index_8h.html#aa61d80aefce2cc18dbf4f3b9c04db6e7">CE_SKIP_WORKTREE</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00282">282</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0379c411a3dc56c2d5ac0b1fcce22ead"></a><!-- doxytag: member="index.h::ce_stage" ref="a0379c411a3dc56c2d5ac0b1fcce22ead" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="index_8h.html#ae53d91d6dee84ef5e3793ab535ea01c0">CE_STAGEMASK</a> &amp; (ce)-&gt;ce_flags) &gt;&gt; <a class="el" href="index_8h.html#a5aab5883561880af062241493be324cd">CE_STAGESHIFT</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00280">280</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae53d91d6dee84ef5e3793ab535ea01c0"></a><!-- doxytag: member="index.h::CE_STAGEMASK" ref="ae53d91d6dee84ef5e3793ab535ea01c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ae53d91d6dee84ef5e3793ab535ea01c0">CE_STAGEMASK</a>&#160;&#160;&#160;(0x3000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00198">198</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5aab5883561880af062241493be324cd"></a><!-- doxytag: member="index.h::CE_STAGESHIFT" ref="a5aab5883561880af062241493be324cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a5aab5883561880af062241493be324cd">CE_STAGESHIFT</a>&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00201">201</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="adac75a97465362dbf9b07ac6cfe063e2"></a><!-- doxytag: member="index.h::CE_STATE_MASK" ref="adac75a97465362dbf9b07ac6cfe063e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#adac75a97465362dbf9b07ac6cfe063e2">CE_STATE_MASK</a>&#160;&#160;&#160;(<a class="el" href="index_8h.html#a4c6ac242046e51f8bd8a82fd7ba586cd">CE_HASHED</a> | <a class="el" href="index_8h.html#a5808b104dc5c393d448471d68841eae7">CE_UNHASHED</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00249">249</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5808b104dc5c393d448471d68841eae7"></a><!-- doxytag: member="index.h::CE_UNHASHED" ref="a5808b104dc5c393d448471d68841eae7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a5808b104dc5c393d448471d68841eae7">CE_UNHASHED</a>&#160;&#160;&#160;(1 &lt;&lt; 21)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00218">218</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab9f9391faf6b3de1d55d71cb07417d0e"></a><!-- doxytag: member="index.h::CE_UNPACKED" ref="ab9f9391faf6b3de1d55d71cb07417d0e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ab9f9391faf6b3de1d55d71cb07417d0e">CE_UNPACKED</a>&#160;&#160;&#160;(1 &lt;&lt; 24)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00222">222</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d46becf22e28d6f8bffa8ee949acb45"></a><!-- doxytag: member="index.h::CE_UPDATE" ref="a1d46becf22e28d6f8bffa8ee949acb45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a1d46becf22e28d6f8bffa8ee949acb45">CE_UPDATE</a>&#160;&#160;&#160;(1 &lt;&lt; 16)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00212">212</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0af6f85f1def3c429744e08d34c65003"></a><!-- doxytag: member="index.h::CE_UPTODATE" ref="a0af6f85f1def3c429744e08d34c65003" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a0af6f85f1def3c429744e08d34c65003">CE_UPTODATE</a>&#160;&#160;&#160;(1 &lt;&lt; 18)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00214">214</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad55a581e1adce0475f3b6e044e8b3411"></a><!-- doxytag: member="index.h::ce_uptodate" ref="ad55a581e1adce0475f3b6e044e8b3411" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ad55a581e1adce0475f3b6e044e8b3411">ce_uptodate</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;((ce)-&gt;ce_flags &amp; <a class="el" href="index_8h.html#a0af6f85f1def3c429744e08d34c65003">CE_UPTODATE</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00281">281</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a85680cf3653d1fd82efb449619733ea4"></a><!-- doxytag: member="index.h::CE_VALID" ref="a85680cf3653d1fd82efb449619733ea4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a85680cf3653d1fd82efb449619733ea4">CE_VALID</a>&#160;&#160;&#160;(0x8000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00200">200</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab8db831d893aba29775bf7251661296b"></a><!-- doxytag: member="index.h::CE_WT_REMOVE" ref="ab8db831d893aba29775bf7251661296b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ab8db831d893aba29775bf7251661296b">CE_WT_REMOVE</a>&#160;&#160;&#160;(1 &lt;&lt; 22) /* remove in work directory */</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00219">219</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a69a2a3240c9e4e77fcb46d34a0f6f07d"></a><!-- doxytag: member="index.h::CTIME_CHANGED" ref="a69a2a3240c9e4e77fcb46d34a0f6f07d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a69a2a3240c9e4e77fcb46d34a0f6f07d">CTIME_CHANGED</a>&#160;&#160;&#160;0x0002</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00486">486</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a795e49b040736f9ff8d888ac89841d66"></a><!-- doxytag: member="index.h::DATA_CHANGED" ref="a795e49b040736f9ff8d888ac89841d66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a795e49b040736f9ff8d888ac89841d66">DATA_CHANGED</a>&#160;&#160;&#160;0x0020</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00490">490</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1aff26cd99832c880caba07bedb86e3e"></a><!-- doxytag: member="index.h::DTYPE" ref="a1aff26cd99832c880caba07bedb86e3e" args="(de)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a1aff26cd99832c880caba07bedb86e3e">DTYPE</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">de</td><td>)</td>
          <td>&#160;&#160;&#160;((de)-&gt;d_type)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00062">62</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a22880aa1a3f99addbddf6eedb2546933"></a><!-- doxytag: member="index.h::flexible_size" ref="a22880aa1a3f99addbddf6eedb2546933" args="(STRUCT, len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">STRUCT, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((offsetof(struct STRUCT,<a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>) + (len) + 8) &amp; ~7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00321">321</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae7b02c083326b7a8691d3cf601dd48c6"></a><!-- doxytag: member="index.h::INODE_CHANGED" ref="ae7b02c083326b7a8691d3cf601dd48c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ae7b02c083326b7a8691d3cf601dd48c6">INODE_CHANGED</a>&#160;&#160;&#160;0x0010</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00489">489</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8014aaa9fc4ef3c56a331bdda0c7a71c"></a><!-- doxytag: member="index.h::MODE_CHANGED" ref="a8014aaa9fc4ef3c56a331bdda0c7a71c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a8014aaa9fc4ef3c56a331bdda0c7a71c">MODE_CHANGED</a>&#160;&#160;&#160;0x0008</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00488">488</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1bbe02a47ba31459df61e21d7c87abbc"></a><!-- doxytag: member="index.h::MTIME_CHANGED" ref="a1bbe02a47ba31459df61e21d7c87abbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a1bbe02a47ba31459df61e21d7c87abbc">MTIME_CHANGED</a>&#160;&#160;&#160;0x0001</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00485">485</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a46067e4c46abc66cde0fd1f5239438f5"></a><!-- doxytag: member="index.h::ondisk_cache_entry_extended_size" ref="a46067e4c46abc66cde0fd1f5239438f5" args="(len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a46067e4c46abc66cde0fd1f5239438f5">ondisk_cache_entry_extended_size</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structondisk__cache__entry__extended.html">ondisk_cache_entry_extended</a>,len)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00325">325</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a552b967e5899126e52804b4ddd388fbf"></a><!-- doxytag: member="index.h::ondisk_cache_entry_size" ref="a552b967e5899126e52804b4ddd388fbf" args="(len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a552b967e5899126e52804b4ddd388fbf">ondisk_cache_entry_size</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structondisk__cache__entry.html">ondisk_cache_entry</a>,len)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00323">323</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a015f9daf88cfcc4c60b8719912851477"></a><!-- doxytag: member="index.h::ondisk_cache_entry_size2" ref="a015f9daf88cfcc4c60b8719912851477" args="(len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a015f9daf88cfcc4c60b8719912851477">ondisk_cache_entry_size2</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a22880aa1a3f99addbddf6eedb2546933">flexible_size</a>(<a class="el" href="structondisk__cache__entry2.html">ondisk_cache_entry2</a>,len)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00324">324</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad562eeda2e10022dc93db2b51b3df1e9"></a><!-- doxytag: member="index.h::ondisk_ce_size" ref="ad562eeda2e10022dc93db2b51b3df1e9" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ad562eeda2e10022dc93db2b51b3df1e9">ondisk_ce_size</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a552b967e5899126e52804b4ddd388fbf">ondisk_cache_entry_size</a>(ce_namelen(ce))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00278">278</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a75e5d7a68fa10d5816da166b78d2d25a"></a><!-- doxytag: member="index.h::ondisk_ce_size2" ref="a75e5d7a68fa10d5816da166b78d2d25a" args="(ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a75e5d7a68fa10d5816da166b78d2d25a">ondisk_ce_size2</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ce</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="index_8h.html#a015f9daf88cfcc4c60b8719912851477">ondisk_cache_entry_size2</a>(ce_namelen(ce))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00279">279</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad3b376409af05e250ebd84cb16e96530"></a><!-- doxytag: member="index.h::OWNER_CHANGED" ref="ad3b376409af05e250ebd84cb16e96530" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ad3b376409af05e250ebd84cb16e96530">OWNER_CHANGED</a>&#160;&#160;&#160;0x0004</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00487">487</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4dba57703d56f844b1869ffa201e5d08"></a><!-- doxytag: member="index.h::S_IFGITLINK" ref="a4dba57703d56f844b1869ffa201e5d08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a4dba57703d56f844b1869ffa201e5d08">S_IFGITLINK</a>&#160;&#160;&#160;0160000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00086">86</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="acfc83a4d096b9c0056236d948896ad86"></a><!-- doxytag: member="index.h::S_IFINVALID" ref="acfc83a4d096b9c0056236d948896ad86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#acfc83a4d096b9c0056236d948896ad86">S_IFINVALID</a>&#160;&#160;&#160;0030000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00071">71</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a63e538171307b264dd11b7685c94b9ac"></a><!-- doxytag: member="index.h::S_ISGITLINK" ref="a63e538171307b264dd11b7685c94b9ac" args="(m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#a63e538171307b264dd11b7685c94b9ac">S_ISGITLINK</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">m</td><td>)</td>
          <td>&#160;&#160;&#160;(((m) &amp; S_IFMT) == <a class="el" href="index_8h.html#a4dba57703d56f844b1869ffa201e5d08">S_IFGITLINK</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00087">87</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad70ed9dc79ab15539f7b907efe10b4c7"></a><!-- doxytag: member="index.h::TYPE_CHANGED" ref="ad70ed9dc79ab15539f7b907efe10b4c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="index_8h.html#ad70ed9dc79ab15539f7b907efe10b4c7">TYPE_CHANGED</a>&#160;&#160;&#160;0x0040</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00491">491</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ad3590c8e6928357777aec72d944c748d"></a><!-- doxytag: member="index.h::IndexCB" ref="ad3590c8e6928357777aec72d944c748d" args=")(const char *repo_id, int version, const char *path, unsigned char sha1[], struct SeafileCrypt *crypt, gboolean write_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="index_8h.html#ad3590c8e6928357777aec72d944c748d">IndexCB</a>)(const char *repo_id, int <a class="el" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, const char *path, unsigned char <a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>[], struct <a class="el" href="structSeafileCrypt.html">SeafileCrypt</a> *crypt, gboolean write_data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00417">417</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="af54461b7c3322b2256322f7b545bd623"></a><!-- doxytag: member="index.h::object_type" ref="af54461b7c3322b2256322f7b545bd623" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623">object_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a8bd46dc1ca2cf7ed50f1ac7e23c1748a"></a><!-- doxytag: member="OBJ_BAD" ref="af54461b7c3322b2256322f7b545bd623a8bd46dc1ca2cf7ed50f1ac7e23c1748a" args="" -->OBJ_BAD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a01ff4d160d4dacb219fa040042af5626"></a><!-- doxytag: member="OBJ_NONE" ref="af54461b7c3322b2256322f7b545bd623a01ff4d160d4dacb219fa040042af5626" args="" -->OBJ_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623ad13f153b038964740388f11eb2336b20"></a><!-- doxytag: member="OBJ_COMMIT" ref="af54461b7c3322b2256322f7b545bd623ad13f153b038964740388f11eb2336b20" args="" -->OBJ_COMMIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623aab56f8210d066445853058072941f6d7"></a><!-- doxytag: member="OBJ_TREE" ref="af54461b7c3322b2256322f7b545bd623aab56f8210d066445853058072941f6d7" args="" -->OBJ_TREE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a349804bd0b40b4a3a21bd0fb78154459"></a><!-- doxytag: member="OBJ_BLOB" ref="af54461b7c3322b2256322f7b545bd623a349804bd0b40b4a3a21bd0fb78154459" args="" -->OBJ_BLOB</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a99b205a3adddf115c7c5d8438c82b597"></a><!-- doxytag: member="OBJ_TAG" ref="af54461b7c3322b2256322f7b545bd623a99b205a3adddf115c7c5d8438c82b597" args="" -->OBJ_TAG</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a43256709a9db879bd71aff7ce2d46db6"></a><!-- doxytag: member="OBJ_OFS_DELTA" ref="af54461b7c3322b2256322f7b545bd623a43256709a9db879bd71aff7ce2d46db6" args="" -->OBJ_OFS_DELTA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623ad0e1199bf543b19a0fc1738a982c5671"></a><!-- doxytag: member="OBJ_REF_DELTA" ref="af54461b7c3322b2256322f7b545bd623ad0e1199bf543b19a0fc1738a982c5671" args="" -->OBJ_REF_DELTA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a56b7c0fbc2151c62167c30eb87491d67"></a><!-- doxytag: member="OBJ_ANY" ref="af54461b7c3322b2256322f7b545bd623a56b7c0fbc2151c62167c30eb87491d67" args="" -->OBJ_ANY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af54461b7c3322b2256322f7b545bd623a7584313de0f049ccd0263ce9e4b17dc7"></a><!-- doxytag: member="OBJ_MAX" ref="af54461b7c3322b2256322f7b545bd623a7584313de0f049ccd0263ce9e4b17dc7" args="" -->OBJ_MAX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="index_8h_source.html#l00348">348</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>
<div class="fragment"><pre class="fragment">                 {
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a8bd46dc1ca2cf7ed50f1ac7e23c1748a">OBJ_BAD</a> = -1,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a01ff4d160d4dacb219fa040042af5626">OBJ_NONE</a> = 0,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623ad13f153b038964740388f11eb2336b20">OBJ_COMMIT</a> = 1,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623aab56f8210d066445853058072941f6d7">OBJ_TREE</a> = 2,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a349804bd0b40b4a3a21bd0fb78154459">OBJ_BLOB</a> = 3,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a99b205a3adddf115c7c5d8438c82b597">OBJ_TAG</a> = 4,
    <span class="comment">/* 5 for future expansion */</span>
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a43256709a9db879bd71aff7ce2d46db6">OBJ_OFS_DELTA</a> = 6,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623ad0e1199bf543b19a0fc1738a982c5671">OBJ_REF_DELTA</a> = 7,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a56b7c0fbc2151c62167c30eb87491d67">OBJ_ANY</a>,
    <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a7584313de0f049ccd0263ce9e4b17dc7">OBJ_MAX</a>
};
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="adfd6cd987e8fb11e4c03491cb8ba81f2"></a><!-- doxytag: member="index.h::__attribute__" ref="adfd6cd987e8fb11e4c03491cb8ba81f2" args="((packed))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structondisk__cache__entry.html">ondisk_cache_entry</a> <a class="el" href="struct____attribute____.html">__attribute__</a> </td>
          <td>(</td>
          <td class="paramtype">(packed)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0a287241a624545389a63a0b22a98513"></a><!-- doxytag: member="index.h::add_empty_dir_to_index" ref="a0a287241a624545389a63a0b22a98513" args="(struct index_state *istate, const char *path, SeafStat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a0a287241a624545389a63a0b22a98513">add_empty_dir_to_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01141">1141</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce, *alias;
    <span class="keywordtype">int</span> add_option = (<a class="code" href="index_8h.html#a4e7659151088d67c163cc90e6f12c39c">ADD_CACHE_OK_TO_ADD</a>|<a class="code" href="index_8h.html#a6b5725eef5481c5f354df57bd32a4d87">ADD_CACHE_OK_TO_REPLACE</a>);

    ce = create_empty_dir_index_entry (path, st);

    <span class="keywordflow">if</span> (is_garbage_empty_dir (istate, ce)) {
        free (ce);
        <span class="keywordflow">return</span> 0;
    }

    alias = <a class="code" href="index_8c.html#a3931a94c55aad8bf8267f179ae846711">index_name_exists</a>(istate, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, ce_namelen(ce), 0);
    <span class="keywordflow">if</span> (alias) {
        free (ce);
        <span class="keywordflow">return</span> 0;
    } <span class="keywordflow">else</span> {
<span class="preprocessor">#if defined WIN32 || defined __APPLE__</span>
<span class="preprocessor"></span>        alias = <a class="code" href="index_8c.html#a3931a94c55aad8bf8267f179ae846711">index_name_exists</a> (istate, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, ce_namelen(ce), 1);
        <span class="comment">/* If file exists case-insensitively but doesn&#39;t exist case-sensitively,</span>
<span class="comment">         * that file is actually being renamed.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (alias) {
            <a class="code" href="index_8c.html#ac131057c151521f1cff71bf1510ef050">remove_file_from_index</a> (istate, alias-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);
            alias = NULL;
        }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    }

    <span class="keywordflow">if</span> (<a class="code" href="index_8c.html#afafdfbe15ca205599303d6e2230886c0">add_index_entry</a>(istate, ce, add_option)) {
        g_warning(<span class="stringliteral">&quot;unable to add %s to index\n&quot;</span>,path);
        free (ce);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3edae475009ceeec48b372556153c70"></a><!-- doxytag: member="index.h::add_empty_dir_to_index_with_check" ref="ac3edae475009ceeec48b372556153c70" args="(struct index_state *istate, const char *path, SeafStat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#ac3edae475009ceeec48b372556153c70">add_empty_dir_to_index_with_check</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01441">1441</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> pathlen = strlen(path);
    <span class="keywordtype">int</span> pos = <a class="code" href="index_8c.html#a1f5ad45bcfb5a2dcc3fae542fa293d4a">index_name_pos</a> (istate, path, pathlen);
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce;

    <span class="comment">/* Exact match, empty dir entry already exists. */</span>
    <span class="keywordflow">if</span> (pos &gt;= 0) {
        <span class="keywordflow">return</span> 0;
    }

    <span class="comment">/* Otherwise it may be a prefix match, remove all entries begin with this prefix.</span>
<span class="comment">     */</span>

    <span class="comment">/* -pos = (the position this entry *should* be) + 1.</span>
<span class="comment">     * So -pos-1 is the first entry larger than this entry.</span>
<span class="comment">     */</span>
    pos = -pos-1;

    <span class="comment">/* Add &#39;/&#39; to the end of prefix so that we won&#39;t match a partial path component.</span>
<span class="comment">     * e.g. we don&#39;t want to match &#39;abc&#39; with &#39;abcd/ef&#39;</span>
<span class="comment">     */</span>
    <span class="keywordtype">char</span> *full_path = g_strconcat (path, <span class="stringliteral">&quot;/&quot;</span>, NULL);
    ++pathlen;

    gboolean is_empty = TRUE;

    <span class="keywordflow">while</span> (pos &lt; istate-&gt;cache_nr) {
        ce = istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>[pos];
        <span class="keywordtype">int</span> rc = strncmp (ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, full_path, pathlen);
        <span class="keywordflow">if</span> (rc &lt; 0) {
            ++pos;
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == 0) {
            is_empty = FALSE;
            <span class="keywordflow">break</span>;
        } <span class="keywordflow">else</span>
            <span class="keywordflow">break</span>;
    }

    g_free (full_path);

    <span class="keywordflow">if</span> (is_empty) {
        ce = create_empty_dir_index_entry (path, st);

        <span class="comment">/* Make sure the array is big enough .. */</span>
        <span class="keywordflow">if</span> (istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> == istate-&gt;<a class="code" href="structindex__state.html#aa092fb08928f22bc28e892ba163d3103">cache_alloc</a>) {
            istate-&gt;<a class="code" href="structindex__state.html#aa092fb08928f22bc28e892ba163d3103">cache_alloc</a> = <a class="code" href="index_8h.html#a96824974fc1cbb6da7418f3ac5e4d57d">alloc_nr</a>(istate-&gt;<a class="code" href="structindex__state.html#aa092fb08928f22bc28e892ba163d3103">cache_alloc</a>);
            istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> = realloc(istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>,
                                    istate-&gt;<a class="code" href="structindex__state.html#aa092fb08928f22bc28e892ba163d3103">cache_alloc</a> * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__entry.html">cache_entry</a> *));
        }

        <span class="comment">/* Add it in.. */</span>
        istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a>++;
        <span class="keywordflow">if</span> (istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> &gt; pos + 1)
            memmove(istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + pos + 1,
                    istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + pos,
                    (istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> - pos - 1) * <span class="keyword">sizeof</span>(ce));
        set_index_entry(istate, pos, ce);
        istate-&gt;<a class="code" href="structindex__state.html#a8e22a9fe2486576488e72fe97801ebe5">cache_changed</a> = 1;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7420273c624bff707bc95a4b1b796f19"></a><!-- doxytag: member="index.h::add_file_to_index" ref="a7420273c624bff707bc95a4b1b796f19" args="(struct index_state *, const char *path, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a7420273c624bff707bc95a4b1b796f19">add_file_to_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a039d9ed6b4e6ece63bb1f4002ed6d16f"></a><!-- doxytag: member="index.h::add_index_entry" ref="a039d9ed6b4e6ece63bb1f4002ed6d16f" args="(struct index_state *, struct cache_entry *ce, int option)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a039d9ed6b4e6ece63bb1f4002ed6d16f">add_index_entry</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>ce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00942">942</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> pos;

    <span class="keywordflow">if</span> (option &amp; <a class="code" href="index_8h.html#af3eef6db4672ee6e240c3eb4862f3b2a">ADD_CACHE_JUST_APPEND</a>)
        pos = istate-&gt;cache_nr;
    <span class="keywordflow">else</span> {
        <span class="keywordtype">int</span> ret;
        ret = add_index_entry_with_check(istate, ce, option);
        <span class="keywordflow">if</span> (ret &lt;= 0)
            <span class="keywordflow">return</span> ret;
        pos = ret - 1;
    }

    <span class="comment">/* Make sure the array is big enough .. */</span>
    <span class="keywordflow">if</span> (istate-&gt;cache_nr == istate-&gt;cache_alloc) {
        istate-&gt;cache_alloc = <a class="code" href="index_8h.html#a96824974fc1cbb6da7418f3ac5e4d57d">alloc_nr</a>(istate-&gt;cache_alloc);
        istate-&gt;cache = realloc(istate-&gt;cache,
                                istate-&gt;cache_alloc * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__entry.html">cache_entry</a> *));
    }

    <span class="comment">/* Add it in.. */</span>
    istate-&gt;cache_nr++;
    <span class="keywordflow">if</span> (istate-&gt;cache_nr &gt; pos + 1)
        memmove(istate-&gt;cache + pos + 1,
                istate-&gt;cache + pos,
                (istate-&gt;cache_nr - pos - 1) * <span class="keyword">sizeof</span>(ce));
    set_index_entry(istate, pos, ce);
    istate-&gt;cache_changed = 1;
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6807b08fb7e98733bcdc6b4207993524"></a><!-- doxytag: member="index.h::add_name_hash" ref="a6807b08fb7e98733bcdc6b4207993524" args="(struct index_state *istate, struct cache_entry *ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="name-hash_8c.html#a6807b08fb7e98733bcdc6b4207993524">add_name_hash</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>ce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01989">1989</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    g_hash_table_insert (istate-&gt;<a class="code" href="structindex__state.html#ab30d2dde7a88b0d003ac7fc31952a376">name_hash</a>, g_strdup(ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>), ce);
<span class="preprocessor">#if defined WIN32 || defined __APPLE__</span>
<span class="preprocessor"></span>    g_hash_table_insert (istate-&gt;i_name_hash, g_utf8_strdown(ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, -1), ce);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a2988327a0a98dd3e8868b4b902d310bf"></a><!-- doxytag: member="index.h::add_to_index" ref="a2988327a0a98dd3e8868b4b902d310bf" args="(const char *repo_id, int version, struct index_state *istate, const char *path, const char *full_path, SeafStat *st, int flags, struct SeafileCrypt *crypt, IndexCB index_cb, const char *modifier, gboolean *added)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a2988327a0a98dd3e8868b4b902d310bf">add_to_index</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>full_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structSeafileCrypt.html">SeafileCrypt</a> *&#160;</td>
          <td class="paramname"><em>crypt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="index_8h.html#ad3590c8e6928357777aec72d944c748d">IndexCB</a>&#160;</td>
          <td class="paramname"><em>index_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>modifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gboolean *&#160;</td>
          <td class="paramname"><em>added</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00974">974</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>, namelen;
    mode_t st_mode = st-&gt;st_mode;
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce, *alias;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>[20];
    <span class="keywordtype">unsigned</span> ce_option = <a class="code" href="index_8h.html#a3ecb29f06d046b6a99ed2148f91ae0c3">CE_MATCH_IGNORE_VALID</a>|<a class="code" href="index_8h.html#abd49280eba10dafd6f24cc3a6eab6313">CE_MATCH_IGNORE_SKIP_WORKTREE</a>|<a class="code" href="index_8h.html#a68c76b444c1d81fe952b07ad9f0f5fb7">CE_MATCH_RACY_IS_DIRTY</a>;
    <span class="keywordtype">int</span> add_option = (<a class="code" href="index_8h.html#a4e7659151088d67c163cc90e6f12c39c">ADD_CACHE_OK_TO_ADD</a>|<a class="code" href="index_8h.html#a6b5725eef5481c5f354df57bd32a4d87">ADD_CACHE_OK_TO_REPLACE</a>);

    *added = FALSE;

    <span class="keywordflow">if</span> (!S_ISREG(st_mode) &amp;&amp; !S_ISLNK(st_mode) &amp;&amp; !S_ISDIR(st_mode)) {
        g_warning(<span class="stringliteral">&quot;%s: can only add regular files, symbolic links or git-directories\n&quot;</span>, path);
        <span class="keywordflow">return</span> -1;
    }

    namelen = strlen(path);
    <span class="comment">/* if (S_ISDIR(st_mode)) { */</span>
    <span class="comment">/*     while (namelen &amp;&amp; path[namelen-1] == &#39;/&#39;) */</span>
    <span class="comment">/*         namelen--; */</span>
    <span class="comment">/* } */</span>
    size = <a class="code" href="index_8h.html#a07a18158c879287d1606ceec992ba702">cache_entry_size</a>(namelen);
    ce = calloc(1, size);
    memcpy(ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, path, namelen);
    ce-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> = namelen;
    <a class="code" href="index_8c.html#a8225ef1fb93e6538cc4c632928516314">fill_stat_cache_info</a>(ce, st);

    ce-&gt;<a class="code" href="structcache__entry.html#a5fcbcc4e7265ae8150f136380ed92c05">ce_mode</a> = create_ce_mode(st_mode);

    alias = <a class="code" href="index_8c.html#a3931a94c55aad8bf8267f179ae846711">index_name_exists</a>(istate, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, ce_namelen(ce), 0);
    <span class="keywordflow">if</span> (alias) {
        <span class="keywordflow">if</span> (!<a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(alias) &amp;&amp; !<a class="code" href="index_8c.html#a2a76921da1fbb55b7b33983ca9e8edc4">ie_match_stat</a>(alias, st, ce_option)) {
            <span class="comment">/* Nothing changed, really */</span>
            free(ce);
            <span class="keywordflow">if</span> (!<a class="code" href="index_8h.html#a63e538171307b264dd11b7685c94b9ac">S_ISGITLINK</a>(alias-&gt;<a class="code" href="structcache__entry.html#a5fcbcc4e7265ae8150f136380ed92c05">ce_mode</a>))
                <a class="code" href="index_8h.html#af89192589f914101b8c8cea880ab350d">ce_mark_uptodate</a>(alias);
            alias-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> |= <a class="code" href="index_8h.html#a586309b1feb22f9865dd8925c4a998b2">CE_ADDED</a>;
            <span class="keywordflow">return</span> 0;
        }
    } <span class="keywordflow">else</span> {
<span class="preprocessor">#if defined WIN32 || defined __APPLE__</span>
<span class="preprocessor"></span>        alias = <a class="code" href="index_8c.html#a3931a94c55aad8bf8267f179ae846711">index_name_exists</a> (istate, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, ce_namelen(ce), 1);
        <span class="comment">/* If file exists case-insensitively but doesn&#39;t exist case-sensitively,</span>
<span class="comment">         * that file is actually being renamed.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (alias) {
            <a class="code" href="index_8c.html#ac131057c151521f1cff71bf1510ef050">remove_file_from_index</a> (istate, alias-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);
            alias = NULL;
        }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    }

<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="comment">/* On Windows, no &#39;x&#39; bit in file mode.</span>
<span class="comment">     * To prevent overwriting &#39;x&#39; bit, we directly use existing ce mode. </span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (alias)
        ce-&gt;<a class="code" href="structcache__entry.html#a5fcbcc4e7265ae8150f136380ed92c05">ce_mode</a> = alias-&gt;<a class="code" href="structcache__entry.html#a5fcbcc4e7265ae8150f136380ed92c05">ce_mode</a>;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="comment">/* Fix daylight saving time bug on Windows.</span>
<span class="comment">     * See http://www.codeproject.com/Articles/1144/Beating-the-Daylight-Savings-Time-bug-and-getting</span>
<span class="comment">     * If ce and wt timestamp has a 1 hour gap, it may be affected by the bug.</span>
<span class="comment">     * We then compare the file&#39;s id with the id in ce. If they&#39;re the same,</span>
<span class="comment">     * we don&#39;t need to copy the blocks again. Only update the index.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (alias &amp;&amp; !<a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(alias) &amp;&amp;
        (ABS(alias-&gt;<a class="code" href="structcache__entry.html#a1c66f1f4e7773a56010e7ec64bd38a95">ce_mtime</a>.<a class="code" href="structcache__time64.html#ae37877c7f3995f5a44a4a9fd7bb91d46">sec</a> - st-&gt;st_mtime) == 3600 ||
         ABS(alias-&gt;<a class="code" href="structcache__entry.html#a5258a9a9e2fc3bfcd4859049912b65e8">ce_ctime</a>.<a class="code" href="structcache__time64.html#ae37877c7f3995f5a44a4a9fd7bb91d46">sec</a> - st-&gt;st_ctime) == 3600)) {
        <span class="keywordflow">if</span> (index_cb (repo_id, <a class="code" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, full_path, sha1, crypt, FALSE) &lt; 0) {
            free (ce);
            <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">if</span> (memcmp (alias-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, sha1, 20) == 0)
            <span class="keywordflow">goto</span> <a class="code" href="vc-utils_8c.html#ab93fff6b962d6fd7482c95d17c8bf6eb">update_index</a>;
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="comment">/* Skip index file errors. */</span>
    <span class="keywordflow">if</span> (index_cb (repo_id, <a class="code" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, full_path, sha1, crypt, TRUE) &lt; 0) {
        free (ce);
        <span class="keywordflow">return</span> 0;
    }

<a class="code" href="vc-utils_8c.html#ab93fff6b962d6fd7482c95d17c8bf6eb">update_index</a>:
    memcpy (ce-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, sha1, 20);
    ce-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> |= <a class="code" href="index_8h.html#a586309b1feb22f9865dd8925c4a998b2">CE_ADDED</a>;
    ce-&gt;<a class="code" href="structcache__entry.html#a786aa5bc6234542fe202023bcf721afd">modifier</a> = g_strdup(<a class="code" href="structcache__entry.html#a786aa5bc6234542fe202023bcf721afd">modifier</a>);

    <span class="keywordflow">if</span> (<a class="code" href="index_8c.html#afafdfbe15ca205599303d6e2230886c0">add_index_entry</a>(istate, ce, add_option)) {
        g_warning(<span class="stringliteral">&quot;unable to add %s to index\n&quot;</span>,path);
        <span class="keywordflow">return</span> -1;
    }

    *added = TRUE;
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a156a4ea461fcf14e0b73755b02e7e7d1"></a><!-- doxytag: member="index.h::cache_entry_free" ref="a156a4ea461fcf14e0b73755b02e7e7d1" args="(struct cache_entry *ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>ce</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01972">1972</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    g_free (ce-&gt;<a class="code" href="structcache__entry.html#a786aa5bc6234542fe202023bcf721afd">modifier</a>);
    free (ce);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab905f6df06b1e76ab15e4572afbd35b1"></a><!-- doxytag: member="index.h::cache_name_compare" ref="ab905f6df06b1e76ab15e4572afbd35b1" args="(const char *name1, int len1, const char *name2, int len2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#ab905f6df06b1e76ab15e4572afbd35b1">cache_name_compare</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00418">418</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> len1 = flags1 &amp; <a class="code" href="index_8h.html#a92e847bc81d825658bd3ef392e2f6c3b">CE_NAMEMASK</a>;
    <span class="keywordtype">int</span> len2 = <a class="code" href="index_8h.html#a6ca8a533250260e3d223c57328e61203">flags2</a> &amp; <a class="code" href="index_8h.html#a92e847bc81d825658bd3ef392e2f6c3b">CE_NAMEMASK</a>;
    <span class="keywordtype">int</span> len = len1 &lt; len2 ? len1 : len2;
    <span class="keywordtype">int</span> cmp;

    cmp = memcmp(name1, name2, len);
    <span class="keywordflow">if</span> (cmp)
        <span class="keywordflow">return</span> cmp;
    <span class="keywordflow">if</span> (len1 &lt; len2)
        <span class="keywordflow">return</span> -1;
    <span class="keywordflow">if</span> (len1 &gt; len2)
        <span class="keywordflow">return</span> 1;

    <span class="comment">/* Compare stages  */</span>
    flags1 &amp;= <a class="code" href="index_8h.html#ae53d91d6dee84ef5e3793ab535ea01c0">CE_STAGEMASK</a>;
    <a class="code" href="index_8h.html#a6ca8a533250260e3d223c57328e61203">flags2</a> &amp;= <a class="code" href="index_8h.html#ae53d91d6dee84ef5e3793ab535ea01c0">CE_STAGEMASK</a>;

    <span class="keywordflow">if</span> (flags1 &lt; <a class="code" href="index_8h.html#a6ca8a533250260e3d223c57328e61203">flags2</a>)
        <span class="keywordflow">return</span> -1;
    <span class="keywordflow">if</span> (flags1 &gt; <a class="code" href="index_8h.html#a6ca8a533250260e3d223c57328e61203">flags2</a>)
        <span class="keywordflow">return</span> 1;
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab890017e37e01d5c50db73c40e72c24d"></a><!-- doxytag: member="index.h::ce_path_match" ref="ab890017e37e01d5c50db73c40e72c24d" args="(const struct cache_entry *ce, const char **pathspec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#ab890017e37e01d5c50db73c40e72c24d">ce_path_match</a> </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>ce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>pathspec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00780">780</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> *match, *<a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>;
    <span class="keywordtype">int</span> len;

    <span class="keywordflow">if</span> (!pathspec)
        <span class="keywordflow">return</span> 1;

    len = ce_namelen(ce);
    name = ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>;
    <span class="keywordflow">while</span> ((match = *pathspec++) != NULL) {
        <span class="keywordtype">int</span> matchlen = strlen(match);
        <span class="keywordflow">if</span> (matchlen &gt; len)
            <span class="keywordflow">continue</span>;
        <span class="keywordflow">if</span> (memcmp(name, match, matchlen))
            <span class="keywordflow">continue</span>;
        <span class="keywordflow">if</span> (matchlen &amp;&amp; name[matchlen-1] == <span class="charliteral">&#39;/&#39;</span>)
            <span class="keywordflow">return</span> 1;
        <span class="keywordflow">if</span> (name[matchlen] == <span class="charliteral">&#39;/&#39;</span> || !name[matchlen])
            <span class="keywordflow">return</span> 1;
        <span class="keywordflow">if</span> (!matchlen)
            <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a72b1cce809dbffd745f5cba8e28ddbc5"></a><!-- doxytag: member="index.h::ce_same_name" ref="a72b1cce809dbffd745f5cba8e28ddbc5" args="(struct cache_entry *a, struct cache_entry *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a72b1cce809dbffd745f5cba8e28ddbc5">ce_same_name</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00774">774</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> len = ce_namelen(a);
    <span class="keywordflow">return</span> ce_namelen(b) == len &amp;&amp; !memcmp(a-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, b-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, len);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a3589fc007481a8224103522e189254"></a><!-- doxytag: member="index.h::df_name_compare" ref="a8a3589fc007481a8224103522e189254" args="(const char *name1, int len1, int mode1, const char *name2, int len2, int mode2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a8a3589fc007481a8224103522e189254">df_name_compare</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00677">677</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> len = len1 &lt; len2 ? len1 : len2, cmp;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c1, c2;

    cmp = memcmp(name1, name2, len);
    <span class="keywordflow">if</span> (cmp)
        <span class="keywordflow">return</span> cmp;
    <span class="comment">/* Directories and files compare equal (same length, same name) */</span>
    <span class="keywordflow">if</span> (len1 == len2)
        <span class="keywordflow">return</span> 0;
    c1 = name1[len];
    <span class="keywordflow">if</span> (!c1 &amp;&amp; S_ISDIR(mode1))
        c1 = <span class="charliteral">&#39;/&#39;</span>;
    c2 = name2[len];
    <span class="keywordflow">if</span> (!c2 &amp;&amp; S_ISDIR(mode2))
        c2 = <span class="charliteral">&#39;/&#39;</span>;
    <span class="keywordflow">if</span> (c1 == <span class="charliteral">&#39;/&#39;</span> &amp;&amp; !c2)
        <span class="keywordflow">return</span> 0;
    <span class="keywordflow">if</span> (c2 == <span class="charliteral">&#39;/&#39;</span> &amp;&amp; !c1)
        <span class="keywordflow">return</span> 0;
    <span class="keywordflow">return</span> c1 - c2;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a33b476c3dc728e33e68cd63bda31e0"></a><!-- doxytag: member="index.h::discard_index" ref="a8a33b476c3dc728e33e68cd63bda31e0" args="(struct index_state *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a8a33b476c3dc728e33e68cd63bda31e0">discard_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01947">1947</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    <span class="keywordflow">for</span> (i = 0; i &lt; istate-&gt;cache_nr; ++i)
        <a class="code" href="index_8c.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> (istate-&gt;cache[i]);

    istate-&gt;cache_nr = 0;
    istate-&gt;cache_changed = 0;
    istate-&gt;timestamp.sec = 0;
    istate-&gt;timestamp.nsec = 0;
    istate-&gt;name_hash_initialized = 0;
    g_hash_table_destroy (istate-&gt;name_hash);
<span class="preprocessor">#if defined WIN32 || defined __APPLE__</span>
<span class="preprocessor"></span>    g_hash_table_destroy (istate-&gt;i_name_hash);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="comment">/* cache_tree_free(&amp;(istate-&gt;cache_tree)); */</span>
    <span class="comment">/* free(istate-&gt;alloc); */</span>
    free(istate-&gt;cache);
    istate-&gt;alloc = NULL;
    istate-&gt;initialized = 0;

    <span class="comment">/* no need to throw away allocated active_cache */</span>
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8225ef1fb93e6538cc4c632928516314"></a><!-- doxytag: member="index.h::fill_stat_cache_info" ref="a8225ef1fb93e6538cc4c632928516314" args="(struct cache_entry *ce, SeafStat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a8225ef1fb93e6538cc4c632928516314">fill_stat_cache_info</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>ce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00449">449</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    ce-&gt;<a class="code" href="structcache__entry.html#a5258a9a9e2fc3bfcd4859049912b65e8">ce_ctime</a>.<a class="code" href="structcache__time64.html#ae37877c7f3995f5a44a4a9fd7bb91d46">sec</a> = st-&gt;st_ctime;
    ce-&gt;<a class="code" href="structcache__entry.html#a1c66f1f4e7773a56010e7ec64bd38a95">ce_mtime</a>.<a class="code" href="structcache__time64.html#ae37877c7f3995f5a44a4a9fd7bb91d46">sec</a> = st-&gt;st_mtime;
    ce-&gt;<a class="code" href="structcache__entry.html#a5258a9a9e2fc3bfcd4859049912b65e8">ce_ctime</a>.<a class="code" href="structcache__time64.html#a2de767d16c1d2c35cb29ff45ee7b0b71">nsec</a> = 0;
    ce-&gt;<a class="code" href="structcache__entry.html#a1c66f1f4e7773a56010e7ec64bd38a95">ce_mtime</a>.<a class="code" href="structcache__time64.html#a2de767d16c1d2c35cb29ff45ee7b0b71">nsec</a> = 0;
    ce-&gt;<a class="code" href="structcache__entry.html#af8f54d3d01f8b04ed2f72cc7bacd618d">ce_dev</a> = st-&gt;st_dev;
    ce-&gt;<a class="code" href="structcache__entry.html#a1151b621d379629900c574c6a7509dcf">ce_ino</a> = st-&gt;st_ino;
    ce-&gt;<a class="code" href="structcache__entry.html#a69e38fc6cc73fe7c41ad8770cf5751a4">ce_uid</a> = st-&gt;st_uid;
    ce-&gt;<a class="code" href="structcache__entry.html#a1c80f7ae1cdf5c7244ea33cf9241b2f5">ce_gid</a> = st-&gt;st_gid;
    ce-&gt;<a class="code" href="structcache__entry.html#a869a62534c704e5d24ee26cf2f7b86b7">ce_size</a> = st-&gt;st_size;

    <span class="comment">/* if (assume_unchanged) */</span>
    <span class="comment">/*     ce-&gt;ce_flags |= CE_VALID; */</span>

    <span class="keywordflow">if</span> (S_ISREG(st-&gt;st_mode))
        <a class="code" href="index_8h.html#af89192589f914101b8c8cea880ab350d">ce_mark_uptodate</a>(ce);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45877e999dd8e120ca513bc9ac78134d"></a><!-- doxytag: member="index.h::hash_name" ref="a45877e999dd8e120ca513bc9ac78134d" args="(const char *name, int namelen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="name-hash_8c.html#a45877e999dd8e120ca513bc9ac78134d">hash_name</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>namelen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="name-hash_8c_source.html#l00023">23</a> of file <a class="el" href="name-hash_8c_source.html">name-hash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hash = 0x123;

    <span class="keywordflow">do</span> {
        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c = *<a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>++;
        c = icase_hash(c);
        hash = hash*101 + c;
    } <span class="keywordflow">while</span> (--namelen);
    <span class="keywordflow">return</span> hash;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab298f4c9f4e01e029692bef63517a852"></a><!-- doxytag: member="index.h::ie_match_stat" ref="ab298f4c9f4e01e029692bef63517a852" args="(struct cache_entry *, SeafStat *, unsigned int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#ab298f4c9f4e01e029692bef63517a852">ie_match_stat</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00609">609</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> changed;
    <span class="keywordtype">int</span> ignore_valid = <a class="code" href="structoptions.html">options</a> &amp; <a class="code" href="index_8h.html#a3ecb29f06d046b6a99ed2148f91ae0c3">CE_MATCH_IGNORE_VALID</a>;
    <span class="keywordtype">int</span> ignore_skip_worktree = <a class="code" href="structoptions.html">options</a> &amp; <a class="code" href="index_8h.html#abd49280eba10dafd6f24cc3a6eab6313">CE_MATCH_IGNORE_SKIP_WORKTREE</a>;
    <span class="comment">/* int assume_racy_is_modified = options &amp; CE_MATCH_RACY_IS_DIRTY; */</span>

    <span class="comment">/*</span>
<span class="comment">     * If it&#39;s marked as always valid in the index, it&#39;s</span>
<span class="comment">     * valid whatever the checked-out copy says.</span>
<span class="comment">     *</span>
<span class="comment">     * skip-worktree has the same effect with higher precedence</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (!ignore_skip_worktree &amp;&amp; <a class="code" href="index_8h.html#aa9cb581aaeefbbd01aa6c7997f44a5e4">ce_skip_worktree</a>(ce))
        <span class="keywordflow">return</span> 0;
    <span class="keywordflow">if</span> (!ignore_valid &amp;&amp; (ce-&gt;ce_flags &amp; <a class="code" href="index_8h.html#a85680cf3653d1fd82efb449619733ea4">CE_VALID</a>))
        <span class="keywordflow">return</span> 0;

    <span class="comment">/*</span>
<span class="comment">     * Intent-to-add entries have not been added, so the index entry</span>
<span class="comment">     * by definition never matches what is in the work tree until it</span>
<span class="comment">     * actually gets added.</span>
<span class="comment">     */</span>
    <span class="comment">/* if (ce-&gt;ce_flags &amp; CE_INTENT_TO_ADD) */</span>
    <span class="comment">/*     return DATA_CHANGED | TYPE_CHANGED | MODE_CHANGED; */</span>

    changed = ce_match_stat_basic(ce, st);

    <span class="comment">/*</span>
<span class="comment">     * Within 1 second of this sequence:</span>
<span class="comment">     *     echo xyzzy &gt;file &amp;&amp; git-update-index --add file</span>
<span class="comment">     * running this command:</span>
<span class="comment">     *     echo frotz &gt;file</span>
<span class="comment">     * would give a falsely clean cache entry.  The mtime and</span>
<span class="comment">     * length match the cache, and other stat fields do not change.</span>
<span class="comment">     *</span>
<span class="comment">     * We could detect this at update-index time (the cache entry</span>
<span class="comment">     * being registered/updated records the same time as &quot;now&quot;)</span>
<span class="comment">     * and delay the return from git-update-index, but that would</span>
<span class="comment">     * effectively mean we can make at most one commit per second,</span>
<span class="comment">     * which is not acceptable.  Instead, we check cache entries</span>
<span class="comment">     * whose mtime are the same as the index file timestamp more</span>
<span class="comment">     * carefully than others.</span>
<span class="comment">     */</span>
<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (!changed &amp;&amp; is_racy_timestamp(istate, ce)) {
        <span class="comment">/* if (assume_racy_is_modified) */</span>
        <span class="comment">/*     changed |= DATA_CHANGED; */</span>
        <span class="comment">/* else */</span>
        <span class="comment">/*     changed |= ce_modified_check_fs(ce, st); */</span>
        changed = <a class="code" href="index_8h.html#a795e49b040736f9ff8d888ac89841d66">DATA_CHANGED</a>;
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="keywordflow">return</span> changed;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afc68df9efb649e642b531aebe1a0299c"></a><!-- doxytag: member="index.h::ie_modified" ref="afc68df9efb649e642b531aebe1a0299c" args="(const struct index_state *, struct cache_entry *, SeafStat *, unsigned int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#afc68df9efb649e642b531aebe1a0299c">ie_modified</a> </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a37ae9831253a5201f6d773a14e1da9ac"></a><!-- doxytag: member="index.h::index_fd" ref="a37ae9831253a5201f6d773a14e1da9ac" args="(unsigned char *sha1, int fd, SeafStat *st, enum object_type type, const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a37ae9831253a5201f6d773a14e1da9ac">index_fd</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>sha1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="index_8h.html#af54461b7c3322b2256322f7b545bd623">object_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01614">1614</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> ret;
    uint64_t <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a> = st-&gt;st_size;

    <span class="keywordflow">if</span> (!size) {
        ret = index_mem(<a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>, NULL, size, <a class="code" href="fs-mgr_8c.html#a65cfc9e13d3352fd9099a0408cba715c">type</a>, path);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size &lt;= <a class="code" href="index_8c.html#a00b82f1418e7fe22a934b5867ad43279">SMALL_FILE_SIZE</a>) {
        <span class="keywordtype">char</span> *buf = malloc(size);
        <span class="keywordflow">if</span> (size == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a05f0eae648599d413d03103758473e30">readn</a>(fd, buf, size)) {
            ret = index_mem(<a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>, buf, size, <a class="code" href="fs-mgr_8c.html#a65cfc9e13d3352fd9099a0408cba715c">type</a>, path);
        } <span class="keywordflow">else</span> {
            g_warning(<span class="stringliteral">&quot;short read %s\n&quot;</span>, strerror(errno));
            ret = -1;
        }
        free(buf);
    } <span class="keywordflow">else</span> {
        <span class="keywordtype">void</span> *buf = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);
        ret = index_mem(<a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>, buf, size, <a class="code" href="fs-mgr_8c.html#a65cfc9e13d3352fd9099a0408cba715c">type</a>, path);
        munmap(buf, size);
    }
    close(fd);
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3931a94c55aad8bf8267f179ae846711"></a><!-- doxytag: member="index.h::index_name_exists" ref="a3931a94c55aad8bf8267f179ae846711" args="(struct index_state *istate, const char *name, int namelen, int igncase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcache__entry.html">cache_entry</a>* <a class="el" href="name-hash_8c.html#aa04dd65e5bcc8fc409a90a17ff80449a">index_name_exists</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>igncase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01997">1997</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#if defined WIN32 || defined __APPLE__</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (!igncase)
        <span class="keywordflow">return</span> g_hash_table_lookup (istate-&gt;<a class="code" href="structindex__state.html#ab30d2dde7a88b0d003ac7fc31952a376">name_hash</a>, <a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>);
    <span class="keywordflow">else</span> {
        <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce;
        <span class="keywordtype">char</span> *i_name = g_utf8_strdown (<a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, -1);
        ce = g_hash_table_lookup (istate-&gt;i_name_hash, i_name);
        g_free (i_name);
        <span class="keywordflow">return</span> ce;
    }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> g_hash_table_lookup (istate-&gt;<a class="code" href="structindex__state.html#ab30d2dde7a88b0d003ac7fc31952a376">name_hash</a>, <a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a13768493c08fbb4629b5a8984f114681"></a><!-- doxytag: member="index.h::index_name_is_other" ref="a13768493c08fbb4629b5a8984f114681" args="(const struct index_state *, const char *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a13768493c08fbb4629b5a8984f114681">index_name_is_other</a> </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6d8301cfe39c3625c2e6132d81ea4867"></a><!-- doxytag: member="index.h::index_name_pos" ref="a6d8301cfe39c3625c2e6132d81ea4867" args="(const struct index_state *, const char *name, int namelen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a6d8301cfe39c3625c2e6132d81ea4867">index_name_pos</a> </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>namelen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00702">702</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> first, last;

    first = 0;
    last = istate-&gt;cache_nr;
    <span class="keywordflow">while</span> (last &gt; first) {
        <span class="keywordtype">int</span> <a class="code" href="structcache__entry.html#afd4bec9067a7e0c76158d32a9d287684">next</a> = (last + first) &gt;&gt; 1;
        <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce = istate-&gt;cache[<a class="code" href="structcache__entry.html#afd4bec9067a7e0c76158d32a9d287684">next</a>];
        <span class="keywordtype">int</span> cmp = <a class="code" href="index_8c.html#a36a1039c7b0e5005a36afc70220630e4">cache_name_compare</a>(<a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, namelen, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, ce-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a>);
        <span class="keywordflow">if</span> (!cmp)
            <span class="keywordflow">return</span> <a class="code" href="structcache__entry.html#afd4bec9067a7e0c76158d32a9d287684">next</a>;
        <span class="keywordflow">if</span> (cmp &lt; 0) {
            last = <a class="code" href="structcache__entry.html#afd4bec9067a7e0c76158d32a9d287684">next</a>;
            <span class="keywordflow">continue</span>;
        }
        first = next+1;
    }
    <span class="keywordflow">return</span> -first-1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a35caece3e3575d32521f820a8f0a24a7"></a><!-- doxytag: member="index.h::index_path" ref="a35caece3e3575d32521f820a8f0a24a7" args="(unsigned char *sha1, const char *path, SeafStat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a35caece3e3575d32521f820a8f0a24a7">index_path</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>sha1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01640">1640</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> fd;
    <span class="keywordtype">char</span> buf[<a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a>];
    <span class="keywordtype">int</span> pathlen;

    <span class="keywordflow">switch</span> (st-&gt;st_mode &amp; S_IFMT) {
    <span class="keywordflow">case</span> S_IFREG:
        fd = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ad154e736c3751fe880395dff55fab739">seaf_util_open</a> (path, O_RDONLY | O_BINARY);
        <span class="keywordflow">if</span> (fd &lt; 0) {
            g_warning(<span class="stringliteral">&quot;g_open (\&quot;%s\&quot;): %s\n&quot;</span>, path, strerror(errno));
            <span class="keywordflow">return</span> -1;
        }
        <span class="keywordflow">if</span> (<a class="code" href="index_8c.html#a37ae9831253a5201f6d773a14e1da9ac">index_fd</a>(<a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>, fd, st, <a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a349804bd0b40b4a3a21bd0fb78154459">OBJ_BLOB</a>, path) &lt; 0) {
            <span class="keywordflow">return</span> -1;
        }
        <span class="keywordflow">break</span>;
<span class="preprocessor">#ifndef WIN32        </span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> S_IFLNK:
        pathlen = readlink(path, buf, <a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a>);
        <span class="keywordflow">if</span> (pathlen != st-&gt;st_size) {
            <span class="keywordtype">char</span> *errstr = strerror(errno);
            g_warning(<span class="stringliteral">&quot;readlink(\&quot;%s\&quot;): %s\n&quot;</span>, path, errstr);
            <span class="keywordflow">return</span> -1;
        }
        hash_sha1_file(buf, pathlen, <span class="keyword">typename</span>(<a class="code" href="index_8h.html#af54461b7c3322b2256322f7b545bd623a349804bd0b40b4a3a21bd0fb78154459">OBJ_BLOB</a>), <a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>);
        <span class="keywordflow">break</span>;
<span class="preprocessor">#endif        </span>
<span class="preprocessor"></span>    <span class="keywordflow">default</span>:
        g_warning(<span class="stringliteral">&quot;%s: unsupported file type\n&quot;</span>, path);
        <span class="keywordflow">return</span> -1;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a23cf99ad7e0d7bffd70767fecdd7a8bd"></a><!-- doxytag: member="index.h::is_index_unborn" ref="a23cf99ad7e0d7bffd70767fecdd7a8bd" args="(struct index_state *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a23cf99ad7e0d7bffd70767fecdd7a8bd">is_index_unborn</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00403">403</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> (!istate-&gt;cache_nr &amp;&amp; !istate-&gt;alloc &amp;&amp; !istate-&gt;timestamp.sec);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac1791afc7341bbfdee313b82eb250c2c"></a><!-- doxytag: member="index.h::make_cache_entry" ref="ac1791afc7341bbfdee313b82eb250c2c" args="(unsigned int mode, const unsigned char *sha1, const char *path, const char *full_path, int stage, int refresh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcache__entry.html">cache_entry</a>* <a class="el" href="index_8h.html#ac1791afc7341bbfdee313b82eb250c2c">make_cache_entry</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>sha1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>full_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>refresh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01520">1520</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>, len;
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce;

    <span class="comment">/* if (!verify_path(path)) { */</span>
    <span class="comment">/*     g_warning(&quot;Invalid path &#39;%s&#39;&quot;, path); */</span>
    <span class="comment">/*     return NULL; */</span>
    <span class="comment">/* } */</span>

    len = strlen(path);
    size = <a class="code" href="index_8h.html#a07a18158c879287d1606ceec992ba702">cache_entry_size</a>(len);
    ce = calloc(1, size);

    hashcpy(ce-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, <a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>);
    memcpy(ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, path, len);
    ce-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> = create_ce_flags(len, stage);
    ce-&gt;<a class="code" href="structcache__entry.html#a5fcbcc4e7265ae8150f136380ed92c05">ce_mode</a> = create_ce_mode(<a class="code" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>);

    <span class="keywordflow">if</span> (refresh)
        <span class="keywordflow">return</span> refresh_cache_entry(ce, full_path);

    <span class="keywordflow">return</span> ce;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1bcae1e686ad516d8b562a214c9e2cd8"></a><!-- doxytag: member="index.h::mark_all_ce_unused" ref="a1bcae1e686ad516d8b562a214c9e2cd8" args="(struct index_state *index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a1bcae1e686ad516d8b562a214c9e2cd8">mark_all_ce_unused</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00468">468</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    <span class="keywordflow">for</span> (i = 0; i &lt; index-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a>; i++)
        index-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>[i]-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> &amp;= ~(<a class="code" href="index_8h.html#ab9f9391faf6b3de1d55d71cb07417d0e">CE_UNPACKED</a> | <a class="code" href="index_8h.html#a586309b1feb22f9865dd8925c4a998b2">CE_ADDED</a> | <a class="code" href="index_8h.html#a8067adb7b7861023504f0dccaf0db8f3">CE_NEW_SKIP_WORKTREE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1b15aa920bb803ad2f0dca518444cb5c"></a><!-- doxytag: member="index.h::read_index" ref="a1b15aa920bb803ad2f0dca518444cb5c" args="(struct index_state *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a1b15aa920bb803ad2f0dca518444cb5c">read_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a34634123a8512d58dda6621a79080e56"></a><!-- doxytag: member="index.h::read_index_from" ref="a34634123a8512d58dda6621a79080e56" args="(struct index_state *, const char *path, int repo_version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a34634123a8512d58dda6621a79080e56">read_index_from</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>repo_version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00276">276</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> fd, i;
    <a class="code" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> st;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> src_offset;
    <span class="keyword">struct </span><a class="code" href="structcache__header.html">cache_header</a> *hdr;
    <span class="keywordtype">void</span> *mm;
    <span class="keywordtype">size_t</span> mmap_size;

    <span class="keywordflow">if</span> (istate-&gt;initialized)
        <span class="keywordflow">return</span> istate-&gt;cache_nr;

    <span class="comment">/* All newly created index files are version 4. */</span>
    istate-&gt;version = 4;
    <span class="comment">/* Index file stores modifier info if repo version &gt; 0 */</span>
    <span class="keywordflow">if</span> (repo_version &gt; 0)
        istate-&gt;has_modifier = 1;
    istate-&gt;timestamp.sec = 0;
    istate-&gt;timestamp.nsec = 0;
    fd = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ad154e736c3751fe880395dff55fab739">seaf_util_open</a> (path, O_RDONLY | O_BINARY);
    <span class="keywordflow">if</span> (fd &lt; 0) {
        <span class="keywordflow">if</span> (errno == ENOENT) {
            alloc_index (istate);
            <span class="keywordflow">return</span> 0;
        }
        g_critical(<span class="stringliteral">&quot;index file open failed\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">if</span> (<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a09f0677ad28b98b7a85bcda57f71e7c8">seaf_fstat</a>(fd, &amp;st)) {
        g_critical(<span class="stringliteral">&quot;cannot stat the open index\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    mmap_size = (size_t)st.st_size;
    if (mmap_size &lt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__header.html">cache_header</a>) + 20) {
        g_critical(<span class="stringliteral">&quot;index file smaller than expected\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    mm = mmap(NULL, mmap_size, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);
    close(fd);
    <span class="keywordflow">if</span> (mm == MAP_FAILED) {
        g_critical(<span class="stringliteral">&quot;unable to map index file\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    hdr = mm;
    <span class="keywordflow">if</span> (verify_hdr(hdr, mmap_size) &lt; 0)
        <span class="keywordflow">goto</span> unmap;

    <span class="comment">/* Index version will be set to on-disk value here.</span>
<span class="comment">     * If the index is from an old repo, it will be set to 2.</span>
<span class="comment">     * But when we write the index, it&#39;ll be updated to version 4.</span>
<span class="comment">     */</span>
    istate-&gt;version = ntohl(hdr-&gt;<a class="code" href="structcache__header.html#a42d8ebfd084e6f8a35bb0d7fd384c2e1">hdr_version</a>);
    istate-&gt;cache_nr = ntohl(hdr-&gt;<a class="code" href="structcache__header.html#a9eda4ffb0b1c1f379195d68cf6bd04eb">hdr_entries</a>);
    alloc_index (istate);

    <span class="comment">/*</span>
<span class="comment">     * The disk format is actually larger than the in-memory format,</span>
<span class="comment">     * due to space for nsec etc, so even though the in-memory one</span>
<span class="comment">     * has room for a few  more flags, we can allocate using the same</span>
<span class="comment">     * index size</span>
<span class="comment">     */</span>

    src_offset = <span class="keyword">sizeof</span>(*hdr);
    <span class="keywordflow">for</span> (i = 0; i &lt; istate-&gt;cache_nr; i++) {
        <span class="keyword">struct </span><a class="code" href="structondisk__cache__entry.html">ondisk_cache_entry</a> *disk_ce;
        <span class="keyword">struct </span><a class="code" href="structondisk__cache__entry2.html">ondisk_cache_entry2</a> *disk_ce2;
        <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce;

        <span class="keywordflow">if</span> (istate-&gt;version &lt; 4) {
            disk_ce = (<span class="keyword">struct </span><a class="code" href="structondisk__cache__entry.html">ondisk_cache_entry</a> *)((<span class="keywordtype">char</span> *)mm + src_offset);

            <span class="comment">/* allocate each ce separately so that we can free new</span>
<span class="comment">             * entries added by add_index_entry() later.</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> (convert_from_disk(disk_ce, &amp;ce) &lt; 0)
                <span class="keywordflow">return</span> -1;

            src_offset += <a class="code" href="index_8h.html#ad562eeda2e10022dc93db2b51b3df1e9">ondisk_ce_size</a>(ce);
        } <span class="keywordflow">else</span> {
            disk_ce2 = (<span class="keyword">struct </span><a class="code" href="structondisk__cache__entry2.html">ondisk_cache_entry2</a> *)((<span class="keywordtype">char</span> *)mm + src_offset);

            <span class="comment">/* allocate each ce separately so that we can free new</span>
<span class="comment">             * entries added by add_index_entry() later.</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> (convert_from_disk2(disk_ce2, &amp;ce) &lt; 0)
                <span class="keywordflow">return</span> -1;

            src_offset += <a class="code" href="index_8h.html#a75e5d7a68fa10d5816da166b78d2d25a">ondisk_ce_size2</a>(ce);
        }
        set_index_entry(istate, i, ce);
    }
    istate-&gt;timestamp.sec = st.st_mtime;
    istate-&gt;timestamp.nsec = 0;

    <span class="keywordflow">while</span> (src_offset &lt;= mmap_size - 20 - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__ext__hdr.html">cache_ext_hdr</a>)) {
        <span class="comment">/* After an array of active_nr index entries,</span>
<span class="comment">         * there can be arbitrary number of extended</span>
<span class="comment">         * sections, each of which is prefixed with</span>
<span class="comment">         * extension name (4-byte) and section length</span>
<span class="comment">         * in 4-byte network byte order.</span>
<span class="comment">         */</span>
        <span class="keyword">struct </span><a class="code" href="structcache__ext__hdr.html">cache_ext_hdr</a> *exthdr;
        exthdr = (<span class="keyword">struct </span><a class="code" href="structcache__ext__hdr.html">cache_ext_hdr</a> *) ((<span class="keywordtype">char</span> *)mm + src_offset);
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a> = ntohl(exthdr-&gt;<a class="code" href="structcache__ext__hdr.html#aa8927d4824d0db0ebb5b9b0ded6ec16f">ext_name</a>);
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a> = ntohl(exthdr-&gt;<a class="code" href="structcache__ext__hdr.html#a638ba3d19b4e56af024989857bafc8dd">ext_size</a>);
        <span class="keywordflow">if</span> (read_index_extension(istate,
                                 name,
                                 (<span class="keywordtype">char</span> *) mm + src_offset + <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__ext__hdr.html">cache_ext_hdr</a>),
                                 size) &lt; 0)
            <span class="keywordflow">goto</span> unmap;
        src_offset += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structcache__ext__hdr.html">cache_ext_hdr</a>);
        src_offset += <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>;
    }

    munmap(mm, mmap_size);
    <span class="keywordflow">return</span> istate-&gt;cache_nr;

unmap:
    munmap(mm, mmap_size);
    g_critical(<span class="stringliteral">&quot;index file corrupt\n&quot;</span>);
    <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fb828874bbad7bb1facad7b4fc4cd74"></a><!-- doxytag: member="index.h::read_index_preload" ref="a3fb828874bbad7bb1facad7b4fc4cd74" args="(struct index_state *, const char **pathspec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a3fb828874bbad7bb1facad7b4fc4cd74">read_index_preload</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>pathspec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab2db9c5059611a9e8dd09a95ea39048c"></a><!-- doxytag: member="index.h::read_index_unmerged" ref="ab2db9c5059611a9e8dd09a95ea39048c" args="(struct index_state *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#ab2db9c5059611a9e8dd09a95ea39048c">read_index_unmerged</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a21d6b0245750631144db52218a179633"></a><!-- doxytag: member="index.h::remove_empty_parent_dir_entry" ref="a21d6b0245750631144db52218a179633" args="(struct index_state *istate, const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a21d6b0245750631144db52218a179633">remove_empty_parent_dir_entry</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00870">870</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *parent = g_strdup(path);
    <span class="keywordtype">char</span> *slash;

    <span class="comment">/* Find and remove empty dir entry from low level to top level. */</span>
    <span class="keywordflow">while</span> (1) {
        slash = strrchr (parent, <span class="charliteral">&#39;/&#39;</span>);
        <span class="keywordflow">if</span> (!slash)
            <span class="keywordflow">break</span>;

        *slash = 0;

        <span class="keywordflow">if</span> (<a class="code" href="index_8c.html#a3931a94c55aad8bf8267f179ae846711">index_name_exists</a> (istate, parent, strlen(parent), 0) != NULL) {
            <a class="code" href="index_8c.html#ac131057c151521f1cff71bf1510ef050">remove_file_from_index</a> (istate, parent);
            <span class="keywordflow">break</span>;
        }
    }

    g_free (parent);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a478519e092fd07dacd10c804cfec4282"></a><!-- doxytag: member="index.h::remove_file_from_index" ref="a478519e092fd07dacd10c804cfec4282" args="(struct index_state *, const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a478519e092fd07dacd10c804cfec4282">remove_file_from_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00763">763</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> pos = <a class="code" href="index_8c.html#a1f5ad45bcfb5a2dcc3fae542fa293d4a">index_name_pos</a>(istate, path, strlen(path));
    <span class="keywordflow">if</span> (pos &lt; 0)
        pos = -pos-1;
    <span class="comment">/* cache_tree_invalidate_path(istate-&gt;cache_tree, path); */</span>
    <span class="keywordflow">while</span> (pos &lt; istate-&gt;cache_nr &amp;&amp; !strcmp(istate-&gt;cache[pos]-&gt;name, path))
        <a class="code" href="index_8c.html#aae99b184a9d6c213a39042b5452081f9">remove_index_entry_at</a>(istate, pos);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a86bf1084dfc4e0057a52b4da1922de9b"></a><!-- doxytag: member="index.h::remove_from_index_with_prefix" ref="a86bf1084dfc4e0057a52b4da1922de9b" args="(struct index_state *istate, const char *path_prefix, gboolean *not_found)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a86bf1084dfc4e0057a52b4da1922de9b">remove_from_index_with_prefix</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gboolean *&#160;</td>
          <td class="paramname"><em>not_found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01180">1180</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> pathlen = strlen(path_prefix);
    <span class="keywordtype">int</span> pos = <a class="code" href="index_8c.html#a1f5ad45bcfb5a2dcc3fae542fa293d4a">index_name_pos</a> (istate, path_prefix, pathlen);
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce;

    <span class="keywordflow">if</span> (not_found)
        *not_found = FALSE;

    <span class="comment">/* Exact match, remove that entry. */</span>
    <span class="keywordflow">if</span> (pos &gt;= 0) {
        <a class="code" href="index_8c.html#aae99b184a9d6c213a39042b5452081f9">remove_index_entry_at</a> (istate, pos);
        <span class="keywordflow">return</span> 0;
    }

    <span class="comment">/* Otherwise it may be a prefix match, remove all entries begin with this prefix.</span>
<span class="comment">     */</span>

    <span class="comment">/* -pos = (the position this entry *should* be) + 1.</span>
<span class="comment">     * So -pos-1 is the first entry larger than this entry.</span>
<span class="comment">     */</span>
    pos = -pos-1;

    <span class="comment">/* Add &#39;/&#39; to the end of prefix so that we won&#39;t match a partial path component.</span>
<span class="comment">     * e.g. we don&#39;t want to match &#39;abc&#39; with &#39;abcd/ef&#39;</span>
<span class="comment">     */</span>
    <span class="keywordtype">char</span> *full_path_prefix = g_strconcat (path_prefix, <span class="stringliteral">&quot;/&quot;</span>, NULL);
    ++pathlen;

    <span class="keywordflow">while</span> (pos &lt; istate-&gt;cache_nr) {
        ce = istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>[pos];
        <span class="keywordflow">if</span> (strncmp (ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, full_path_prefix, pathlen) &lt; 0) {
            ++pos;
        } <span class="keywordflow">else</span>
            <span class="keywordflow">break</span>;
    }

    <span class="keywordflow">if</span> (pos == istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a>) {
        g_free (full_path_prefix);
        <span class="keywordflow">if</span> (not_found)
            *not_found = TRUE;
        <span class="keywordflow">return</span> 0;
    }

    <span class="keywordtype">int</span> i = pos;
    <span class="keywordflow">while</span> (i &lt; istate-&gt;cache_nr) {
        ce = istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>[i];
        <span class="keywordflow">if</span> (strncmp (ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, full_path_prefix, pathlen) == 0) {
            <a class="code" href="index_8c.html#a62df0f7f37866aabf0b0faf196fc0ddf">remove_name_hash</a>(istate, ce);
            <a class="code" href="index_8c.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> (ce);
            ++i;
        } <span class="keywordflow">else</span>
            <span class="keywordflow">break</span>;
    }
    g_free (full_path_prefix);

    <span class="comment">/* No match. */</span>
    <span class="keywordflow">if</span> (i == pos) {
        <span class="keywordflow">if</span> (not_found)
            *not_found = TRUE;
        <span class="keywordflow">return</span> 0;
    }

    <span class="keywordflow">if</span> (i &lt; istate-&gt;cache_nr)
        memmove (istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + pos,
                 istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + i,
                 (istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> - i) * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__entry.html">cache_entry</a> *));
    istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> -= (i - pos);
    istate-&gt;<a class="code" href="structindex__state.html#a8e22a9fe2486576488e72fe97801ebe5">cache_changed</a> = 1;

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e4ddc1ec8c4039bc06b09cff58995d3"></a><!-- doxytag: member="index.h::remove_index_entry_at" ref="a0e4ddc1ec8c4039bc06b09cff58995d3" args="(struct index_state *, int pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a0e4ddc1ec8c4039bc06b09cff58995d3">remove_index_entry_at</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00724">724</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce = istate-&gt;cache[pos];

    <span class="comment">/* record_resolve_undo(istate, ce); */</span>
    <a class="code" href="index_8c.html#a62df0f7f37866aabf0b0faf196fc0ddf">remove_name_hash</a>(istate, ce);
    <a class="code" href="index_8c.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> (ce);
    istate-&gt;cache_changed = 1;
    istate-&gt;cache_nr--;
    <span class="keywordflow">if</span> (pos &gt;= istate-&gt;cache_nr)
        <span class="keywordflow">return</span> 0;
    memmove(istate-&gt;cache + pos,
            istate-&gt;cache + pos + 1,
            (istate-&gt;cache_nr - pos) * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__entry.html">cache_entry</a> *));
    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a12825d79310dd67cd238e49161be5bfd"></a><!-- doxytag: member="index.h::remove_marked_cache_entries" ref="a12825d79310dd67cd238e49161be5bfd" args="(struct index_state *istate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a12825d79310dd67cd238e49161be5bfd">remove_marked_cache_entries</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00746">746</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> **ce_array = istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j;

    <span class="keywordflow">for</span> (i = j = 0; i &lt; istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a>; i++) {
        <span class="keywordflow">if</span> (ce_array[i]-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> &amp; <a class="code" href="index_8h.html#aa5ee599d9d7af67f19dba204ce9030c0">CE_REMOVE</a>) {
            <a class="code" href="index_8c.html#a62df0f7f37866aabf0b0faf196fc0ddf">remove_name_hash</a>(istate, ce_array[i]);
            <a class="code" href="index_8c.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> (ce_array[i]);
        } <span class="keywordflow">else</span> {
            ce_array[j++] = ce_array[i];
        }
    }
    istate-&gt;<a class="code" href="structindex__state.html#a8e22a9fe2486576488e72fe97801ebe5">cache_changed</a> = 1;
    istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> = j;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a62df0f7f37866aabf0b0faf196fc0ddf"></a><!-- doxytag: member="index.h::remove_name_hash" ref="a62df0f7f37866aabf0b0faf196fc0ddf" args="(struct index_state *istate, struct cache_entry *ce)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a62df0f7f37866aabf0b0faf196fc0ddf">remove_name_hash</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcache__entry.html">cache_entry</a> *&#160;</td>
          <td class="paramname"><em>ce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01978">1978</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    g_hash_table_remove (istate-&gt;<a class="code" href="structindex__state.html#ab30d2dde7a88b0d003ac7fc31952a376">name_hash</a>, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);

<span class="preprocessor">#if defined WIN32 || defined __APPLE__</span>
<span class="preprocessor"></span>    <span class="keywordtype">char</span> *i_name = g_utf8_strdown (ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, -1);
    g_hash_table_remove (istate-&gt;i_name_hash, i_name);
    g_free (i_name);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a56d1945a0677d925b25c610d613aeefc"></a><!-- doxytag: member="index.h::rename_index_entries" ref="a56d1945a0677d925b25c610d613aeefc" args="(struct index_state *istate, const char *src_path, const char *dst_path, gboolean *not_found)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a56d1945a0677d925b25c610d613aeefc">rename_index_entries</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>istate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dst_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gboolean *&#160;</td>
          <td class="paramname"><em>not_found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01366">1366</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> **new_ces;
    <span class="keywordtype">int</span> n_entries;
    <span class="keywordtype">int</span> ret = 0;
    <span class="keywordtype">int</span> i;

    <span class="keywordflow">if</span> (not_found)
        *not_found = FALSE;

    new_ces = create_renamed_cache_entries (istate, src_path, dst_path, &amp;n_entries);
    <span class="keywordflow">if</span> (n_entries == 0) {
        <span class="keywordflow">if</span> (not_found)
            *not_found = TRUE;
        <span class="keywordflow">return</span> 0;
    }

    <span class="comment">/* Remove entries under dst_path. It&#39;s necessary for the situation that</span>
<span class="comment">     * one file is renamed to overwrite another file.</span>
<span class="comment">     */</span>
    <a class="code" href="index_8c.html#a86bf1084dfc4e0057a52b4da1922de9b">remove_from_index_with_prefix</a> (istate, dst_path, NULL);

    <a class="code" href="index_8c.html#a21d6b0245750631144db52218a179633">remove_empty_parent_dir_entry</a> (istate, dst_path);

    <span class="comment">/* Insert the renamed entries to their position. */</span>
    <span class="keywordtype">int</span> dst_pathlen = strlen(dst_path);
    <span class="keywordtype">int</span> pos = <a class="code" href="index_8c.html#a1f5ad45bcfb5a2dcc3fae542fa293d4a">index_name_pos</a> (istate, dst_path, dst_pathlen);
    <span class="keywordflow">if</span> (pos &gt;= 0) {
        g_warning (<span class="stringliteral">&quot;BUG: %s should not exist in index after remove.\n&quot;</span>, dst_path);
        ret = -1;
        <span class="keywordflow">goto</span> out;
    }

    pos = -pos-1;

    <span class="comment">/* There should be at least n_entries free room in istate-&gt;cache array,</span>
<span class="comment">     * since we just removed n_entries from the index in</span>
<span class="comment">     * create_renamed_cache_entires(). </span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (istate-&gt;<a class="code" href="structindex__state.html#aa092fb08928f22bc28e892ba163d3103">cache_alloc</a> - istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> &lt; n_entries) {
        g_warning (<span class="stringliteral">&quot;BUG: not enough room to insert renamed entries.\n&quot;</span>
                   <span class="stringliteral">&quot;cache_alloc: %u, cache_nr: %u, n_entries: %d.\n&quot;</span>,
                   istate-&gt;<a class="code" href="structindex__state.html#aa092fb08928f22bc28e892ba163d3103">cache_alloc</a>, istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a>, n_entries);
        ret = -1;
        <span class="keywordflow">goto</span> out;
    }

    <span class="keywordflow">if</span> (pos &lt; istate-&gt;cache_nr)
        memmove (istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + pos + n_entries,
                 istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + pos,
                 (istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> - pos) * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__entry.html">cache_entry</a> *));

    memcpy (istate-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a> + pos, new_ces, n_entries * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structcache__entry.html">cache_entry</a> *));
    <span class="keywordflow">for</span> (i = 0; i &lt; n_entries; ++i)
        <a class="code" href="index_8c.html#a6807b08fb7e98733bcdc6b4207993524">add_name_hash</a> (istate, new_ces[i]);
    istate-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a> += n_entries;
    istate-&gt;<a class="code" href="structindex__state.html#a8e22a9fe2486576488e72fe97801ebe5">cache_changed</a> = 1;

out:
    <span class="keywordflow">if</span> (ret &lt; 0) {
        <span class="keywordflow">for</span> (i = 0; i &lt; n_entries; ++i)
            <a class="code" href="index_8c.html#a156a4ea461fcf14e0b73755b02e7e7d1">cache_entry_free</a> (new_ces[i]);
    }
    free (new_ces);

    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a13d0146720f641b66d3561c7270e8771"></a><!-- doxytag: member="index.h::rename_index_entry_at" ref="a13d0146720f641b66d3561c7270e8771" args="(struct index_state *, int pos, const char *new_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="index_8h.html#a13d0146720f641b66d3561c7270e8771">rename_index_entry_at</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adb97ed95dd5c3c043e0f1cdf05d0f667"></a><!-- doxytag: member="index.h::unmerged_index" ref="adb97ed95dd5c3c043e0f1cdf05d0f667" args="(const struct index_state *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#adb97ed95dd5c3c043e0f1cdf05d0f667">unmerged_index</a> </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00408">408</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    <span class="keywordflow">for</span> (i = 0; i &lt; istate-&gt;cache_nr; i++) {
        <span class="keywordflow">if</span> (<a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(istate-&gt;cache[i]))
            <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a255f3c14715b9792f50ca3b2b600e91c"></a><!-- doxytag: member="index.h::verify_path" ref="a255f3c14715b9792f50ca3b2b600e91c" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#a255f3c14715b9792f50ca3b2b600e91c">verify_path</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l00844">844</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> c;

    <span class="keywordflow">goto</span> inside;
    <span class="keywordflow">for</span> (;;) {
        <span class="keywordflow">if</span> (!c)
            <span class="keywordflow">return</span> 1;
        <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;/&#39;</span>) {
        inside:
            c = *path++;
            <span class="keywordflow">switch</span> (c) {
            <span class="keywordflow">default</span>:
                <span class="keywordflow">continue</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:
                <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:
                <span class="keywordflow">if</span> (verify_dotfile(path))
                    <span class="keywordflow">continue</span>;
            }
            <span class="keywordflow">return</span> 0;
        }
        c = *path++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec9458995edf7bf9c6389908ab3366f5"></a><!-- doxytag: member="index.h::write_index" ref="aec9458995edf7bf9c6389908ab3366f5" args="(struct index_state *, int newfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="index_8h.html#aec9458995edf7bf9c6389908ab3366f5">write_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newfd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8c_source.html#l01881">1881</a> of file <a class="el" href="index_8c_source.html">index.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="structWriteIndexInfo.html">WriteIndexInfo</a> info;
    <span class="keyword">struct </span><a class="code" href="structcache__header.html">cache_header</a> hdr;
    <span class="keywordtype">int</span> i, removed, extended;
    <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> **cache = istate-&gt;cache;
    <span class="keywordtype">int</span> entries = istate-&gt;cache_nr;
    <a class="code" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> st;

    memset (&amp;info, 0, <span class="keyword">sizeof</span>(info));

    <span class="keywordflow">for</span> (i = removed = extended = 0; i &lt; entries; i++) {
        <span class="keywordflow">if</span> (cache[i]-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> &amp; <a class="code" href="index_8h.html#aa5ee599d9d7af67f19dba204ce9030c0">CE_REMOVE</a>)
            removed++;

        <span class="comment">/* reduce extended entries if possible */</span>
        <span class="comment">/* cache[i]-&gt;ce_flags &amp;= ~CE_EXTENDED; */</span>
        <span class="comment">/* if (cache[i]-&gt;ce_flags &amp; CE_EXTENDED_FLAGS) { */</span>
        <span class="comment">/*     extended++; */</span>
        <span class="comment">/*     cache[i]-&gt;ce_flags |= CE_EXTENDED; */</span>
        <span class="comment">/* } */</span>
    }

    hdr.hdr_signature = htonl(<a class="code" href="index_8h.html#a1df97b2e673364fd2f0d469e21b1c4e4">CACHE_SIGNATURE</a>);
    <span class="comment">/* Always use version 4 for newly created index files */</span>
    hdr.hdr_version = htonl(4);
    hdr.hdr_entries = htonl(entries - removed);

    SHA1_Init(&amp;info.<a class="code" href="structWriteIndexInfo.html#ae9b01f6b1a14788da78b63ce09354a6b">context</a>);
    <span class="keywordflow">if</span> (ce_write(&amp;info, newfd, &amp;hdr, <span class="keyword">sizeof</span>(hdr)) &lt; 0)
        <span class="keywordflow">return</span> -1;

    <span class="keywordflow">for</span> (i = 0; i &lt; entries; i++) {
        <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce = cache[i];
        <span class="keywordflow">if</span> (ce-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> &amp; <a class="code" href="index_8h.html#aa5ee599d9d7af67f19dba204ce9030c0">CE_REMOVE</a>)
            <span class="keywordflow">continue</span>;
        <span class="comment">/* if (!ce_uptodate(ce) &amp;&amp; is_racy_timestamp(istate, ce)) */</span>
        <span class="comment">/*     ce_smudge_racily_clean_entry(ce); */</span>
        <span class="keywordflow">if</span> (ce_write_entry2(&amp;info, newfd, ce) &lt; 0)
            <span class="keywordflow">return</span> -1;
    }

    <span class="comment">/* Write extension data here */</span>
    <span class="keywordflow">if</span> (istate-&gt;has_modifier) {
        GString *buf = g_string_new (<span class="stringliteral">&quot;&quot;</span>);
        <span class="keywordtype">int</span> err;

        <span class="keywordflow">if</span> (modifiers_to_string (buf, istate) &lt; 0) {
            g_string_free (buf, TRUE);
            <span class="keywordflow">return</span> -1;
        }

        err = write_index_ext_header(&amp;info, newfd, <a class="code" href="index_8h.html#aac01f026b0dad25cdade5134d4870190">CACHE_EXT_MODIFIER</a>, buf-&gt;len) &lt; 0
            || ce_write(&amp;info, newfd, buf-&gt;str, buf-&gt;len) &lt; 0;
        g_string_free (buf, TRUE);
        <span class="keywordflow">if</span> (err)
            <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">if</span> (ce_flush(&amp;info, newfd) || <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a09f0677ad28b98b7a85bcda57f71e7c8">seaf_fstat</a>(newfd, &amp;st))
        <span class="keywordflow">return</span> -1;
    istate-&gt;timestamp.sec = (<span class="keywordtype">unsigned</span> int)st.st_mtime;
    istate-&gt;timestamp.nsec = 0;
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a6dea30e127b517c889b26275d1d91b4f"></a><!-- doxytag: member="index.h::__attribute__" ref="a6dea30e127b517c889b26275d1d91b4f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcache__entry.html">cache_entry</a>  <a class="el" href="struct____attribute____.html">__attribute__</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a774773e5c25d1b44dac32468246cc980"></a><!-- doxytag: member="index.h::ctime" ref="a774773e5c25d1b44dac32468246cc980" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcache__time.html">cache_time</a> <a class="el" href="index_8h.html#a774773e5c25d1b44dac32468246cc980">ctime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00133">133</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a81b8f11ea30b5b983ddee745abe7c899"></a><!-- doxytag: member="index.h::dev" ref="a81b8f11ea30b5b983ddee745abe7c899" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#a81b8f11ea30b5b983ddee745abe7c899">dev</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00135">135</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a05ae5c9eb0d8296ef927e0b5a466e3d9"></a><!-- doxytag: member="index.h::ext_name" ref="a05ae5c9eb0d8296ef927e0b5a466e3d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#a05ae5c9eb0d8296ef927e0b5a466e3d9">ext_name</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00179">179</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a354d23f31e90a8c379e18909f031edf3"></a><!-- doxytag: member="index.h::ext_size" ref="a354d23f31e90a8c379e18909f031edf3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#a354d23f31e90a8c379e18909f031edf3">ext_size</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00180">180</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1cbb17ede73ea044a04a129bf4d86976"></a><!-- doxytag: member="index.h::flags" ref="a1cbb17ede73ea044a04a129bf4d86976" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short <a class="el" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00142">142</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6ca8a533250260e3d223c57328e61203"></a><!-- doxytag: member="index.h::flags2" ref="a6ca8a533250260e3d223c57328e61203" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short <a class="el" href="index_8h.html#a6ca8a533250260e3d223c57328e61203">flags2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00182">182</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae945e2877b4b8aef4ea41f53fb516f37"></a><!-- doxytag: member="index.h::gid" ref="ae945e2877b4b8aef4ea41f53fb516f37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#ae945e2877b4b8aef4ea41f53fb516f37">gid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00139">139</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5d1468ac5e50f60df1da127284f23497"></a><!-- doxytag: member="index.h::ino" ref="a5d1468ac5e50f60df1da127284f23497" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#a5d1468ac5e50f60df1da127284f23497">ino</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00136">136</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac1b4d694fc07a39e06900e82872aac7f"></a><!-- doxytag: member="index.h::mode" ref="ac1b4d694fc07a39e06900e82872aac7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00137">137</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="adb9fb1ca66f1a67516c2ee1492e6ab2b"></a><!-- doxytag: member="index.h::mtime" ref="adb9fb1ca66f1a67516c2ee1492e6ab2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcache__time.html">cache_time</a> <a class="el" href="index_8h.html#adb9fb1ca66f1a67516c2ee1492e6ab2b">mtime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00134">134</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2a7f851274ec18e17d38114c39b8511a"></a><!-- doxytag: member="index.h::name" ref="a2a7f851274ec18e17d38114c39b8511a" args="[0]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00143">143</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa8899f660155df7922b5527eac3b8d0f"></a><!-- doxytag: member="index.h::null_sha1" ref="aa8899f660155df7922b5527eac3b8d0f" args="[20]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char <a class="el" href="index_8h.html#aa8899f660155df7922b5527eac3b8d0f">null_sha1</a>[20]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a96e76167c968d38441e90ee0488ee4aa"></a><!-- doxytag: member="index.h::sha1" ref="a96e76167c968d38441e90ee0488ee4aa" args="[20]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00141">141</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="af931a8871310b4dad23f0f0b0f623560"></a><!-- doxytag: member="index.h::size" ref="af931a8871310b4dad23f0f0b0f623560" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00140">140</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
<a class="anchor" id="a279b4625934d92ac44db8489a4c8c913"></a><!-- doxytag: member="index.h::the_index" ref="a279b4625934d92ac44db8489a4c8c913" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structindex__state.html">index_state</a> <a class="el" href="index_8h.html#a279b4625934d92ac44db8489a4c8c913">the_index</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0ef93dab71a01da4660664f3ce20134e"></a><!-- doxytag: member="index.h::uid" ref="a0ef93dab71a01da4660664f3ce20134e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="index_8h.html#a0ef93dab71a01da4660664f3ce20134e">uid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="index_8h_source.html#l00138">138</a> of file <a class="el" href="index_8h_source.html">index.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 19 2015 03:19:55 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
