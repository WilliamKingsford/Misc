<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: seafile-4.1.2/common/rpc-service.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">seafile-4.1.2/common/rpc-service.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="seafile-4_81_82_2common_2common_8h_source.html">common.h</a>&quot;</code><br/>
<code>#include &lt;glib/gstdio.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;dirent.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="ccnet_8h_source.html">ccnet.h</a>&gt;</code><br/>
<code>#include &quot;utils.h&quot;</code><br/>
<code>#include &quot;seafile-session.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="fs-mgr_8h_source.html">fs-mgr.h</a>&quot;</code><br/>
<code>#include &quot;repo-mgr.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="seafile-error_8h_source.html">seafile-error.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="seafile-rpc_8h_source.html">seafile-rpc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="seafile-config_8h_source.html">seafile-config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="seafile-4_81_82_2common_2log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="vc-utils_8h_source.html">../daemon/vc-utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sync-mgr_8h_source.html">sync-mgr.h</a>&quot;</code><br/>
</div>
<p><a href="seafile-4_81_82_2common_2rpc-service_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCollectParam.html">CollectParam</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a4c0f3dd2e2ab549eed77b45e707fca59">seafile_get_session_info</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a999cad277bbc4f285af4afa643303e9d">seafile_set_config</a> (const char *key, const char *value, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a9436ac009f3a58bc030d20890dcdbd4c">seafile_get_config</a> (const char *key, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a62382a853a7c3118e1df715101e0087f">seafile_set_config_int</a> (const char *key, int value, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a479a6e9d4a9d3dfb8019f5ebe4ce41b9">seafile_get_config_int</a> (const char *key, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a955215d999733bc853ecfe0e69b3a4ec">seafile_set_upload_rate_limit</a> (int limit, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a8da5763dd3aae5a13dd2993cffd0fccf">seafile_set_download_rate_limit</a> (int limit, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a3e4e9d217daa4c70314c43c6065a57ea">seafile_repo_last_modify</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a181845c9dedf4d43becd8d9422b4d89e">seafile_get_checkout_task</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#af344b899d6187329bbc1e4a4f8132bd5">seafile_gen_default_worktree</a> (const char *worktree_parent, const char *repo_name, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a80c8591afe413de060923bf01abf2bf1">seafile_check_path_for_clone</a> (const char *path, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#ac42b015e902d912a520fd66f6efa1362">seafile_clone</a> (const char *repo_id, int repo_version, const char *relay_id, const char *repo_name, const char *worktree, const char *token, const char *passwd, const char *magic, const char *peer_addr, const char *peer_port, const char *email, const char *random_key, int enc_version, const char *more_info, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a797b7ef3bc14b4b7569b7b7d7927d53b">seafile_download</a> (const char *repo_id, int repo_version, const char *relay_id, const char *repo_name, const char *wt_parent, const char *token, const char *passwd, const char *magic, const char *peer_addr, const char *peer_port, const char *email, const char *random_key, int enc_version, const char *more_info, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a45a875dc129e03d7582cdd2645ecf548">seafile_cancel_clone_task</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a6b6845a0e962e66993f08211e2a4cebb">seafile_remove_clone_task</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#aa8c74c54ead60c71cdd371d9ebc3fd6c">seafile_get_clone_tasks</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a69a68f15746004a2a844c35c7d305b22">seafile_sync</a> (const char *repo_id, const char *peer_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a595bb81eb0939c6c6c9cc6acccc9e089">seafile_find_transfer_task</a> (const char *repo_id, GError *error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#ae279eb1fd9fb8134701e6b6d57ff727f">seafile_get_upload_rate</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a70fe5819196da504cb23a463cbd76dd9">seafile_get_download_rate</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a65581b730e47f4ea1ea4b68469315625">seafile_get_repo_sync_info</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#aa5af40788ef2c7bcccc071abf16acefe">seafile_get_repo_sync_task</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#ad35ac8e1fd2296f59bea90314cb12ca6">seafile_get_sync_task_list</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a3880f357c6b6e7e350ce5a781e9668c1">seafile_set_repo_property</a> (const char *repo_id, const char *key, const char *value, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gchar *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#adf72ee1ff10ccd5adbb97369392835ef">seafile_get_repo_property</a> (const char *repo_id, const char *key, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a27081d344847783e9a8db586d026bb88">seafile_get_repo_relay_address</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#aabdf1dc6b5d444c65f25128fd6db48b7">seafile_get_repo_relay_port</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a71e6ea38c1cc19c4989505a4bed67955">seafile_update_repo_relay_info</a> (const char *repo_id, const char *new_addr, const char *new_port, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a2d3ae7fdb45f784fe4eb4abc2f4055c2">seafile_update_repos_server_host</a> (const char *old_host, const char *new_host, const char *new_server_url, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a3ce8469d9e4cf781199dd75d73a1dc3b">seafile_calc_dir_size</a> (const char *path, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a1fb2b12d5c13d8fe03e0a5a1570eb4a0">seafile_disable_auto_sync</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#acac699540581cde07cb85bfc4554270f">seafile_enable_auto_sync</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#af279abe1fb46e12e3613f9649cf73f77">seafile_is_auto_sync_enabled</a> (GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#acd2313411e6837feaa74fa6185524c7c">seafile_branch_gets</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#aba4837db052d18cd952ad53e10ebd379">seafile_get_repo_list</a> (int start, int limit, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a37949d30db3977c8fbb573881173987b">seafile_get_repo</a> (const char *repo_id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SeafileCommit *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#ae284b482780d940fb7b6a12fdd668ab3">convert_to_seafile_commit</a> (<a class="el" href="commit-mgr_8h.html#ab20cfcee12e164d94824e8be23c2c8ea">SeafCommit</a> *c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#af0444c8f4e9da68a1f837c64059e7680">seafile_get_commit</a> (const char *repo_id, int <a class="el" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, const gchar *id, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a5594de7f321b08c515c465bc44e25c60">seafile_get_commit_list</a> (const char *repo_id, int offset, int limit, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#adb655a9a19eca34297b5c71d125cde24">seafile_unsync_repos_by_account</a> (const char *server_addr, const char *email, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a21c3244c53c1bd6caa5f0cfb23617bc6">seafile_remove_repo_tokens_by_account</a> (const char *server_addr, const char *email, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#abc5f8a72ec2fe4760591520d16828306">seafile_set_repo_token</a> (const char *repo_id, const char *token, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#a3743ba1324330f8ef0cb9a5c33a52e92">seafile_destroy_repo</a> (const char *repo_id, GError **error)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae284b482780d940fb7b6a12fdd668ab3"></a><!-- doxytag: member="rpc&#45;service.c::convert_to_seafile_commit" ref="ae284b482780d940fb7b6a12fdd668ab3" args="(SeafCommit *c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SeafileCommit* <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c.html#ae284b482780d940fb7b6a12fdd668ab3">convert_to_seafile_commit</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="commit-mgr_8h.html#ab20cfcee12e164d94824e8be23c2c8ea">SeafCommit</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01027">1027</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    SeafileCommit *commit = seafile_commit_new ();
    g_object_set (commit,
                  <span class="stringliteral">&quot;id&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#a104ba59f297c87bbc769576d2c3d6563">commit_id</a>,
                  <span class="stringliteral">&quot;creator_name&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#ab19d020b7c936d11821fe0b836aa548e">creator_name</a>,
                  <span class="stringliteral">&quot;creator&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#ab7f3403dd4d499c4a797ec12dfc2342e">creator_id</a>,
                  <span class="stringliteral">&quot;desc&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#a92b6981822e3ca00f30b797ceaa65243">desc</a>,
                  <span class="stringliteral">&quot;ctime&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#ae3f1657ab475921889a1e9c74b94e7a2">ctime</a>,
                  <span class="stringliteral">&quot;repo_id&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#af9c51057516029191941d47985df7f5f">repo_id</a>,
                  <span class="stringliteral">&quot;root_id&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#a2268a50b170dc23bfa0f5108a2b764e5">root_id</a>,
                  <span class="stringliteral">&quot;parent_id&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#a24518f58c804153742e9976049da8512">parent_id</a>,
                  <span class="stringliteral">&quot;second_parent_id&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#aad2ebe1498cc25f837554456cbcd31f5">second_parent_id</a>,
                  <span class="stringliteral">&quot;version&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#abc83f168ce2b43fa864522bf0ea26d6d">version</a>,
                  <span class="stringliteral">&quot;new_merge&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#a78d20b7c73d8d7645fc5d6410cb1a4be">new_merge</a>,
                  <span class="stringliteral">&quot;conflict&quot;</span>, c-&gt;<a class="code" href="struct__SeafCommit.html#a5e522b729c973107a36257cc1d60badb">conflict</a>,
                  NULL);
    <span class="keywordflow">return</span> commit;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd2313411e6837feaa74fa6185524c7c"></a><!-- doxytag: member="rpc&#45;service.c::seafile_branch_gets" ref="acd2313411e6837feaa74fa6185524c7c" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="seafile-rpc_8h.html#acd2313411e6837feaa74fa6185524c7c">seafile_branch_gets</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00826">826</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a48ecdc72b727191abafbbf2ec1f70ace">is_uuid_valid</a> (repo_id)) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid repo id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    GList *blist = <a class="code" href="branch-mgr_8c.html#ad5bd62cbe17cb8fe91bcd993956a1fbf">seaf_branch_manager_get_branch_list</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#acd445f79648f74358e145f48f771e11c">branch_mgr</a>,
                                                       repo_id);
    GList *ptr;
    GList *ret = NULL;

    <span class="keywordflow">for</span> (ptr = blist; ptr; ptr=ptr-&gt;next) {
        <a class="code" href="struct__SeafBranch.html">SeafBranch</a> *b = ptr-&gt;data;
        SeafileBranch *branch = seafile_branch_new ();
        g_object_set (branch, <span class="stringliteral">&quot;repo_id&quot;</span>, b-&gt;<a class="code" href="struct__SeafBranch.html#a88717f46308eb12629b99f9ff91740c2">repo_id</a>, <span class="stringliteral">&quot;name&quot;</span>, b-&gt;<a class="code" href="struct__SeafBranch.html#ae6af0006b9b80ded4f0525a3be06ccda">name</a>,
                      <span class="stringliteral">&quot;commit_id&quot;</span>, b-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>, NULL);
        ret = g_list_prepend (ret, branch);
        <a class="code" href="branch-mgr_8c.html#a2e44cba993ba080e7550a832f019f653">seaf_branch_unref</a> (b);
    }
    ret = g_list_reverse (ret);
    g_list_free (blist);
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3ce8469d9e4cf781199dd75d73a1dc3b"></a><!-- doxytag: member="rpc&#45;service.c::seafile_calc_dir_size" ref="a3ce8469d9e4cf781199dd75d73a1dc3b" args="(const char *path, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc-wrapper_8c.html#a478b4527ee1147ffd6042259e9530149">seafile_calc_dir_size</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00783">783</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!path) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    gint64 size_64 = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a1efc86d468a02c24e0709818044d296d">ccnet_calc_directory_size</a>(path, error);
    <span class="keywordflow">if</span> (size_64 &lt; 0) {
        seaf_warning (<span class="stringliteral">&quot;failed to calculate dir size for %s\n&quot;</span>, path);
        <span class="keywordflow">return</span> -1;
    }

    <span class="comment">/* get the size in MB */</span>
    <span class="keywordtype">int</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a> = (int) (size_64 &gt;&gt; 20);
    <span class="keywordflow">return</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45a875dc129e03d7582cdd2645ecf548"></a><!-- doxytag: member="rpc&#45;service.c::seafile_cancel_clone_task" ref="a45a875dc129e03d7582cdd2645ecf548" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a45a875dc129e03d7582cdd2645ecf548">seafile_cancel_clone_task</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00373">373</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="clone-mgr_8c.html#a2849d011d1f918b3108c30495c98254b">seaf_clone_manager_cancel_task</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>, repo_id);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a80c8591afe413de060923bf01abf2bf1"></a><!-- doxytag: member="rpc&#45;service.c::seafile_check_path_for_clone" ref="a80c8591afe413de060923bf01abf2bf1" args="(const char *path, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a80c8591afe413de060923bf01abf2bf1">seafile_check_path_for_clone</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00261">261</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="clone-mgr_8c.html#a45fe95b1bbe19ee533a8f9e57884658e">seaf_clone_manager_check_worktree_path</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>, path, error)) {
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac42b015e902d912a520fd66f6efa1362"></a><!-- doxytag: member="rpc&#45;service.c::seafile_clone" ref="ac42b015e902d912a520fd66f6efa1362" args="(const char *repo_id, int repo_version, const char *relay_id, const char *repo_name, const char *worktree, const char *token, const char *passwd, const char *magic, const char *peer_addr, const char *peer_port, const char *email, const char *random_key, int enc_version, const char *more_info, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="seafile-rpc_8h.html#aca75772f76f8eafb2b08a023cd476f65">seafile_clone</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>repo_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>peer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>worktree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>passwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>peer_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>peer_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>email</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>random_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enc_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>more_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_clone:</p>
<p>Fetch a new repo and then check it out. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00271">271</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!repo_id || strlen(repo_id) != 36) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid repo id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!relay_id || strlen(relay_id) != 40) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid peer id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!worktree) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>,
                     <span class="stringliteral">&quot;Worktre must be specified&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!token || !peer_addr || !peer_port || !email ) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>,
                     <span class="stringliteral">&quot;Argument can&#39;t be NULL&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">return</span> <a class="code" href="clone-mgr_8c.html#a06b26730e317a268b3127067ee545307">seaf_clone_manager_add_task</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>,
                                        repo_id, repo_version,
                                        relay_id,
                                        repo_name, token,
                                        passwd, magic,
                                        enc_version, random_key,
                                        worktree,
                                        peer_addr, peer_port,
                                        email, more_info,
                                        error);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3743ba1324330f8ef0cb9a5c33a52e92"></a><!-- doxytag: member="rpc&#45;service.c::seafile_destroy_repo" ref="a3743ba1324330f8ef0cb9a5c33a52e92" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc-wrapper_8c.html#af19506d4d8cad262d75117d6219da4d1">seafile_destroy_repo</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01356">1356</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }
    <span class="keywordflow">if</span> (!<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a48ecdc72b727191abafbbf2ec1f70ace">is_uuid_valid</a> (repo_id)) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid repo id&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

<span class="preprocessor">#ifndef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;

    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;No such repository&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> do_unsync_repo(repo);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>
    <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#afdce2de6ee36dcf6b6264ac35fb17f7a">seaf_repo_manager_del_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);

    <span class="keywordflow">return</span> 0;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fb2b12d5c13d8fe03e0a5a1570eb4a0"></a><!-- doxytag: member="rpc&#45;service.c::seafile_disable_auto_sync" ref="a1fb2b12d5c13d8fe03e0a5a1570eb4a0" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a1fb2b12d5c13d8fe03e0a5a1570eb4a0">seafile_disable_auto_sync</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00802">802</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="sync-mgr_8c.html#abe16c7da3482de138f5c6f48757ae022">seaf_sync_manager_disable_auto_sync</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a797b7ef3bc14b4b7569b7b7d7927d53b"></a><!-- doxytag: member="rpc&#45;service.c::seafile_download" ref="a797b7ef3bc14b4b7569b7b7d7927d53b" args="(const char *repo_id, int repo_version, const char *relay_id, const char *repo_name, const char *wt_parent, const char *token, const char *passwd, const char *magic, const char *peer_addr, const char *peer_port, const char *email, const char *random_key, int enc_version, const char *more_info, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="seafile-rpc_8h.html#a704ca859f1a1f7044c27b27982658672">seafile_download</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>repo_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>relay_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>wt_parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>passwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>peer_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>peer_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>email</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>random_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enc_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>more_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00322">322</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!repo_id || strlen(repo_id) != 36) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid repo id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!relay_id || strlen(relay_id) != 40) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid peer id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!wt_parent) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>,
                     <span class="stringliteral">&quot;Worktre must be specified&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!token || !peer_addr || !peer_port || !email ) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>,
                     <span class="stringliteral">&quot;Argument can&#39;t be NULL&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">return</span> <a class="code" href="clone-mgr_8c.html#ab6b5a2b4f13b382b9c7034131fa92783">seaf_clone_manager_add_download_task</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>,
                                                 repo_id, repo_version,
                                                 relay_id,
                                                 repo_name, token,
                                                 passwd, magic,
                                                 enc_version, random_key,
                                                 wt_parent,
                                                 peer_addr, peer_port,
                                                 email, more_info,
                                                 error);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acac699540581cde07cb85bfc4554270f"></a><!-- doxytag: member="rpc&#45;service.c::seafile_enable_auto_sync" ref="acac699540581cde07cb85bfc4554270f" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#acac699540581cde07cb85bfc4554270f">seafile_enable_auto_sync</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00808">808</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="sync-mgr_8c.html#ae0cb02ae35e27db0ba2010575d853630">seaf_sync_manager_enable_auto_sync</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a595bb81eb0939c6c6c9cc6acccc9e089"></a><!-- doxytag: member="rpc&#45;service.c::seafile_find_transfer_task" ref="a595bb81eb0939c6c6c9cc6acccc9e089" args="(const char *repo_id, GError *error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc_8h.html#a595bb81eb0939c6c6c9cc6acccc9e089">seafile_find_transfer_task</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_gc_get_progress: Get progress of GC.</p>
<p>Returns: progress of GC in precentage. -1 if GC is not running. seafile_find_transfer:</p>
<p>Find a non finished task of a repo </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00516">516</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__TransferTask.html">TransferTask</a> *task;
    <a class="code" href="struct__HttpTxTask.html">HttpTxTask</a> *http_task;

    task = <a class="code" href="transfer-mgr_8c.html#a98142e3db29c901beff0fc71bbba601e">seaf_transfer_manager_find_transfer_by_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#aa04a8214ef989d1e5d68799dc19cbf22">transfer_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (task)
        <span class="keywordflow">return</span> (GObject *)convert_task (task);

    http_task = <a class="code" href="http-tx-mgr_8c.html#a7ff95e76d064c44f4d9e3bdbf0b6b0b6">http_tx_manager_find_task</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a3be7b98d0f1cc49d0fad03c68e63da74">http_tx_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (http_task)
        <span class="keywordflow">return</span> (GObject *)convert_http_task (http_task);

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af344b899d6187329bbc1e4a4f8132bd5"></a><!-- doxytag: member="rpc&#45;service.c::seafile_gen_default_worktree" ref="af344b899d6187329bbc1e4a4f8132bd5" args="(const char *worktree_parent, const char *repo_name, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="seafile-rpc_8h.html#af344b899d6187329bbc1e4a4f8132bd5">seafile_gen_default_worktree</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>worktree_parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00246">246</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!worktree_parent || !repo_name) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Empty args&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">return</span> <a class="code" href="clone-mgr_8c.html#aaac97c14f78e703fd118de5bea1745e6">seaf_clone_manager_gen_default_worktree</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>,
                                                    worktree_parent,
                                                    repo_name);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a181845c9dedf4d43becd8d9422b4d89e"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_checkout_task" ref="a181845c9dedf4d43becd8d9422b4d89e" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc_8h.html#a181845c9dedf4d43becd8d9422b4d89e">seafile_get_checkout_task</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00221">221</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!repo_id) {
        seaf_warning (<span class="stringliteral">&quot;Invalid args\n&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <a class="code" href="structCheckoutTask.html">CheckoutTask</a> *task;
    task = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#abe8b32b343e5e7d2d06018e398011151">seaf_repo_manager_get_checkout_task</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>,
                                               repo_id);
    <span class="keywordflow">if</span> (!task)
        <span class="keywordflow">return</span> NULL;

    SeafileCheckoutTask *c_task = g_object_new
        (SEAFILE_TYPE_CHECKOUT_TASK,
         <span class="stringliteral">&quot;repo_id&quot;</span>, task-&gt;<a class="code" href="structCheckoutTask.html#a84eafe72ec4243ad00e41f6fd8a9050b">repo_id</a>,
         <span class="stringliteral">&quot;worktree&quot;</span>, task-&gt;<a class="code" href="structCheckoutTask.html#a26041098da1295d02fe5c82b35deb75d">worktree</a>,
         <span class="stringliteral">&quot;total_files&quot;</span>, task-&gt;<a class="code" href="structCheckoutTask.html#a91c93d2e31b4ce625dcfd7e98a0b1c4f">total_files</a>,
         <span class="stringliteral">&quot;finished_files&quot;</span>, task-&gt;<a class="code" href="structCheckoutTask.html#a870604697553d88bc67e5a3b4ef0549b">finished_files</a>,
         NULL);

    <span class="keywordflow">return</span> (GObject *)c_task;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa8c74c54ead60c71cdd371d9ebc3fd6c"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_clone_tasks" ref="aa8c74c54ead60c71cdd371d9ebc3fd6c" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="seafile-rpc_8h.html#aa8c74c54ead60c71cdd371d9ebc3fd6c">seafile_get_clone_tasks</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_get_clone_tasks:</p>
<p>Get a list of clone tasks. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00385">385</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *tasks, *ptr;
    GList *ret = NULL;
    <a class="code" href="struct__CloneTask.html">CloneTask</a> *task;
    SeafileCloneTask *t;

    tasks = <a class="code" href="clone-mgr_8c.html#a6b295c7d97d0c650eb97ea7a9c7eb98f">seaf_clone_manager_get_tasks</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>);
    <span class="keywordflow">for</span> (ptr = tasks; ptr != NULL; ptr = ptr-&gt;next) {
        task = ptr-&gt;data;
        t = g_object_new (SEAFILE_TYPE_CLONE_TASK,
                          <span class="stringliteral">&quot;state&quot;</span>, <a class="code" href="clone-mgr_8c.html#a371fa00197a050e76f04061d410b0097">clone_task_state_to_str</a>(task-&gt;<a class="code" href="struct__CloneTask.html#aba8f694c35ee581602d51889dfcc6851">state</a>),
                          <span class="stringliteral">&quot;error_str&quot;</span>, <a class="code" href="clone-mgr_8c.html#ad97feb27f9f5e662efea51d3297b1376">clone_task_error_to_str</a>(task-&gt;<a class="code" href="struct__CloneTask.html#a548b9ed6700d5a29ac2b1211a8e79d9e">error</a>),
                          <span class="stringliteral">&quot;repo_id&quot;</span>, task-&gt;<a class="code" href="struct__CloneTask.html#ad7e57c9ed10d8e043c61b3382dc7c76a">repo_id</a>,
                          <span class="stringliteral">&quot;repo_name&quot;</span>, task-&gt;<a class="code" href="struct__CloneTask.html#af4f2887a7ddd497587e0bfbe0d51018f">repo_name</a>,
                          <span class="stringliteral">&quot;worktree&quot;</span>, task-&gt;<a class="code" href="struct__CloneTask.html#a1d415384ea992d92e436c07bfc72a69d">worktree</a>,
                          NULL);
        ret = g_list_prepend (ret, t);
    }

    g_list_free (tasks);
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af0444c8f4e9da68a1f837c64059e7680"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_commit" ref="af0444c8f4e9da68a1f837c64059e7680" args="(const char *repo_id, int version, const gchar *id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc_8h.html#af0444c8f4e9da68a1f837c64059e7680">seafile_get_commit</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_get_commit: : the commit id.</p>
<p>Returns: the commit object. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01048">1048</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    SeafileCommit *commit;
    <a class="code" href="struct__SeafCommit.html">SeafCommit</a> *c;

    c = <a class="code" href="commit-mgr_8c.html#adaf4b74c4dba25ddaa746f4ff9221b3f">seaf_commit_manager_get_commit</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a62979f26f91fc5e54e0a670e8d69ef67">commit_mgr</a>, repo_id, <a class="code" href="block-tx-utils_8h.html#a1abe2c64ac9f8bc05bbb1719cad360f3">version</a>, <span class="keywordtype">id</span>);
    <span class="keywordflow">if</span> (!c)
        <span class="keywordflow">return</span> NULL;

    commit = <a class="code" href="seafile-4_81_82_2common_2rpc-service_8c.html#ae284b482780d940fb7b6a12fdd668ab3">convert_to_seafile_commit</a> (c);
    <a class="code" href="commit-mgr_8c.html#a436a9092e9c5711820dc1a09234aac04">seaf_commit_unref</a> (c);
    <span class="keywordflow">return</span> (GObject *)commit;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5594de7f321b08c515c465bc44e25c60"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_commit_list" ref="a5594de7f321b08c515c465bc44e25c60" args="(const char *repo_id, int offset, int limit, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="seafile-rpc_8h.html#ae3b9d0f1bc9a70ab15d3dd6ea4e39728">seafile_get_commit_list</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01120">1120</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;
    GList *commits = NULL;
    gboolean ret;
    <span class="keyword">struct </span><a class="code" href="structCollectParam.html">CollectParam</a> cp;
    <span class="keywordtype">char</span> *commit_id;

    <span class="keywordflow">if</span> (!<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a48ecdc72b727191abafbbf2ec1f70ace">is_uuid_valid</a> (repo_id)) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid repo id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="comment">/* correct parameter */</span>
    <span class="keywordflow">if</span> (<a class="code" href="structCollectParam.html#a9dafc57374e9354b7bf1a7ea1f455f13">offset</a> &lt; 0)
        <a class="code" href="structCollectParam.html#a9dafc57374e9354b7bf1a7ea1f455f13">offset</a> = 0;

    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>, <span class="stringliteral">&quot;No such repository&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">if</span> (!repo-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>) {
        <a class="code" href="struct__SeafBranch.html">SeafBranch</a> *branch =
            <a class="code" href="branch-mgr_8c.html#a1dffc8c3c325e4ca1daf8a5d5f4f6956">seaf_branch_manager_get_branch</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#acd445f79648f74358e145f48f771e11c">branch_mgr</a>,
                                            repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, <span class="stringliteral">&quot;master&quot;</span>);
        <span class="keywordflow">if</span> (branch != NULL) {
            commit_id = g_strdup (branch-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>);
            <a class="code" href="branch-mgr_8c.html#a2e44cba993ba080e7550a832f019f653">seaf_branch_unref</a> (branch);
        } <span class="keywordflow">else</span> {
            g_warning (<span class="stringliteral">&quot;[repo-mgr] Failed to get repo %s branch master\n&quot;</span>,
                       repo_id);
            g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>,
                         <span class="stringliteral">&quot;No head and branch master&quot;</span>);
<span class="preprocessor">#ifdef SEAFILE_SERVER</span>
<span class="preprocessor"></span>            <a class="code" href="fuse_2Backups_2repo-mgr_8c.html#af6bedb063685823d91f2a335c6882e07">seaf_repo_unref</a> (repo);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            <span class="keywordflow">return</span> NULL;
        }
    } <span class="keywordflow">else</span> {
        commit_id = g_strdup (repo-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>);
    }

    <span class="comment">/* Init CollectParam */</span>
    memset (&amp;cp, 0, <span class="keyword">sizeof</span>(cp));
    cp.offset = <a class="code" href="structCollectParam.html#a9dafc57374e9354b7bf1a7ea1f455f13">offset</a>;
    cp.limit = <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a>;

<span class="preprocessor">#ifdef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    cp.truncate_time = <a class="code" href="server_2Backups_2repo-mgr_8c.html#a774e0a8ea59c07c94dc8014612b3f948">seaf_repo_manager_get_repo_truncate_time</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>,
                                                                 repo_id);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    ret =
        <a class="code" href="commit-mgr_8c.html#ac6547d5546781608b39446d9a2077fed">seaf_commit_manager_traverse_commit_tree</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a62979f26f91fc5e54e0a670e8d69ef67">commit_mgr</a>,
                                                  repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#ab75d342176657e7504c5cddd5ca2c56a">version</a>,
                                                  commit_id, get_commit, &amp;cp, TRUE);
    g_free (commit_id);
<span class="preprocessor">#ifdef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    <a class="code" href="fuse_2Backups_2repo-mgr_8c.html#af6bedb063685823d91f2a335c6882e07">seaf_repo_unref</a> (repo);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="keywordflow">if</span> (!ret) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#ab71e868cefd36960293671011eeaca5e">SEAF_ERR_LIST_COMMITS</a>, <span class="stringliteral">&quot;Failed to list commits&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    commits = g_list_reverse (cp.commits);
    <span class="keywordflow">return</span> <a class="code" href="structCollectParam.html#a9972fad87e11fba3ab733ce4e0a9a7fc">commits</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9436ac009f3a58bc030d20890dcdbd4c"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_config" ref="a9436ac009f3a58bc030d20890dcdbd4c" args="(const char *key, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="seafile-rpc-wrapper_8c.html#aca7579af916b9a40a76005ed02267b21">seafile_get_config</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00123">123</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="seafile-config_8c.html#a9980640c9959844f1380c1ae7252b9c3">seafile_session_config_get_string</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>, key);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a479a6e9d4a9d3dfb8019f5ebe4ce41b9"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_config_int" ref="a479a6e9d4a9d3dfb8019f5ebe4ce41b9" args="(const char *key, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a479a6e9d4a9d3dfb8019f5ebe4ce41b9">seafile_get_config_int</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00135">135</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    gboolean exists = TRUE;

    <span class="keywordtype">int</span> ret = <a class="code" href="seafile-config_8c.html#a1f9c83c8876aa6909a8568fb8ce73070">seafile_session_config_get_int</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>, key, &amp;exists);

    <span class="keywordflow">if</span> (!exists) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a88b2b3e2f6be1400399fbb41c341f1cd">SEAF_ERR_GENERAL</a>, <span class="stringliteral">&quot;Config not exists&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a70fe5819196da504cb23a463cbd76dd9"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_download_rate" ref="a70fe5819196da504cb23a463cbd76dd9" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a70fe5819196da504cb23a463cbd76dd9">seafile_get_download_rate</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00539">539</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>-&gt;<a class="code" href="struct__SeafSyncManager.html#a85dcef85e0f40df799cbb76df7d23e46">last_recv_bytes</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37949d30db3977c8fbb573881173987b"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo" ref="a37949d30db3977c8fbb573881173987b" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc-wrapper_8c.html#a77f356e1b064c92661899aaa253e2957">seafile_get_repo</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00948">948</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *r;

    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }
    <span class="keywordflow">if</span> (!<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a48ecdc72b727191abafbbf2ec1f70ace">is_uuid_valid</a> (repo_id)) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid repo id&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    r = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="comment">/* Don&#39;t return repo that&#39;s not checked out. */</span>
    <span class="keywordflow">if</span> (r == NULL)
        <span class="keywordflow">return</span> NULL;

<span class="preprocessor">#ifndef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a> == NULL)
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct__SeafRepo.html#aeedd453a6f0cf0f3f8104bd2c04d0488">worktree_invalid</a> &amp;&amp; !<a class="code" href="seafile-config_8c.html#adfb95469d4c47a60ad25400c3e2a9f96">seafile_session_config_get_allow_invalid_worktree</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>))
        <span class="keywordflow">return</span> NULL;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    SeafileRepo *repo = seafile_repo_new ();
    g_object_set (repo, <span class="stringliteral">&quot;id&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, <span class="stringliteral">&quot;name&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a235da8ad7bdcaa5bf5b8e2b3e6e23b88">name</a>,
                  <span class="stringliteral">&quot;desc&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a2bcd0258d3e8deb15a45aa8403c9156d">desc</a>, <span class="stringliteral">&quot;encrypted&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#ab50d0e015838fe83d735ba2d6cb40804">encrypted</a>,
                  <span class="stringliteral">&quot;magic&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#ab067d494e7ac35fb57f0a3c448e816d2">magic</a>, <span class="stringliteral">&quot;enc_version&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#af4cb7f672489dceb52cbd47da097ebf8">enc_version</a>,
                  <span class="stringliteral">&quot;head_branch&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a> ? r-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>-&gt;<a class="code" href="struct__SeafBranch.html#ae6af0006b9b80ded4f0525a3be06ccda">name</a> : NULL,
                  <span class="stringliteral">&quot;head_cmmt_id&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a> ? r-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a> : NULL,
                  <span class="stringliteral">&quot;version&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#ab75d342176657e7504c5cddd5ca2c56a">version</a>,
                  NULL);

<span class="preprocessor">#ifdef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct__SeafRepo.html#aa433b0ea3af1b2f6781dc78b06d40618">virtual_info</a>) {
        g_object_set (repo,
                      <span class="stringliteral">&quot;is_virtual&quot;</span>, TRUE,
                      <span class="stringliteral">&quot;origin_repo_id&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#aa433b0ea3af1b2f6781dc78b06d40618">virtual_info</a>-&gt;<a class="code" href="structSeafVirtRepo.html#a23bc0205036c7a0c807c4f89145794b1">origin_repo_id</a>,
                      <span class="stringliteral">&quot;origin_path&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#aa433b0ea3af1b2f6781dc78b06d40618">virtual_info</a>-&gt;<a class="code" href="structSeafVirtRepo.html#abd2d9ee29b9d78255cd52b8f7aa053ec">path</a>,
                      NULL);
    }

    <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct__SeafRepo.html#ab50d0e015838fe83d735ba2d6cb40804">encrypted</a> &amp;&amp; r-&gt;<a class="code" href="struct__SeafRepo.html#af4cb7f672489dceb52cbd47da097ebf8">enc_version</a> == 2)
        g_object_set (repo, <span class="stringliteral">&quot;random_key&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a83e0a2366ba320396f2deb6faa167b84">random_key</a>, NULL);

    g_object_set (repo, <span class="stringliteral">&quot;store_id&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a806d8d4c51581a0a06e7b675023178ae">store_id</a>, NULL);
    g_object_set (repo, <span class="stringliteral">&quot;repaired&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a87797d053b04a8d37b9dde3fb78eb996">repaired</a>, NULL);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#ifndef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    g_object_set (repo, <span class="stringliteral">&quot;worktree-changed&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a0c328bbabc240a013e03b822a5304933">wt_changed</a>,
                  <span class="stringliteral">&quot;worktree-checktime&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a4e7ca0ab7b4a93c318b08dbc7e946bb8">wt_check_time</a>,
                  <span class="stringliteral">&quot;worktree-invalid&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#aeedd453a6f0cf0f3f8104bd2c04d0488">worktree_invalid</a>,
                  <span class="stringliteral">&quot;last-sync-time&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#aea8a8f2c57241ca9b47ae1e7026b4ea5">last_sync_time</a>,
                  <span class="stringliteral">&quot;index-corrupted&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a5377f474b9e1cc96a69ab26d5da8e244">index_corrupted</a>,
                  NULL);

    g_object_set (repo, <span class="stringliteral">&quot;worktree&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a4342ff79933f9cbdbbd34114e5a26df3">worktree</a>,
                  <span class="stringliteral">&quot;relay-id&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a5ec79fa4b78423415fc5f31b90fa5bd1">relay_id</a>,
                  <span class="stringliteral">&quot;auto-sync&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a179d8ca9672a5eeafcbf535d0ccee45d">auto_sync</a>,
                  NULL);

    g_object_set (repo,
                  <span class="stringliteral">&quot;last-modify&quot;</span>, <a class="code" href="seafile-4_81_82_2common_2rpc-service_8c.html#a3e4e9d217daa4c70314c43c6065a57ea">seafile_repo_last_modify</a>(r-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, NULL),
                  NULL);

    g_object_set (repo, <span class="stringliteral">&quot;no-local-history&quot;</span>, r-&gt;<a class="code" href="struct__SeafRepo.html#a4710aaee11c7887df402fffa7ca6c54f">no_local_history</a>, NULL);
<span class="preprocessor">#endif  </span><span class="comment">/* SEAFILE_SERVER */</span>

<span class="preprocessor">#ifdef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    <a class="code" href="fuse_2Backups_2repo-mgr_8c.html#af6bedb063685823d91f2a335c6882e07">seaf_repo_unref</a> (r);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="keywordflow">return</span> (GObject *)repo;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aba4837db052d18cd952ad53e10ebd379"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo_list" ref="aba4837db052d18cd952ad53e10ebd379" args="(int start, int limit, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="seafile-rpc-wrapper_8c.html#a73abf96a927843d07745bcf753a55b6b">seafile_get_repo_list</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_get_repo_list:</p>
<p>Returns repository list. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00930">930</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *repos = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a5fe41fb7382995f3f335e408ba4ddb30">seaf_repo_manager_get_repo_list</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, start, <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a>);
    GList *ret = NULL;

    ret = convert_repo_list (repos);

<span class="preprocessor">#ifdef SEAFILE_SERVER</span>
<span class="preprocessor"></span>    GList *ptr;
    <span class="keywordflow">for</span> (ptr = repos; ptr != NULL; ptr = ptr-&gt;next)
        <a class="code" href="fuse_2Backups_2repo-mgr_8c.html#af6bedb063685823d91f2a335c6882e07">seaf_repo_unref</a> ((<a class="code" href="struct__SeafRepo.html">SeafRepo</a> *)ptr-&gt;data);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    g_list_free (repos);

    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf72ee1ff10ccd5adbb97369392835ef"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo_property" ref="adf72ee1ff10ccd5adbb97369392835ef" args="(const char *repo_id, const char *key, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gchar* <a class="el" href="seafile-rpc-wrapper_8c.html#a2f5e3ff0d33b8964f922f7fc80a84d72">seafile_get_repo_property</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00667">667</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *value = NULL;

    <span class="keywordflow">if</span> (!repo_id || !key) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Arguments should not be empty&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;
    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>, <span class="stringliteral">&quot;Can&#39;t find Repo %s&quot;</span>, repo_id);
        <span class="keywordflow">return</span> NULL;
    }

    value = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a71edf5bba9589fa8793d7b0312cb9553">seaf_repo_manager_get_repo_property</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, key);
    <span class="keywordflow">return</span> value;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27081d344847783e9a8db586d026bb88"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo_relay_address" ref="a27081d344847783e9a8db586d026bb88" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="seafile-rpc_8h.html#a27081d344847783e9a8db586d026bb88">seafile_get_repo_relay_address</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00690">690</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *relay_addr = NULL;

    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Arguments should not be empty&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a018177d17e765b6b8519f6537650e1cc">seaf_repo_manager_get_repo_relay_info</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id,
                                           &amp;relay_addr, NULL);

    <span class="keywordflow">return</span> relay_addr;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aabdf1dc6b5d444c65f25128fd6db48b7"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo_relay_port" ref="aabdf1dc6b5d444c65f25128fd6db48b7" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="seafile-rpc_8h.html#aabdf1dc6b5d444c65f25128fd6db48b7">seafile_get_repo_relay_port</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00707">707</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *relay_port = NULL;

    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Arguments should not be empty&quot;</span>);
        <span class="keywordflow">return</span> NULL;
    }

    <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a018177d17e765b6b8519f6537650e1cc">seaf_repo_manager_get_repo_relay_info</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id,
                                           NULL, &amp;relay_port);

    <span class="keywordflow">return</span> relay_port;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a65581b730e47f4ea1ea4b68469315625"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo_sync_info" ref="a65581b730e47f4ea1ea4b68469315625" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc_8h.html#a65581b730e47f4ea1ea4b68469315625">seafile_get_repo_sync_info</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_get_repo_sync_info: </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00546">546</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__SyncInfo.html">SyncInfo</a> *info;

    info = <a class="code" href="sync-mgr_8c.html#afb758dbde64ac4505ad259f95601d45e">seaf_sync_manager_get_sync_info</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!info)
        <span class="keywordflow">return</span> NULL;

    SeafileSyncInfo *sinfo;
    sinfo = g_object_new (SEAFILE_TYPE_SYNC_INFO,
                          <span class="stringliteral">&quot;repo_id&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#a18a9302a6bb2f4e1b8e67171c9664c8b">repo_id</a>,
                          <span class="stringliteral">&quot;head_commit&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#a9e831740601198ad30ee08db5b64382a">head_commit</a>,
                          <span class="stringliteral">&quot;deleted_on_relay&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#ad3f648faaee9de704066180f885be5e1">deleted_on_relay</a>,
                          <span class="stringliteral">&quot;need_fetch&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#ad336cc9547233f87f2f2ca563ede01c9">need_fetch</a>,
                          <span class="stringliteral">&quot;need_upload&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#aa4f36b0996cd2932a34dc42766e218ef">need_upload</a>,
                          <span class="stringliteral">&quot;need_merge&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#aa66a7471e59d590a0f6d3cbd95fb2bd6">need_merge</a>,
                          <span class="comment">/* &quot;last_sync_time&quot;, info-&gt;last_sync_time,  */</span>
                          NULL);

    <span class="keywordflow">return</span> (GObject *)sinfo;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5af40788ef2c7bcccc071abf16acefe"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_repo_sync_task" ref="aa5af40788ef2c7bcccc071abf16acefe" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc_8h.html#aa5af40788ef2c7bcccc071abf16acefe">seafile_get_repo_sync_task</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00570">570</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;
    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);

    <span class="keywordflow">if</span> (!repo) {
        <span class="keywordflow">return</span> NULL;
    }

    <a class="code" href="struct__SyncInfo.html">SyncInfo</a> *info = <a class="code" href="sync-mgr_8c.html#afb758dbde64ac4505ad259f95601d45e">seaf_sync_manager_get_sync_info</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!info || !info-&gt;<a class="code" href="struct__SyncInfo.html#a6b0407e7d6def63347532d7d73eb7c6b">current_task</a>)
        <span class="keywordflow">return</span> NULL;

    <a class="code" href="struct__SyncTask.html">SyncTask</a> *task = info-&gt;<a class="code" href="struct__SyncInfo.html#a6b0407e7d6def63347532d7d73eb7c6b">current_task</a>;
    <span class="keyword">const</span> <span class="keywordtype">char</span> *sync_state;
    <span class="keywordtype">char</span> allzeros[41] = {0};

    <span class="keywordflow">if</span> (!info-&gt;<a class="code" href="struct__SyncInfo.html#ad0f77a2b8e799b3a0abc417fce88843a">in_sync</a> &amp;&amp; memcmp(allzeros, info-&gt;<a class="code" href="struct__SyncInfo.html#a9e831740601198ad30ee08db5b64382a">head_commit</a>, 41) == 0) {
        sync_state = <span class="stringliteral">&quot;waiting for sync&quot;</span>;
    } <span class="keywordflow">else</span> {
        sync_state = <a class="code" href="sync-mgr_8c.html#ae2fef6674a65dc768d3a1c0c8a760020">sync_state_to_str</a>(task-&gt;<a class="code" href="struct__SyncTask.html#a442ac2b31e670693c3f1ec595a158ae4">state</a>);
    }


    SeafileSyncTask *s_task;
    s_task = g_object_new (SEAFILE_TYPE_SYNC_TASK,
                           <span class="stringliteral">&quot;force_upload&quot;</span>, task-&gt;<a class="code" href="struct__SyncTask.html#aa761b3497876b4d08db90987bc6edbf3">is_manual_sync</a>,
                           <span class="stringliteral">&quot;state&quot;</span>, sync_state,
                           <span class="stringliteral">&quot;error&quot;</span>, <a class="code" href="sync-mgr_8c.html#ae811eab4103ac4fc768be073c7847565">sync_error_to_str</a>(task-&gt;<a class="code" href="struct__SyncTask.html#ad9f58b13e60cd60b461164617d8593d2">error</a>),
                           <span class="stringliteral">&quot;repo_id&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#a18a9302a6bb2f4e1b8e67171c9664c8b">repo_id</a>,
                           NULL);

    <span class="keywordflow">return</span> (GObject *)s_task;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c0f3dd2e2ab549eed77b45e707fca59"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_session_info" ref="a4c0f3dd2e2ab549eed77b45e707fca59" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GObject* <a class="el" href="seafile-rpc_8h.html#a4c0f3dd2e2ab549eed77b45e707fca59">seafile_get_session_info</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_get_session_info:</p>
<p>Returns: a SeafileSessionInfo object. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00107">107</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    SeafileSessionInfo *info;

    info = seafile_session_info_new ();
    g_object_set (info, <span class="stringliteral">&quot;datadir&quot;</span>, <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#ae4df188e5674e3e4b405f14d0ee1bf9f">seaf_dir</a>, NULL);
    <span class="keywordflow">return</span> (GObject *) info;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad35ac8e1fd2296f59bea90314cb12ca6"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_sync_task_list" ref="ad35ac8e1fd2296f59bea90314cb12ca6" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="seafile-rpc_8h.html#ad35ac8e1fd2296f59bea90314cb12ca6">seafile_get_sync_task_list</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00606">606</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GHashTable *sync_info_tbl = <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>-&gt;<a class="code" href="struct__SeafSyncManager.html#a3b638d371d53219f1169c85bdc716727">sync_infos</a>;
    GHashTableIter iter;
    SeafileSyncTask *s_task;
    GList *task_list = NULL;
    gpointer key, value;

    g_hash_table_iter_init (&amp;iter, sync_info_tbl);
    <span class="keywordflow">while</span> (g_hash_table_iter_next (&amp;iter, &amp;key, &amp;value)) {
        <a class="code" href="struct__SyncInfo.html">SyncInfo</a> *info = value;
        <span class="keywordflow">if</span> (!info-&gt;<a class="code" href="struct__SyncInfo.html#ad0f77a2b8e799b3a0abc417fce88843a">in_sync</a>)
            <span class="keywordflow">continue</span>;
        <a class="code" href="struct__SyncTask.html">SyncTask</a> *task = info-&gt;<a class="code" href="struct__SyncInfo.html#a6b0407e7d6def63347532d7d73eb7c6b">current_task</a>;
        <span class="keywordflow">if</span> (!task)
            <span class="keywordflow">continue</span>;
        s_task = g_object_new (SEAFILE_TYPE_SYNC_TASK,
                               <span class="stringliteral">&quot;force_upload&quot;</span>, task-&gt;<a class="code" href="struct__SyncTask.html#aa761b3497876b4d08db90987bc6edbf3">is_manual_sync</a>,
                               <span class="stringliteral">&quot;state&quot;</span>, <a class="code" href="sync-mgr_8c.html#ae2fef6674a65dc768d3a1c0c8a760020">sync_state_to_str</a>(task-&gt;<a class="code" href="struct__SyncTask.html#a442ac2b31e670693c3f1ec595a158ae4">state</a>),
                               <span class="stringliteral">&quot;error&quot;</span>, <a class="code" href="sync-mgr_8c.html#ae811eab4103ac4fc768be073c7847565">sync_error_to_str</a>(task-&gt;<a class="code" href="struct__SyncTask.html#ad9f58b13e60cd60b461164617d8593d2">error</a>),
                               <span class="stringliteral">&quot;repo_id&quot;</span>, info-&gt;<a class="code" href="struct__SyncInfo.html#a18a9302a6bb2f4e1b8e67171c9664c8b">repo_id</a>,
                               NULL);
        task_list = g_list_prepend (task_list, s_task);
    }

    <span class="keywordflow">return</span> task_list;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae279eb1fd9fb8134701e6b6d57ff727f"></a><!-- doxytag: member="rpc&#45;service.c::seafile_get_upload_rate" ref="ae279eb1fd9fb8134701e6b6d57ff727f" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#ae279eb1fd9fb8134701e6b6d57ff727f">seafile_get_upload_rate</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00533">533</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>-&gt;<a class="code" href="struct__SeafSyncManager.html#acf36129fa93b873ff6fdedf906ddd116">last_sent_bytes</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af279abe1fb46e12e3613f9649cf73f77"></a><!-- doxytag: member="rpc&#45;service.c::seafile_is_auto_sync_enabled" ref="af279abe1fb46e12e3613f9649cf73f77" args="(GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#af279abe1fb46e12e3613f9649cf73f77">seafile_is_auto_sync_enabled</a> </td>
          <td>(</td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00813">813</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="sync-mgr_8c.html#a68263f08a3a853d91f0314dce1e706b8">seaf_sync_manager_is_auto_sync_enabled</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6b6845a0e962e66993f08211e2a4cebb"></a><!-- doxytag: member="rpc&#45;service.c::seafile_remove_clone_task" ref="a6b6845a0e962e66993f08211e2a4cebb" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a6b6845a0e962e66993f08211e2a4cebb">seafile_remove_clone_task</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00379">379</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="clone-mgr_8c.html#a131d57446fac0ffddf9dd4dbebe985ae">seaf_clone_manager_remove_task</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a5c8bf74f127df80a600e36fbb19b696e">clone_mgr</a>, repo_id);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a21c3244c53c1bd6caa5f0cfb23617bc6"></a><!-- doxytag: member="rpc&#45;service.c::seafile_remove_repo_tokens_by_account" ref="a21c3244c53c1bd6caa5f0cfb23617bc6" args="(const char *server_addr, const char *email, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a21c3244c53c1bd6caa5f0cfb23617bc6">seafile_remove_repo_tokens_by_account</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>email</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01287">1287</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!server_addr || !email) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    GList *ptr, *repos = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a5fe41fb7382995f3f335e408ba4ddb30">seaf_repo_manager_get_repo_list</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, -1, -1);
    <span class="keywordflow">if</span> (!repos) {
        <span class="keywordflow">return</span> 0;
    }

    <span class="keywordflow">for</span> (ptr = repos; ptr; ptr = ptr-&gt;next) {
        <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo = (<a class="code" href="struct__SeafRepo.html">SeafRepo</a>*)ptr-&gt;data;
        <span class="keywordtype">char</span> *addr = NULL;
        <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a018177d17e765b6b8519f6537650e1cc">seaf_repo_manager_get_repo_relay_info</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>,
                                              repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>,
                                              &amp;addr, <span class="comment">/* addr */</span>
                                              NULL); <span class="comment">/* port */</span>

        <span class="keywordflow">if</span> (g_strcmp0(addr, server_addr) == 0 &amp;&amp; g_strcmp0(repo-&gt;<a class="code" href="struct__SeafRepo.html#aaeff5900edfc0f7bcb9c97592b70d247">email</a>, email) == 0) {
            <span class="keywordflow">if</span> (<a class="code" href="daemon_2Backups_2repo-mgr_8c.html#abbca41e16d1632518aedb8cbe31199b5">seaf_repo_manager_remove_repo_token</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo) &lt; 0) {
                <span class="keywordflow">return</span> -1;
            }
        }

        g_free (addr);
    }

    g_list_free (repos);

    cancel_clone_tasks_by_account (server_addr, email);

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e4e9d217daa4c70314c43c6065a57ea"></a><!-- doxytag: member="rpc&#45;service.c::seafile_repo_last_modify" ref="a3e4e9d217daa4c70314c43c6065a57ea" args="(const char *repo_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a3e4e9d217daa4c70314c43c6065a57ea">seafile_repo_last_modify</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00172">172</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;
    <a class="code" href="struct__SeafCommit.html">SeafCommit</a> *c;
    <span class="keywordtype">char</span> *commit_id;
    <span class="keywordtype">int</span> <a class="code" href="index_8h.html#a774773e5c25d1b44dac32468246cc980">ctime</a> = 0;

    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>, <span class="stringliteral">&quot;No such repository&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">if</span> (!repo-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>) {
        <a class="code" href="struct__SeafBranch.html">SeafBranch</a> *branch =
            <a class="code" href="branch-mgr_8c.html#a1dffc8c3c325e4ca1daf8a5d5f4f6956">seaf_branch_manager_get_branch</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#acd445f79648f74358e145f48f771e11c">branch_mgr</a>,
                                            repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, <span class="stringliteral">&quot;master&quot;</span>);
        <span class="keywordflow">if</span> (branch != NULL) {
            commit_id = g_strdup (branch-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>);
            <a class="code" href="branch-mgr_8c.html#a2e44cba993ba080e7550a832f019f653">seaf_branch_unref</a> (branch);
        } <span class="keywordflow">else</span> {
            g_warning (<span class="stringliteral">&quot;[repo-mgr] Failed to get repo %s branch master\n&quot;</span>,
                       repo_id);
            g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>,
                         <span class="stringliteral">&quot;No head and branch master&quot;</span>);
            <span class="keywordflow">return</span> -1;
        }
    } <span class="keywordflow">else</span> {
        commit_id = g_strdup (repo-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>);
    }

    c = <a class="code" href="commit-mgr_8c.html#adaf4b74c4dba25ddaa746f4ff9221b3f">seaf_commit_manager_get_commit</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a62979f26f91fc5e54e0a670e8d69ef67">commit_mgr</a>,
                                        repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#ab75d342176657e7504c5cddd5ca2c56a">version</a>,
                                        commit_id);
    g_free (commit_id);
    <span class="keywordflow">if</span> (!c)
        <span class="keywordflow">return</span> -1;

    ctime = c-&gt;<a class="code" href="struct__SeafCommit.html#ae3f1657ab475921889a1e9c74b94e7a2">ctime</a>;
    <a class="code" href="commit-mgr_8c.html#a436a9092e9c5711820dc1a09234aac04">seaf_commit_unref</a> (c);
    <span class="keywordflow">return</span> <a class="code" href="index_8h.html#a774773e5c25d1b44dac32468246cc980">ctime</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a999cad277bbc4f285af4afa643303e9d"></a><!-- doxytag: member="rpc&#45;service.c::seafile_set_config" ref="a999cad277bbc4f285af4afa643303e9d" args="(const char *key, const char *value, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc-wrapper_8c.html#ae3893027ba2992bb4dfc5f1c30d34504">seafile_set_config</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00117">117</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="seafile-config_8c.html#acfe503d4b0ebbefcb0f14b6ede6e2dcc">seafile_session_config_set_string</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>, key, value);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a62382a853a7c3118e1df715101e0087f"></a><!-- doxytag: member="rpc&#45;service.c::seafile_set_config_int" ref="a62382a853a7c3118e1df715101e0087f" args="(const char *key, int value, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a62382a853a7c3118e1df715101e0087f">seafile_set_config_int</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00129">129</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="seafile-config_8c.html#a073ad395f07f0dd2ac83bba744e59823">seafile_session_config_set_int</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>, key, value);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8da5763dd3aae5a13dd2993cffd0fccf"></a><!-- doxytag: member="rpc&#45;service.c::seafile_set_download_rate_limit" ref="a8da5763dd3aae5a13dd2993cffd0fccf" args="(int limit, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a8da5763dd3aae5a13dd2993cffd0fccf">seafile_set_download_rate_limit</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00161">161</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a> &lt; 0)
        <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a> = 0;

    <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>-&gt;<a class="code" href="struct__SeafSyncManager.html#a8ca07c4d618fb2c931b0fbc616a24a47">download_limit</a> = <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a>;

    <span class="keywordflow">return</span> <a class="code" href="seafile-config_8c.html#a073ad395f07f0dd2ac83bba744e59823">seafile_session_config_set_int</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>, <a class="code" href="seafile-config_8h.html#a5a48d3c4fabe714c6a09773f9b2e74a4">KEY_DOWNLOAD_LIMIT</a>, <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3880f357c6b6e7e350ce5a781e9668c1"></a><!-- doxytag: member="rpc&#45;service.c::seafile_set_repo_property" ref="a3880f357c6b6e7e350ce5a781e9668c1" args="(const char *repo_id, const char *key, const char *value, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc-wrapper_8c.html#ac81c30bdcbb105db274866f3a051820a">seafile_set_repo_property</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00636">636</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> ret;

    <span class="keywordflow">if</span> (repo_id == NULL || key == NULL || value == NULL) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Arguments should not be empty&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;
    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>, <span class="stringliteral">&quot;Can&#39;t find Repo %s&quot;</span>, repo_id);
        <span class="keywordflow">return</span> -1;
    }

    ret = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a9d2f586c85f26b2de677fd03606103aa">seaf_repo_manager_set_repo_property</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>,
                                               repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, key, value);
    <span class="keywordflow">if</span> (ret &lt; 0) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a7aec187daf50bdbbf10c9eb4ca50c981">SEAF_ERR_INTERNAL</a>,
                     <span class="stringliteral">&quot;Failed to set key for repo %s&quot;</span>, repo_id);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc5f8a72ec2fe4760591520d16828306"></a><!-- doxytag: member="rpc&#45;service.c::seafile_set_repo_token" ref="abc5f8a72ec2fe4760591520d16828306" args="(const char *repo_id, const char *token, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc-wrapper_8c.html#a97dba82e9cdfda500ee5bd9207ffbd4c">seafile_set_repo_token</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01324">1324</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> ret;

    <span class="keywordflow">if</span> (repo_id == NULL || token == NULL) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Arguments should not be empty&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo;
    repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a4e83bbdab82c39e4738fd82c33a87ab4">SEAF_ERR_BAD_REPO</a>, <span class="stringliteral">&quot;Can&#39;t find Repo %s&quot;</span>, repo_id);
        <span class="keywordflow">return</span> -1;
    }

    ret = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a4fdafbeb326de99eec7160b72bcc3dd4">seaf_repo_manager_set_repo_token</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>,
                                            repo, token);
    <span class="keywordflow">if</span> (ret &lt; 0) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#a7aec187daf50bdbbf10c9eb4ca50c981">SEAF_ERR_INTERNAL</a>,
                     <span class="stringliteral">&quot;Failed to set token for repo %s&quot;</span>, repo_id);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a955215d999733bc853ecfe0e69b3a4ec"></a><!-- doxytag: member="rpc&#45;service.c::seafile_set_upload_rate_limit" ref="a955215d999733bc853ecfe0e69b3a4ec" args="(int limit, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a955215d999733bc853ecfe0e69b3a4ec">seafile_set_upload_rate_limit</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00150">150</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a> &lt; 0)
        <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a> = 0;

    <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>-&gt;<a class="code" href="struct__SeafSyncManager.html#af27650b12e9237509a8b214808f18e21">upload_limit</a> = <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a>;

    <span class="keywordflow">return</span> <a class="code" href="seafile-config_8c.html#a073ad395f07f0dd2ac83bba744e59823">seafile_session_config_set_int</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>, <a class="code" href="seafile-config_8h.html#a61546165efed667d83b2e9c26d492322">KEY_UPLOAD_LIMIT</a>, <a class="code" href="structCollectParam.html#a2c926d9b08cd37abcad6ccd80f50396a">limit</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a69a68f15746004a2a844c35c7d305b22"></a><!-- doxytag: member="rpc&#45;service.c::seafile_sync" ref="a69a68f15746004a2a844c35c7d305b22" args="(const char *repo_id, const char *peer_id, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a69a68f15746004a2a844c35c7d305b22">seafile_sync</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>peer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>seafile_sync:</p>
<p>Sync a repo with relay. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00410">410</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!repo_id) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Repo ID should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> <a class="code" href="sync-mgr_8c.html#aeea02ab15ddf4c48dd3227f30b791f37">seaf_sync_manager_add_sync_task</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a6b2a5e1e723955885f9fb27c5f064df4">sync_mgr</a>, repo_id, error);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb655a9a19eca34297b5c71d125cde24"></a><!-- doxytag: member="rpc&#45;service.c::seafile_unsync_repos_by_account" ref="adb655a9a19eca34297b5c71d125cde24" args="(const char *server_addr, const char *email, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#adb655a9a19eca34297b5c71d125cde24">seafile_unsync_repos_by_account</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>email</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l01250">1250</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!server_addr || !email) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    GList *ptr, *repos = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a5fe41fb7382995f3f335e408ba4ddb30">seaf_repo_manager_get_repo_list</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, -1, -1);
    <span class="keywordflow">if</span> (!repos) {
        <span class="keywordflow">return</span> 0;
    }

    <span class="keywordflow">for</span> (ptr = repos; ptr; ptr = ptr-&gt;next) {
        <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo = (<a class="code" href="struct__SeafRepo.html">SeafRepo</a>*)ptr-&gt;data;
        <span class="keywordtype">char</span> *addr = NULL;
        <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a018177d17e765b6b8519f6537650e1cc">seaf_repo_manager_get_repo_relay_info</a>(<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>,
                                              repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>,
                                              &amp;addr, <span class="comment">/* addr */</span>
                                              NULL); <span class="comment">/* port */</span>

        <span class="keywordflow">if</span> (g_strcmp0(addr, server_addr) == 0 &amp;&amp; g_strcmp0(repo-&gt;<a class="code" href="struct__SeafRepo.html#aaeff5900edfc0f7bcb9c97592b70d247">email</a>, email) == 0) {
            <span class="keywordflow">if</span> (do_unsync_repo(repo) &lt; 0) {
                <span class="keywordflow">return</span> -1;
            }
        }

        g_free (addr);
    }

    g_list_free (repos);

    cancel_clone_tasks_by_account (server_addr, email);

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71e6ea38c1cc19c4989505a4bed67955"></a><!-- doxytag: member="rpc&#45;service.c::seafile_update_repo_relay_info" ref="a71e6ea38c1cc19c4989505a4bed67955" args="(const char *repo_id, const char *new_addr, const char *new_port, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a71e6ea38c1cc19c4989505a4bed67955">seafile_update_repo_relay_info</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>repo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00724">724</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!repo_id || !new_addr || !new_port) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Arguments should not be empty&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordtype">int</span> port = atoi(new_port);
    <span class="keywordflow">if</span> (port &lt;= 0 || port &gt; 65535) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Invalid port&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <a class="code" href="struct__SeafRepo.html">SeafRepo</a> *repo = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#af0276c036723560e3e8b9aa5529133d6">seaf_repo_manager_get_repo</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo_id);
    <span class="keywordflow">if</span> (!repo) {
        <span class="keywordflow">return</span> -1;
    }

    <a class="code" href="struct__CcnetPeer.html">CcnetPeer</a> *relay = <a class="code" href="ccnet_8h.html#a136915227534e9204ffca3d7dc4d331e">ccnet_get_peer</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#add541d96cca483ad72ff56ad061d1d32">ccnetrpc_client</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#a5ec79fa4b78423415fc5f31b90fa5bd1">relay_id</a>);
    <span class="keywordflow">if</span> (!relay) {
        GString *buf = g_string_new(NULL);
        g_string_append_printf (buf, <span class="stringliteral">&quot;add-relay --id %s --addr %s:%s&quot;</span>,
                                repo-&gt;<a class="code" href="struct__SeafRepo.html#a5ec79fa4b78423415fc5f31b90fa5bd1">relay_id</a>, new_addr, new_port);

        <a class="code" href="ccnet_8h.html#a7e0e66a5bbdd84284c8a524f467c1d6f">ccnet_send_command</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#ab2fe4d566fbe5b9cff50a9bef54cd931">session</a>, buf-&gt;str, NULL, NULL);
        g_string_free (buf, TRUE);
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (g_strcmp0(relay-&gt;<a class="code" href="struct__CcnetPeer.html#a9a5ccac357bbe914955a9faf277c3459">public_addr</a>, new_addr) != 0 ||
            relay-&gt;<a class="code" href="struct__CcnetPeer.html#a386d17bb9a7bd07af29237484abf98e3">public_port</a> != (uint16_t)port) {
            <a class="code" href="ccnet_8h.html#a7195976ae8bfd17e5272cc46b6b23865">ccnet_update_peer_address</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#add541d96cca483ad72ff56ad061d1d32">ccnetrpc_client</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#a5ec79fa4b78423415fc5f31b90fa5bd1">relay_id</a>,
                                       new_addr, port);
        }

        g_object_unref (relay);
    }

    <span class="keywordflow">return</span> <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#aaca4b8f68d91db58fc8e1484d9695ce6">seaf_repo_manager_update_repo_relay_info</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, repo,
                                                     new_addr, new_port);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d3ae7fdb45f784fe4eb4abc2f4055c2"></a><!-- doxytag: member="rpc&#45;service.c::seafile_update_repos_server_host" ref="a2d3ae7fdb45f784fe4eb4abc2f4055c2" args="(const char *old_host, const char *new_host, const char *new_server_url, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-rpc_8h.html#a2d3ae7fdb45f784fe4eb4abc2f4055c2">seafile_update_repos_server_host</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_server_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html#l00768">768</a> of file <a class="el" href="seafile-4_81_82_2common_2rpc-service_8c_source.html">rpc-service.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!old_host || !new_host || !new_server_url) {
        g_set_error (error, <a class="code" href="seafile-4_81_82_2common_2log_8h.html#a8672557bc38a1d129649fe83577444ca">SEAFILE_DOMAIN</a>, <a class="code" href="seafile-error_8h.html#acf817c9ac99e8c572fa9ed3648a7db66">SEAF_ERR_BAD_ARGS</a>, <span class="stringliteral">&quot;Argument should not be null&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#ae3753999b4845dfe68bd6f098313280c">seaf_repo_manager_update_repos_server_host</a>(
        <a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a08681eb4d012b49f2552a91f4ba494f7">repo_mgr</a>, old_host, new_host, new_server_url);
}
</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 19 2015 02:52:52 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
