<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: seafile-4.1.2/lib/utils.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">seafile-4.1.2/lib/utils.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;glib.h&gt;</code><br/>
<code>#include &lt;glib-object.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;evutil.h&gt;</code><br/>
<code>#include &lt;jansson.h&gt;</code><br/>
</div>
<p><a href="seafile-4_81_82_2lib_2utils_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac5d9c8feaea3e66b35fbc3195a97a699">ccnet_pipe_t</a>&#160;&#160;&#160;int</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a316a8da8d8eac0625b051bf2155bdc58">ccnet_pipe</a>(a)&#160;&#160;&#160;pipe((a))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab4c7c5fbaad73e7853c2818f1611bf42">piperead</a>(a, b, c)&#160;&#160;&#160;read((a),(b),(c))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#aba56408a40182bedb01082bd4b4237ef">pipewrite</a>(a, b, c)&#160;&#160;&#160;write((a),(b),(c))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a597da6cd8fcd52017eb622068a9538dc">pipeclose</a>(a)&#160;&#160;&#160;close((a))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a>&#160;&#160;&#160;struct stat</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a0f3e434ccfa089b0ee658045a82dd2f2">pipereadn</a>(a, b, c)&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a94142a37553a5232b714c3e1b4d91d92">recvn</a>((a),(b),(c))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a0d809fcc8afee904a025af6d8225b387">pipewriten</a>(a, b, c)&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a30d2fd3f3e5797b240223f700294a517">sendn</a>((a),(b),(c))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#aa0ecb4e9015d95fb94612fda9639e145">CCNET_DOMAIN</a>&#160;&#160;&#160;g_quark_from_string(&quot;ccnet&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#add6d87c38909d280569fc0b360fd4d3e">sha1_to_hex</a>(<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>, hex)&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ae947b53110fc0132e83445d76ddded09">rawdata_to_hex</a>((<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>), (hex), 20)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#aaa9d7a6b2ccb81c212f780ac67e13d4a">hex_to_sha1</a>(hex, <a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>)&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a130e83c1ad29d78ef1a5b6baef1754d5">hex_to_rawdata</a>((hex), (<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>), 20)</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a4bc6467da0bdec670824a164c007e1a8">KeyValueFunc</a> )(void *data, const char *key, char *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef gboolean(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab8819219965036f1df6aad17bd9503c7">KeyValueFunc2</a> )(void *data, const char *key, const char *value)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab46893ad4a68049bcd80eac8dcc2e299">seaf_stat</a> (const char *path, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a09f0677ad28b98b7a85bcda57f71e7c8">seaf_fstat</a> (int fd, <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#abc8dd3d83f54a07998aea73c4071d818">seaf_set_file_time</a> (const char *path, guint64 <a class="el" href="index_8h.html#adb9fb1ca66f1a67516c2ee1492e6ab2b">mtime</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a26f091009701c5a9d1886b9d6ceb9c8e">seaf_util_unlink</a> (const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#abab8a37cf996c1cf68c1cc8f6dfc757c">seaf_util_rmdir</a> (const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a51aa6c51cc437a2766ca666660289bce">seaf_util_mkdir</a> (const char *path, mode_t <a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ad154e736c3751fe880395dff55fab739">seaf_util_open</a> (const char *path, int <a class="el" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a822971bc55edc699449c6f6f2e03225e">seaf_util_create</a> (const char *path, int <a class="el" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>, mode_t <a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a46307856992913eeb741c8203cfc93c2">seaf_util_rename</a> (const char *oldpath, const char *newpath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a1c2448a989efb1ce953a90f3db3c8042">seaf_util_exists</a> (const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac0aa6c70f613ad3344b5f1f917b6b68a">timeval_from_msec</a> (uint64_t milliseconds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a3d589cfe89ac99c0557894fafe909892">ccnet_strlcpy</a> (char *dst, const char *src, size_t <a class="el" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ae947b53110fc0132e83445d76ddded09">rawdata_to_hex</a> (const unsigned char *rawdata, char *hex_str, int n_bytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a130e83c1ad29d78ef1a5b6baef1754d5">hex_to_rawdata</a> (const char *hex_str, unsigned char *rawdata, int n_bytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a63f0195a708d600ce96f867747afb8e4">calculate_sha1</a> (unsigned char *<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>, const char *msg, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a75a7a2a1400f4cf5f6cd5ea988e705f4">ccnet_sha1_equal</a> (const void *v1, const void *v2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac7b2f63c70899294f90c31e2213124a5">ccnet_sha1_hash</a> (const void *v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#af64020f0be33abde6a2a076ff9808809">gen_uuid</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab141c69bb8e435339193ac2062007c7c">gen_uuid_inplace</a> (char *buf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a48ecdc72b727191abafbbf2ec1f70ace">is_uuid_valid</a> (const char *uuid_str)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a8972f29db121d2c77a167b5ad4942d94">checkdir</a> (const char *dir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac76d93d4c338c30fe27f11e3dbe59c2d">checkdir_with_mkdir</a> (const char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ad52e8a09737b9afc6375f8cee7336d7d">ccnet_expand_path</a> (const char *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a332e0543b63f5b18d4fa81eaf09922fc">objstore_mkdir</a> (const char *base)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac8e393e1fd0d1d9d0057ebd24a561c1b">objstore_get_path</a> (char *path, const char *base, const char *<a class="el" href="http-server_8c.html#acdc8b2e33d61c23557d7e7563f00ef6f">obj_id</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac488386314994c1d379a02d1ffd10993">strsplit_by_space</a> (char *string, int *length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a05f0eae648599d413d03103758473e30">readn</a> (int fd, void *vptr, size_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a6a9988632dc9e05f10a71688fd280cc9">writen</a> (int fd, const void *vptr, size_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a94142a37553a5232b714c3e1b4d91d92">recvn</a> (evutil_socket_t fd, void *vptr, size_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a30d2fd3f3e5797b240223f700294a517">sendn</a> (evutil_socket_t fd, const void *vptr, size_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a8e7da7ad650a6da09c1f679479335ed1">copy_fd</a> (int ifd, int ofd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a9f585ff92128cbf174ef4b3a9b429d08">copy_file</a> (const char *dst, const char *src, int <a class="el" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a4fff2ff146c8734a7dd56989631e451e">strsplit_by_char</a> (char *string, int *length, char c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab11a77475b1b6258fd066c9e7413dd3e">strjoin_n</a> (const char *seperator, int argc, char **argv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#add6d17882e0d7270ec07dd51151f2b9a">is_ipaddr_valid</a> (const char *ip)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a3e3be562436695c4865957e2790b1da8">parse_key_value_pairs</a> (char *string, <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a4bc6467da0bdec670824a164c007e1a8">KeyValueFunc</a> func, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a2d7d7513a3e6fb072e6ce9b630097634">parse_key_value_pairs2</a> (char *string, <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab8819219965036f1df6aad17bd9503c7">KeyValueFunc2</a> func, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gchar *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#aae72852955df5bdfc8bb72a36a0f8808">ccnet_key_file_get_string</a> (GKeyFile *keyf, const char *category, const char *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#aefe1dabfce05643fed7d83c2bb4c615c">string_list_append</a> (GList *str_list, const char *string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab7295a8677eade8b86c15b06715dc902">string_list_append_sorted</a> (GList *str_list, const char *string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a6eb8b0fccfe316157ddb5a47d9cd3a71">string_list_remove</a> (GList *str_list, const char *string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#af85d9a3e4ab846a6eedfb509508367f2">string_list_free</a> (GList *str_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a38f449c218477960cf9dc2136453db10">string_list_is_exists</a> (GList *str_list, const char *string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5800cf387e8c70ad58e70cae752c854c">string_list_join</a> (GList *str_list, GString *strbuf, const char *seperator)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a45ff8617e4273dddf37bccc992d9d505">string_list_parse</a> (const char *list_in_str, const char *seperator)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#afbee5493f93a3ddbed45c38d2682683d">string_list_parse_sorted</a> (const char *list_in_str, const char *seperator)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a4bed2c887b506e8e25c0b9f1725f4684">string_list_sorted_is_equal</a> (GList *list1, GList *list2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#acc99dd2106bfcedb4fef8a2f1ecd1b8a">ncopy_string_array</a> (char **orig, int n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a4934aa80d54625fa9d2505f13117f4a0">nfree_string_array</a> (char **array, int n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a6a676d54675053cd9d9afefabd10a454">get_current_time</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a81c34fab7ffe2584f17e2e7bd528910a">ccnet_encrypt</a> (char **data_out, int *out_len, const char *data_in, const int in_len, const char *code, const int code_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#aa5c0dca9c780e258efa1cdbf50f8666c">ccnet_decrypt</a> (char **data_out, int *out_len, const char *data_in, const int in_len, const char *code, const int code_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ad05e32bdab25b5e5ba3f36a640b30cc8">ccnet_locale_from_utf8</a> (const gchar *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a927b2cab4b163cb58c078fb4158f6f82">ccnet_locale_to_utf8</a> (const gchar *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a3434241b665ef5363ba0459e40dc5733">process_is_running</a> (const char *<a class="el" href="index_8h.html#a2a7f851274ec18e17d38114c39b8511a">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab9c0a9dedc99842d121b9bb9a9f54515">count_process</a> (const char *process_name_in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5241dfe016bb295dddd19c1f8b6f62d4">ccnet_object_type_from_id</a> (const char *object_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a1efc86d468a02c24e0709818044d296d">ccnet_calc_directory_size</a> (const char *path, GError **error)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a50be04624e628ad19aa88d9fc0fd5a28">json_object_get_string_member</a> (json_t *object, const char *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#af3fcfc36aa8248b0c8932e5c3e51f3fc">json_object_has_member</a> (json_t *object, const char *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a36802b9b311cdc4cd847b79c4ddd5903">json_object_get_int_member</a> (json_t *object, const char *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a178267416f18a24c6d717db8ad91c471">json_object_set_string_member</a> (json_t *object, const char *key, const char *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#abfac2ec06b36f64de2f110f093e6dfc0">json_object_set_int_member</a> (json_t *object, const char *key, gint64 value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ae476843508927222a51125ac1c7fec2b">clean_utf8_data</a> (char *data, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ace06e9888a8adf6cd341163d3f7f504f">seaf_compress</a> (guint8 *input, int inlen, guint8 **output, int *outlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac7d9f3eae8999794ca0f59cab62c486e">seaf_decompress</a> (guint8 *input, int inlen, guint8 **output, int *outlen)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aa0ecb4e9015d95fb94612fda9639e145"></a><!-- doxytag: member="utils.h::CCNET_DOMAIN" ref="aa0ecb4e9015d95fb94612fda9639e145" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#aa0ecb4e9015d95fb94612fda9639e145">CCNET_DOMAIN</a>&#160;&#160;&#160;g_quark_from_string(&quot;ccnet&quot;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00135">135</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a316a8da8d8eac0625b051bf2155bdc58"></a><!-- doxytag: member="utils.h::ccnet_pipe" ref="a316a8da8d8eac0625b051bf2155bdc58" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a316a8da8d8eac0625b051bf2155bdc58">ccnet_pipe</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;pipe((a))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00053">53</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac5d9c8feaea3e66b35fbc3195a97a699"></a><!-- doxytag: member="utils.h::ccnet_pipe_t" ref="ac5d9c8feaea3e66b35fbc3195a97a699" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ac5d9c8feaea3e66b35fbc3195a97a699">ccnet_pipe_t</a>&#160;&#160;&#160;int</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00051">51</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaa9d7a6b2ccb81c212f780ac67e13d4a"></a><!-- doxytag: member="utils.h::hex_to_sha1" ref="aaa9d7a6b2ccb81c212f780ac67e13d4a" args="(hex, sha1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#aaa9d7a6b2ccb81c212f780ac67e13d4a">hex_to_sha1</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hex, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a130e83c1ad29d78ef1a5b6baef1754d5">hex_to_rawdata</a>((hex), (<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>), 20)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00147">147</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a597da6cd8fcd52017eb622068a9538dc"></a><!-- doxytag: member="utils.h::pipeclose" ref="a597da6cd8fcd52017eb622068a9538dc" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a597da6cd8fcd52017eb622068a9538dc">pipeclose</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;close((a))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00056">56</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab4c7c5fbaad73e7853c2818f1611bf42"></a><!-- doxytag: member="utils.h::piperead" ref="ab4c7c5fbaad73e7853c2818f1611bf42" args="(a, b, c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab4c7c5fbaad73e7853c2818f1611bf42">piperead</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;read((a),(b),(c))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00054">54</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0f3e434ccfa089b0ee658045a82dd2f2"></a><!-- doxytag: member="utils.h::pipereadn" ref="a0f3e434ccfa089b0ee658045a82dd2f2" args="(a, b, c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a0f3e434ccfa089b0ee658045a82dd2f2">pipereadn</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a94142a37553a5232b714c3e1b4d91d92">recvn</a>((a),(b),(c))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00062">62</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba56408a40182bedb01082bd4b4237ef"></a><!-- doxytag: member="utils.h::pipewrite" ref="aba56408a40182bedb01082bd4b4237ef" args="(a, b, c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#aba56408a40182bedb01082bd4b4237ef">pipewrite</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;write((a),(b),(c))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00055">55</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0d809fcc8afee904a025af6d8225b387"></a><!-- doxytag: member="utils.h::pipewriten" ref="a0d809fcc8afee904a025af6d8225b387" args="(a, b, c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a0d809fcc8afee904a025af6d8225b387">pipewriten</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a30d2fd3f3e5797b240223f700294a517">sendn</a>((a),(b),(c))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00063">63</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5b073bcbe1516b249924c3702002d32c"></a><!-- doxytag: member="utils.h::SeafStat" ref="a5b073bcbe1516b249924c3702002d32c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a>&#160;&#160;&#160;struct stat</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00058">58</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="add6d87c38909d280569fc0b360fd4d3e"></a><!-- doxytag: member="utils.h::sha1_to_hex" ref="add6d87c38909d280569fc0b360fd4d3e" args="(sha1, hex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#add6d87c38909d280569fc0b360fd4d3e">sha1_to_hex</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hex&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ae947b53110fc0132e83445d76ddded09">rawdata_to_hex</a>((<a class="el" href="test-seafile-fmt_8c.html#a0f4af80189728258cd27679dee8ab2dc">sha1</a>), (hex), 20)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00146">146</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a4bc6467da0bdec670824a164c007e1a8"></a><!-- doxytag: member="utils.h::KeyValueFunc" ref="a4bc6467da0bdec670824a164c007e1a8" args=")(void *data, const char *key, char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a4bc6467da0bdec670824a164c007e1a8">KeyValueFunc</a>)(void *data, const char *key, char *value)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00194">194</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab8819219965036f1df6aad17bd9503c7"></a><!-- doxytag: member="utils.h::KeyValueFunc2" ref="ab8819219965036f1df6aad17bd9503c7" args=")(void *data, const char *key, const char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef gboolean(* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab8819219965036f1df6aad17bd9503c7">KeyValueFunc2</a>)(void *data, const char *key, const char *value)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html#l00197">197</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8h_source.html">utils.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a63f0195a708d600ce96f867747afb8e4"></a><!-- doxytag: member="utils.h::calculate_sha1" ref="a63f0195a708d600ce96f867747afb8e4" args="(unsigned char *sha1, const char *msg, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a675c60346da3d826cd6d6fecd87e8e8b">calculate_sha1</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>sha1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00980">980</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    SHA_CTX c;

    <span class="keywordflow">if</span> (len &lt; 0)
        len = strlen(msg);

    SHA1_Init(&amp;c);
    SHA1_Update(&amp;c, msg, len);    
        SHA1_Final(<a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>, &amp;c);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1efc86d468a02c24e0709818044d296d"></a><!-- doxytag: member="utils.h::ccnet_calc_directory_size" ref="a1efc86d468a02c24e0709818044d296d" args="(const char *path, GError **error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gint64 <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a1efc86d468a02c24e0709818044d296d">ccnet_calc_directory_size</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GError **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02269">2269</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> calc_recursively (path, error);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5c0dca9c780e258efa1cdbf50f8666c"></a><!-- doxytag: member="utils.h::ccnet_decrypt" ref="aa5c0dca9c780e258efa1cdbf50f8666c" args="(char **data_out, int *out_len, const char *data_in, const int in_len, const char *code, const int code_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#aa5c0dca9c780e258efa1cdbf50f8666c">ccnet_decrypt</a> </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>in_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>code_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01676">1676</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    *data_out = NULL;
    *out_len = -1;

    <span class="comment">/* Check validation. Because padding is always used, in_len must</span>
<span class="comment">     * be a multiple of BLK_SIZE */</span>
    <span class="keywordflow">if</span> ( data_in == NULL || in_len &lt;= 0 || in_len % <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a5394435edf20efdffac70b5c362ade81">BLK_SIZE</a> != 0 ||
         code == NULL || code_len &lt;= 0) {

        g_warning (<span class="stringliteral">&quot;Invalid param(s).\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    EVP_CIPHER_CTX ctx;
    <span class="keywordtype">int</span> ret, <a class="code" href="block-tx-utils_8h.html#acb7060b2ddf9e95be5ca9fd29e252770">key_len</a>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> key[16], iv[16];

   
    <span class="comment">/* Generate the derived key. We use AES 128 bits key,</span>
<span class="comment">       Electroic-Code-Book cipher mode, and SHA1 as the message digest</span>
<span class="comment">       when generating the key. IV is not used in ecb mode,</span>
<span class="comment">       actually. */</span>
    key_len  = EVP_BytesToKey (EVP_aes_128_ecb(), <span class="comment">/* cipher mode */</span>
                               EVP_sha1(),        <span class="comment">/* message digest */</span>
                               NULL,              <span class="comment">/* salt */</span>
                               (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)code, <span class="comment">/* passwd */</span>
                               code_len,
                               3,   <span class="comment">/* iteration times */</span>
                               key, <span class="comment">/* the derived key */</span>
                               iv); <span class="comment">/* IV, initial vector */</span>

    <span class="comment">/* The key should be 16 bytes long for our 128 bit key. */</span>
    <span class="keywordflow">if</span> (key_len != 16) {
        g_warning (<span class="stringliteral">&quot;failed to init EVP_CIPHER_CTX.\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }


    <span class="comment">/* Prepare CTX for decryption. */</span>
    EVP_CIPHER_CTX_init (&amp;ctx);

    ret = EVP_DecryptInit_ex (&amp;ctx,
                              EVP_aes_128_ecb(), <span class="comment">/* cipher mode */</span>
                              NULL, <span class="comment">/* engine, NULL for default */</span>
                              key,  <span class="comment">/* derived key */</span>
                              iv);  <span class="comment">/* initial vector */</span>

    <span class="keywordflow">if</span> (ret == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aa5ae267b99893212a3323291959f8427">DEC_FAILURE</a>)
        <span class="keywordflow">return</span> -1;

    <span class="comment">/* Allocating output buffer. */</span>
    
    *data_out = (<span class="keywordtype">char</span> *)g_malloc (in_len);

    <span class="keywordflow">if</span> (*data_out == NULL) {
        g_warning (<span class="stringliteral">&quot;failed to allocate the output buffer.\n&quot;</span>);
        <span class="keywordflow">goto</span> dec_error;
    }                

    <span class="keywordtype">int</span> update_len, final_len;

    <span class="comment">/* Do the decryption. */</span>
    ret = EVP_DecryptUpdate (&amp;ctx,
                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)*data_out,
                             &amp;update_len,
                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)data_in,
                             in_len);

    <span class="keywordflow">if</span> (ret == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aa5ae267b99893212a3323291959f8427">DEC_FAILURE</a>)
        <span class="keywordflow">goto</span> dec_error;


    <span class="comment">/* Finish the possible partial block. */</span>
    ret = EVP_DecryptFinal_ex (&amp;ctx,
                               (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)*data_out + update_len,
                               &amp;final_len);

    *out_len = update_len + final_len;

    <span class="comment">/* out_len should be smaller than in_len. */</span>
    <span class="keywordflow">if</span> (ret == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aa5ae267b99893212a3323291959f8427">DEC_FAILURE</a> || *out_len &gt; in_len)
        <span class="keywordflow">goto</span> dec_error;

    EVP_CIPHER_CTX_cleanup (&amp;ctx);
    
    <span class="keywordflow">return</span> 0;

dec_error:

    EVP_CIPHER_CTX_cleanup (&amp;ctx);

    *out_len = -1;
    <span class="keywordflow">if</span> (*data_out != NULL)
        g_free (*data_out);

    *data_out = NULL;

    <span class="keywordflow">return</span> -1;
    
}
</pre></div>
</div>
</div>
<a class="anchor" id="a81c34fab7ffe2584f17e2e7bd528910a"></a><!-- doxytag: member="utils.h::ccnet_encrypt" ref="a81c34fab7ffe2584f17e2e7bd528910a" args="(char **data_out, int *out_len, const char *data_in, const int in_len, const char *code, const int code_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a81c34fab7ffe2584f17e2e7bd528910a">ccnet_encrypt</a> </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>in_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>code_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01561">1561</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    *data_out = NULL;
    *out_len = -1;

    <span class="comment">/* check validation */</span>
    <span class="keywordflow">if</span> ( data_in == NULL || in_len &lt;= 0 ||
         code == NULL || code_len &lt;= 0) {

        g_warning (<span class="stringliteral">&quot;Invalid params.\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    EVP_CIPHER_CTX ctx;
    <span class="keywordtype">int</span> ret, <a class="code" href="block-tx-utils_8h.html#acb7060b2ddf9e95be5ca9fd29e252770">key_len</a>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> key[16], iv[16];
    <span class="keywordtype">int</span> blks;                   

    
    <span class="comment">/* Generate the derived key. We use AES 128 bits key,</span>
<span class="comment">       Electroic-Code-Book cipher mode, and SHA1 as the message digest</span>
<span class="comment">       when generating the key. IV is not used in ecb mode,</span>
<span class="comment">       actually. */</span>
    key_len  = EVP_BytesToKey (EVP_aes_128_ecb(), <span class="comment">/* cipher mode */</span>
                               EVP_sha1(),        <span class="comment">/* message digest */</span>
                               NULL,              <span class="comment">/* salt */</span>
                               (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)code, <span class="comment">/* passwd */</span>
                               code_len,
                               3,   <span class="comment">/* iteration times */</span>
                               key, <span class="comment">/* the derived key */</span>
                               iv); <span class="comment">/* IV, initial vector */</span>

    <span class="comment">/* The key should be 16 bytes long for our 128 bit key. */</span>
    <span class="keywordflow">if</span> (key_len != 16) {
        g_warning (<span class="stringliteral">&quot;failed to init EVP_CIPHER_CTX.\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="comment">/* Prepare CTX for encryption. */</span>
    EVP_CIPHER_CTX_init (&amp;ctx);

    ret = EVP_EncryptInit_ex (&amp;ctx,
                              EVP_aes_128_ecb(), <span class="comment">/* cipher mode */</span>
                              NULL, <span class="comment">/* engine, NULL for default */</span>
                              key,  <span class="comment">/* derived key */</span>
                              iv);  <span class="comment">/* initial vector */</span>

    <span class="keywordflow">if</span> (ret == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a22b00c5a64444ba20bedd53f9b0354e4">ENC_FAILURE</a>)
        <span class="keywordflow">return</span> -1;

    <span class="comment">/* Allocating output buffer. */</span>
    
    <span class="comment">/*</span>
<span class="comment">      For EVP symmetric encryption, padding is always used __even if__</span>
<span class="comment">      data size is a multiple of block size, in which case the padding</span>
<span class="comment">      length is the block size. so we have the following:</span>
<span class="comment">    */</span>
    
    blks = (in_len / <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a5394435edf20efdffac70b5c362ade81">BLK_SIZE</a>) + 1;

    *data_out = (<span class="keywordtype">char</span> *)g_malloc (blks * <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a5394435edf20efdffac70b5c362ade81">BLK_SIZE</a>);

    <span class="keywordflow">if</span> (*data_out == NULL) {
        g_warning (<span class="stringliteral">&quot;failed to allocate the output buffer.\n&quot;</span>);
        <span class="keywordflow">goto</span> enc_error;
    }                

    <span class="keywordtype">int</span> update_len, final_len;

    <span class="comment">/* Do the encryption. */</span>
    ret = EVP_EncryptUpdate (&amp;ctx,
                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)*data_out,
                             &amp;update_len,
                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)data_in,
                             in_len);

    <span class="keywordflow">if</span> (ret == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a22b00c5a64444ba20bedd53f9b0354e4">ENC_FAILURE</a>)
        <span class="keywordflow">goto</span> enc_error;


    <span class="comment">/* Finish the possible partial block. */</span>
    ret = EVP_EncryptFinal_ex (&amp;ctx,
                               (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)*data_out + update_len,
                               &amp;final_len);

    *out_len = update_len + final_len;

    <span class="comment">/* out_len should be equal to the allocated buffer size. */</span>
    <span class="keywordflow">if</span> (ret == <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a22b00c5a64444ba20bedd53f9b0354e4">ENC_FAILURE</a> || *out_len != (blks * BLK_SIZE))
        <span class="keywordflow">goto</span> enc_error;
    
    EVP_CIPHER_CTX_cleanup (&amp;ctx);

    <span class="keywordflow">return</span> 0;

enc_error:

    EVP_CIPHER_CTX_cleanup (&amp;ctx);

    *out_len = -1;

    <span class="keywordflow">if</span> (*data_out != NULL)
        g_free (*data_out);

    *data_out = NULL;

    <span class="keywordflow">return</span> -1;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad52e8a09737b9afc6375f8cee7336d7d"></a><!-- doxytag: member="utils.h::ccnet_expand_path" ref="ad52e8a09737b9afc6375f8cee7336d7d" args="(const char *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ad52e8a09737b9afc6375f8cee7336d7d">ccnet_expand_path</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00869">869</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">char</span> new_path[<a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a> + 1];
    <span class="keywordtype">char</span> *p = new_path;
    <span class="keyword">const</span> <span class="keywordtype">char</span> *q = src;

    memset(new_path, 0, <span class="keyword">sizeof</span>(new_path));
    <span class="keywordflow">if</span> (*src == <span class="charliteral">&#39;~&#39;</span>) {
        <span class="keyword">const</span> <span class="keywordtype">char</span> *home = g_get_home_dir();
        memcpy(new_path, home, strlen(home));
        p += strlen(new_path);
        q++;
    }
    memcpy(p, q, strlen(q));

    <span class="comment">/* delete the charactor &#39;\&#39; or &#39;/&#39; at the end of the path</span>
<span class="comment">     * because the function stat faied to deal with directory names</span>
<span class="comment">     * with &#39;\&#39; or &#39;/&#39; in the end */</span>
    p = new_path + strlen(new_path) - 1;
    <span class="keywordflow">while</span>(*p == <span class="charliteral">&#39;\\&#39;</span> || *p == <span class="charliteral">&#39;/&#39;</span>) *p-- = <span class="charliteral">&#39;\0&#39;</span>;

    <span class="keywordflow">return</span> strdup (new_path);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *next_in, *ntoken;
    <span class="keywordtype">char</span> new_path[<a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a> + 1];
    <span class="keywordtype">char</span> *next_out;
    <span class="keywordtype">int</span> len;

   <span class="comment">/* special cases */</span>
    <span class="keywordflow">if</span> (!src || *src == <span class="charliteral">&#39;\0&#39;</span>)
        <span class="keywordflow">return</span> NULL;
    <span class="keywordflow">if</span> (strlen(src) &gt; <a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a>)
        <span class="keywordflow">return</span> NULL;

    next_in = src;
    next_out = new_path;
    *next_out = <span class="charliteral">&#39;\0&#39;</span>;

    <span class="keywordflow">if</span> (*src == <span class="charliteral">&#39;~&#39;</span>) {
        <span class="comment">/* handle src start with &#39;~&#39; or &#39;~&lt;user&gt;&#39; like &#39;~plt&#39; */</span>
        <span class="keyword">struct </span>passwd *pw = NULL;

        <span class="keywordflow">for</span> ( ; *next_in != <span class="charliteral">&#39;/&#39;</span> &amp;&amp; *next_in != <span class="charliteral">&#39;\0&#39;</span>; next_in++) ;
        
        len = next_in - src;
        <span class="keywordflow">if</span> (len == 1) {
            pw = getpwuid (geteuid());
        } <span class="keywordflow">else</span> {
            <span class="comment">/* copy &#39;~&lt;user&gt;&#39; to new_path */</span>
            memcpy (new_path, src, len);
            new_path[len] = <span class="charliteral">&#39;\0&#39;</span>;
            pw = getpwnam (new_path + 1);
        }
        <span class="keywordflow">if</span> (pw == NULL)
            <span class="keywordflow">return</span> NULL;
       
        len = strlen (pw-&gt;pw_dir);
        memcpy (new_path, pw-&gt;pw_dir, len);
        next_out = new_path + len;
        *next_out = <span class="charliteral">&#39;\0&#39;</span>;

        <span class="keywordflow">if</span> (*next_in == <span class="charliteral">&#39;\0&#39;</span>)
            <span class="keywordflow">return</span> strdup (new_path);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*src != <span class="charliteral">&#39;/&#39;</span>) {
        getcwd (new_path, <a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a>);
        <span class="keywordflow">for</span> ( ; *next_out; next_out++) ; <span class="comment">/* to &#39;\0&#39; */</span>
    }
    
    <span class="keywordflow">while</span> (*next_in != <span class="charliteral">&#39;\0&#39;</span>) {
        <span class="comment">/* move ntoken to the next not &#39;/&#39; char  */</span>
        <span class="keywordflow">for</span> (ntoken = next_in; *ntoken == <span class="charliteral">&#39;/&#39;</span>; ntoken++) ;

        <span class="keywordflow">for</span> (next_in = ntoken; *next_in != <span class="charliteral">&#39;/&#39;</span> 
                 &amp;&amp; *next_in != <span class="charliteral">&#39;\0&#39;</span>; next_in++) ;
 
        len = next_in - ntoken;

        <span class="keywordflow">if</span> (len == 0) {
            <span class="comment">/* the path ends with &#39;/&#39;, keep it */</span>
            *next_out++ = <span class="charliteral">&#39;/&#39;</span>;
            *next_out = <span class="charliteral">&#39;\0&#39;</span>;
            <span class="keywordflow">break</span>;
        }

        <span class="keywordflow">if</span> (len == 2 &amp;&amp; ntoken[0] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; ntoken[1] == <span class="charliteral">&#39;.&#39;</span>) 
        {
            <span class="comment">/* &#39;..&#39; */</span>
            <span class="keywordflow">for</span> (; next_out &gt; new_path &amp;&amp; *next_out != <span class="charliteral">&#39;/&#39;</span>; next_out--)
                ;
            *next_out = <span class="charliteral">&#39;\0&#39;</span>;
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ntoken[0] != <span class="charliteral">&#39;.&#39;</span> || len != 1) {
            <span class="comment">/* not &#39;.&#39; */</span>
            *next_out++ = <span class="charliteral">&#39;/&#39;</span>;
            memcpy (next_out, ntoken, len);
            next_out += len;
            *next_out = <span class="charliteral">&#39;\0&#39;</span>;
        }
    }

    <span class="comment">/* the final special case */</span>
    <span class="keywordflow">if</span> (new_path[0] == <span class="charliteral">&#39;\0&#39;</span>) {
        new_path[0] = <span class="charliteral">&#39;/&#39;</span>;
        new_path[1] = <span class="charliteral">&#39;\0&#39;</span>;
    }
    <span class="keywordflow">return</span> strdup (new_path);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="aae72852955df5bdfc8bb72a36a0f8808"></a><!-- doxytag: member="utils.h::ccnet_key_file_get_string" ref="aae72852955df5bdfc8bb72a36a0f8808" args="(GKeyFile *keyf, const char *category, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gchar* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#aae72852955df5bdfc8bb72a36a0f8808">ccnet_key_file_get_string</a> </td>
          <td>(</td>
          <td class="paramtype">GKeyFile *&#160;</td>
          <td class="paramname"><em>keyf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>handle the empty string problem. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01281">1281</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    gchar *v;

    <span class="keywordflow">if</span> (!g_key_file_has_key (keyf, category, key, NULL))
        <span class="keywordflow">return</span> NULL;

    v = g_key_file_get_string (keyf, category, key, NULL);
    <span class="keywordflow">if</span> (v != NULL &amp;&amp; v[0] == <span class="charliteral">&#39;\0&#39;</span>) {
        g_free(v);
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">return</span> v;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad05e32bdab25b5e5ba3f36a640b30cc8"></a><!-- doxytag: member="utils.h::ccnet_locale_from_utf8" ref="ad05e32bdab25b5e5ba3f36a640b30cc8" args="(const gchar *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ad05e32bdab25b5e5ba3f36a640b30cc8">ccnet_locale_from_utf8</a> </td>
          <td>(</td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01809">1809</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!src)
        <span class="keywordflow">return</span> NULL;

    gsize bytes_read = 0;
    gsize bytes_written = 0;
    GError *error = NULL;
    gchar *dst = NULL;

    dst = g_locale_from_utf8
        (src,                   <span class="comment">/* locale specific string */</span>
         strlen(src),           <span class="comment">/* len of src */</span>
         &amp;bytes_read,           <span class="comment">/* length processed */</span>
         &amp;bytes_written,        <span class="comment">/* output length */</span>
         &amp;error);

    <span class="keywordflow">if</span> (error) {
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">return</span> dst;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a927b2cab4b163cb58c078fb4158f6f82"></a><!-- doxytag: member="utils.h::ccnet_locale_to_utf8" ref="a927b2cab4b163cb58c078fb4158f6f82" args="(const gchar *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a927b2cab4b163cb58c078fb4158f6f82">ccnet_locale_to_utf8</a> </td>
          <td>(</td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01784">1784</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!src)
        <span class="keywordflow">return</span> NULL;

    gsize bytes_read = 0;
    gsize bytes_written = 0;
    GError *error = NULL;
    gchar *dst = NULL;

    dst = g_locale_to_utf8
        (src,                   <span class="comment">/* locale specific string */</span>
         strlen(src),           <span class="comment">/* len of src */</span>
         &amp;bytes_read,           <span class="comment">/* length processed */</span>
         &amp;bytes_written,        <span class="comment">/* output length */</span>
         &amp;error);

    <span class="keywordflow">if</span> (error) {
        <span class="keywordflow">return</span> NULL;
    }

    <span class="keywordflow">return</span> dst;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5241dfe016bb295dddd19c1f8b6f62d4"></a><!-- doxytag: member="utils.h::ccnet_object_type_from_id" ref="a5241dfe016bb295dddd19c1f8b6f62d4" args="(const char *object_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a5241dfe016bb295dddd19c1f8b6f62d4">ccnet_object_type_from_id</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02191">2191</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *ptr;

    <span class="keywordflow">if</span> ( !(ptr = strchr(object_id, <span class="charliteral">&#39;/&#39;</span>)) )
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">return</span> g_strndup(object_id, ptr - object_id);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a75a7a2a1400f4cf5f6cd5ea988e705f4"></a><!-- doxytag: member="utils.h::ccnet_sha1_equal" ref="a75a7a2a1400f4cf5f6cd5ea988e705f4" args="(const void *v1, const void *v2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a75a7a2a1400f4cf5f6cd5ea988e705f4">ccnet_sha1_equal</a> </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01008">1008</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1 = v1;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p2 = v2;
    <span class="keywordtype">int</span> i;

    <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++)
        <span class="keywordflow">if</span> (p1[i] != p2[i])
            <span class="keywordflow">return</span> 0;
    
    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac7b2f63c70899294f90c31e2213124a5"></a><!-- doxytag: member="utils.h::ccnet_sha1_hash" ref="ac7b2f63c70899294f90c31e2213124a5" args="(const void *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ac7b2f63c70899294f90c31e2213124a5">ccnet_sha1_hash</a> </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00994">994</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* 31 bit hash function */</span>
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p = v;
    uint32_t h = 0;
    <span class="keywordtype">int</span> i;

    <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++)
        h = (h &lt;&lt; 5) - h + p[i];

    <span class="keywordflow">return</span> h;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3d589cfe89ac99c0557894fafe909892"></a><!-- doxytag: member="utils.h::ccnet_strlcpy" ref="a3d589cfe89ac99c0557894fafe909892" args="(char *dst, const char *src, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a3d589cfe89ac99c0557894fafe909892">ccnet_strlcpy</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00112">112</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">size_t</span> ret = strlen(src);

    <span class="keywordflow">if</span> (<a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>) {
        <span class="keywordtype">size_t</span> len = (ret &gt;= <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a>) ? <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a> - 1 : ret;
        memcpy(dest, src, len);
        dest[len] = <span class="charliteral">&#39;\0&#39;</span>;
    }
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8972f29db121d2c77a167b5ad4942d94"></a><!-- doxytag: member="utils.h::checkdir" ref="a8972f29db121d2c77a167b5ad4942d94" args="(const char *dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a8972f29db121d2c77a167b5ad4942d94">checkdir</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00126">126</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> st;

<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="comment">/* remove trailing &#39;\\&#39; */</span>
    <span class="keywordtype">char</span> *path = g_strdup(dir);
    <span class="keywordtype">char</span> *p = (<span class="keywordtype">char</span> *)path + strlen(path) - 1;
    <span class="keywordflow">while</span> (*p == <span class="charliteral">&#39;\\&#39;</span> || *p == <span class="charliteral">&#39;/&#39;</span>) *p-- = <span class="charliteral">&#39;\0&#39;</span>;
    <span class="keywordflow">if</span> ((<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ab46893ad4a68049bcd80eac8dcc2e299">seaf_stat</a>(dir, &amp;st) &lt; 0) || !S_ISDIR(st.st_mode)) {
        g_free (path);
        <span class="keywordflow">return</span> -1;
    }
    g_free (path);
    <span class="keywordflow">return</span> 0;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ((<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ab46893ad4a68049bcd80eac8dcc2e299">seaf_stat</a>(dir, &amp;st) &lt; 0) || !S_ISDIR(st.st_mode))
        <span class="keywordflow">return</span> -1;
    <span class="keywordflow">return</span> 0;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ac76d93d4c338c30fe27f11e3dbe59c2d"></a><!-- doxytag: member="utils.h::checkdir_with_mkdir" ref="ac76d93d4c338c30fe27f11e3dbe59c2d" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ac76d93d4c338c30fe27f11e3dbe59c2d">checkdir_with_mkdir</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00149">149</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">int</span> ret;
    <span class="keywordtype">char</span> *path = g_strdup(dir);
    <span class="keywordtype">char</span> *p = (<span class="keywordtype">char</span> *)path + strlen(path) - 1;
    <span class="keywordflow">while</span> (*p == <span class="charliteral">&#39;\\&#39;</span> || *p == <span class="charliteral">&#39;/&#39;</span>) *p-- = <span class="charliteral">&#39;\0&#39;</span>;
    ret = g_mkdir_with_parents(path, 0755);
    g_free (path);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> g_mkdir_with_parents(dir, 0755);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ae476843508927222a51125ac1c7fec2b"></a><!-- doxytag: member="utils.h::clean_utf8_data" ref="ae476843508927222a51125ac1c7fec2b" args="(char *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ae476843508927222a51125ac1c7fec2b">clean_utf8_data</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02348">2348</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> *s, *e;
    <span class="keywordtype">char</span> *p;
    gboolean is_valid;

    s = data;
    p = data;

    <span class="keywordflow">while</span> ((s - data) != len) {
        is_valid = g_utf8_validate (s, len - (s - data), &amp;e);
        <span class="keywordflow">if</span> (is_valid)
            <span class="keywordflow">break</span>;

        <span class="keywordflow">if</span> (s != e)
            p += (e - s);
        *p = <span class="charliteral">&#39;?&#39;</span>;
        ++p;
        s = e + 1;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8e7da7ad650a6da09c1f679479335ed1"></a><!-- doxytag: member="utils.h::copy_fd" ref="a8e7da7ad650a6da09c1f679479335ed1" args="(int ifd, int ofd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a8e7da7ad650a6da09c1f679479335ed1">copy_fd</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ifd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ofd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00825">825</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span> (1) {
        <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a>[8192];
        ssize_t len = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a05f0eae648599d413d03103758473e30">readn</a> (ifd, buffer, <span class="keyword">sizeof</span>(buffer));
        <span class="keywordflow">if</span> (!len)
            <span class="keywordflow">break</span>;
        <span class="keywordflow">if</span> (len &lt; 0) {
            close (ifd);
            <span class="keywordflow">return</span> -1;
        }
        <span class="keywordflow">if</span> (<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a6a9988632dc9e05f10a71688fd280cc9">writen</a> (ofd, buffer, len) &lt; 0) {
            close (ofd);
            <span class="keywordflow">return</span> -1;
        }
    }
    close(ifd);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f585ff92128cbf174ef4b3a9b429d08"></a><!-- doxytag: member="utils.h::copy_file" ref="a9f585ff92128cbf174ef4b3a9b429d08" args="(const char *dst, const char *src, int mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a9f585ff92128cbf174ef4b3a9b429d08">copy_file</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00845">845</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> fdi, fdo, <a class="code" href="block-tx-utils_8h.html#a2aaa5f99cdedb08950d78469e9e64edc">status</a>;

    <span class="keywordflow">if</span> ((fdi = g_open (src, O_RDONLY | O_BINARY, 0)) &lt; 0)
        <span class="keywordflow">return</span> fdi;

    fdo = g_open (dst, O_WRONLY | O_CREAT | O_EXCL | O_BINARY, <a class="code" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>);
    <span class="keywordflow">if</span> (fdo &lt; 0 &amp;&amp; errno == EEXIST) {
        close (fdi);
        <span class="keywordflow">return</span> 0;
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fdo &lt; 0){
        close (fdi);
        <span class="keywordflow">return</span> -1;
    }

    status = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a8e7da7ad650a6da09c1f679479335ed1">copy_fd</a> (fdi, fdo);
    <span class="keywordflow">if</span> (close (fdo) != 0)
        <span class="keywordflow">return</span> -1;

    <span class="keywordflow">return</span> <a class="code" href="block-tx-utils_8h.html#a2aaa5f99cdedb08950d78469e9e64edc">status</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab9c0a9dedc99842d121b9bb9a9f54515"></a><!-- doxytag: member="utils.h::count_process" ref="ab9c0a9dedc99842d121b9bb9a9f54515" args="(const char *process_name_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab9c0a9dedc99842d121b9bb9a9f54515">count_process</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>process_name_in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af64020f0be33abde6a2a076ff9808809"></a><!-- doxytag: member="utils.h::gen_uuid" ref="af64020f0be33abde6a2a076ff9808809" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#af64020f0be33abde6a2a076ff9808809">gen_uuid</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01023">1023</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *uuid_str = g_malloc (37);
    uuid_t uuid;

    uuid_generate (uuid);
    uuid_unparse_lower (uuid, uuid_str);

    <span class="keywordflow">return</span> uuid_str;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab141c69bb8e435339193ac2062007c7c"></a><!-- doxytag: member="utils.h::gen_uuid_inplace" ref="ab141c69bb8e435339193ac2062007c7c" args="(char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab141c69bb8e435339193ac2062007c7c">gen_uuid_inplace</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01034">1034</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    uuid_t uuid;

    uuid_generate (uuid);
    uuid_unparse_lower (uuid, buf);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a676d54675053cd9d9afefabd10a454"></a><!-- doxytag: member="utils.h::get_current_time" ref="a6a676d54675053cd9d9afefabd10a454" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gint64 <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a6a676d54675053cd9d9afefabd10a454">get_current_time</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01468">1468</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GTimeVal tv;
    gint64 t;

    g_get_current_time (&amp;tv);
    t = tv.tv_sec * (gint64)1000000 + tv.tv_usec;
    <span class="keywordflow">return</span> t;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a130e83c1ad29d78ef1a5b6baef1754d5"></a><!-- doxytag: member="utils.h::hex_to_rawdata" ref="a130e83c1ad29d78ef1a5b6baef1754d5" args="(const char *hex_str, unsigned char *rawdata, int n_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a130e83c1ad29d78ef1a5b6baef1754d5">hex_to_rawdata</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hex_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rawdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00098">98</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    <span class="keywordflow">for</span> (i = 0; i &lt; n_bytes; i++) {
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> val = (hexval(hex_str[0]) &lt;&lt; 4) | hexval(hex_str[1]);
        <span class="keywordflow">if</span> (val &amp; ~0xff)
            <span class="keywordflow">return</span> -1;
        *rawdata++ = val;
        hex_str += 2;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="add6d17882e0d7270ec07dd51151f2b9a"></a><!-- doxytag: member="utils.h::is_ipaddr_valid" ref="add6d17882e0d7270ec07dd51151f2b9a" args="(const char *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#add6d17882e0d7270ec07dd51151f2b9a">is_ipaddr_valid</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01203">1203</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[<span class="keyword">sizeof</span>(<span class="keyword">struct </span>in6_addr)];

    <span class="keywordflow">if</span> (evutil_inet_pton(AF_INET, ip, buf) == 1)
        <span class="keywordflow">return</span> TRUE;

    <span class="keywordflow">if</span> (evutil_inet_pton(AF_INET6, ip, buf) == 1)
        <span class="keywordflow">return</span> TRUE;
    
    <span class="keywordflow">return</span> FALSE;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48ecdc72b727191abafbbf2ec1f70ace"></a><!-- doxytag: member="utils.h::is_uuid_valid" ref="a48ecdc72b727191abafbbf2ec1f70ace" args="(const char *uuid_str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a48ecdc72b727191abafbbf2ec1f70ace">is_uuid_valid</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uuid_str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01043">1043</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    uuid_t uuid;

    <span class="keywordflow">if</span> (uuid_parse (uuid_str, uuid) &lt; 0)
        <span class="keywordflow">return</span> FALSE;
    <span class="keywordflow">return</span> TRUE;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a36802b9b311cdc4cd847b79c4ddd5903"></a><!-- doxytag: member="utils.h::json_object_get_int_member" ref="a36802b9b311cdc4cd847b79c4ddd5903" args="(json_t *object, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gint64 <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a36802b9b311cdc4cd847b79c4ddd5903">json_object_get_int_member</a> </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02329">2329</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    json_t *integer = json_object_get (<span class="keywordtype">object</span>, key);
    <span class="keywordflow">return</span> json_integer_value (integer);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50be04624e628ad19aa88d9fc0fd5a28"></a><!-- doxytag: member="utils.h::json_object_get_string_member" ref="a50be04624e628ad19aa88d9fc0fd5a28" args="(json_t *object, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a50be04624e628ad19aa88d9fc0fd5a28">json_object_get_string_member</a> </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02314">2314</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    json_t *<span class="keywordtype">string</span> = json_object_get (<span class="keywordtype">object</span>, key);
    <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>)
        <span class="keywordflow">return</span> NULL;
    <span class="keywordflow">return</span> json_string_value (<span class="keywordtype">string</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af3fcfc36aa8248b0c8932e5c3e51f3fc"></a><!-- doxytag: member="utils.h::json_object_has_member" ref="af3fcfc36aa8248b0c8932e5c3e51f3fc" args="(json_t *object, const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#af3fcfc36aa8248b0c8932e5c3e51f3fc">json_object_has_member</a> </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02323">2323</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> (json_object_get (<span class="keywordtype">object</span>, key) != NULL);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abfac2ec06b36f64de2f110f093e6dfc0"></a><!-- doxytag: member="utils.h::json_object_set_int_member" ref="abfac2ec06b36f64de2f110f093e6dfc0" args="(json_t *object, const char *key, gint64 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#abfac2ec06b36f64de2f110f093e6dfc0">json_object_set_int_member</a> </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gint64&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02342">2342</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    json_object_set_new (<span class="keywordtype">object</span>, key, json_integer (value));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a178267416f18a24c6d717db8ad91c471"></a><!-- doxytag: member="utils.h::json_object_set_string_member" ref="a178267416f18a24c6d717db8ad91c471" args="(json_t *object, const char *key, const char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a178267416f18a24c6d717db8ad91c471">json_object_set_string_member</a> </td>
          <td>(</td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02336">2336</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    json_object_set_new (<span class="keywordtype">object</span>, key, json_string (value));
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc99dd2106bfcedb4fef8a2f1ecd1b8a"></a><!-- doxytag: member="utils.h::ncopy_string_array" ref="acc99dd2106bfcedb4fef8a2f1ecd1b8a" args="(char **orig, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#acc99dd2106bfcedb4fef8a2f1ecd1b8a">ncopy_string_array</a> </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01447">1447</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> **ret = g_malloc (<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * n);
    <span class="keywordtype">int</span> i = 0;

    <span class="keywordflow">for</span> (; i &lt; n; i++)
        ret[i] = g_strdup(orig[i]);
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4934aa80d54625fa9d2505f13117f4a0"></a><!-- doxytag: member="utils.h::nfree_string_array" ref="a4934aa80d54625fa9d2505f13117f4a0" args="(char **array, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a4934aa80d54625fa9d2505f13117f4a0">nfree_string_array</a> </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01458">1458</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i = 0;

    <span class="keywordflow">for</span> (; i &lt; n; i++)
        g_free (array[i]);
    g_free (array);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8e393e1fd0d1d9d0057ebd24a561c1b"></a><!-- doxytag: member="utils.h::objstore_get_path" ref="ac8e393e1fd0d1d9d0057ebd24a561c1b" args="(char *path, const char *base, const char *obj_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ac8e393e1fd0d1d9d0057ebd24a561c1b">objstore_get_path</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>obj_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00192">192</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> len;

    len = strlen(base);
    memcpy(path, base, len);
    path[len] = G_DIR_SEPARATOR;
    path[len+1] = <a class="code" href="Backups_2http-server_8c.html#acdc8b2e33d61c23557d7e7563f00ef6f">obj_id</a>[0];
    path[len+2] = <a class="code" href="Backups_2http-server_8c.html#acdc8b2e33d61c23557d7e7563f00ef6f">obj_id</a>[1];
    path[len+3] = G_DIR_SEPARATOR;
    strcpy(path+len+4, <a class="code" href="Backups_2http-server_8c.html#acdc8b2e33d61c23557d7e7563f00ef6f">obj_id</a>+2);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a332e0543b63f5b18d4fa81eaf09922fc"></a><!-- doxytag: member="utils.h::objstore_mkdir" ref="a332e0543b63f5b18d4fa81eaf09922fc" args="(const char *base)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a332e0543b63f5b18d4fa81eaf09922fc">objstore_mkdir</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>base</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Make directory with 256 sub-directories from '00' to 'ff'. `base` and subdir will be created if they are not existing. </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00165">165</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> ret;
    <span class="keywordtype">int</span> i, j, len;
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> hex[] = <span class="stringliteral">&quot;0123456789abcdef&quot;</span>;
    <span class="keywordtype">char</span> subdir[<a class="code" href="seafile-4_81_82_2common_2common_8h.html#a169a119979344433b9e2a39e4e8e334a">SEAF_PATH_MAX</a>];

    <span class="keywordflow">if</span> ( (ret = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ace0bdb78b60b2d088517a3e03a448e8b">checkdir_with_mkdir</a>(base)) &lt; 0)
        <span class="keywordflow">return</span> ret;

    len = strlen(base);
    memcpy(subdir, base, len);
    subdir[len] = G_DIR_SEPARATOR;
    subdir[len+3] = <span class="charliteral">&#39;\0&#39;</span>;

    <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++) {
        subdir[len+1] = hex[i];
        <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {
            subdir[len+2] = hex[j];
            <span class="keywordflow">if</span> ( (ret = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ace0bdb78b60b2d088517a3e03a448e8b">checkdir_with_mkdir</a>(subdir)) &lt; 0)
                <span class="keywordflow">return</span> ret;
        }
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e3be562436695c4865957e2790b1da8"></a><!-- doxytag: member="utils.h::parse_key_value_pairs" ref="a3e3be562436695c4865957e2790b1da8" args="(char *string, KeyValueFunc func, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a3e3be562436695c4865957e2790b1da8">parse_key_value_pairs</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a4bc6467da0bdec670824a164c007e1a8">KeyValueFunc</a>&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01216">1216</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *line = string, *next, *space;
    <span class="keywordtype">char</span> *key, *value;

    <span class="keywordflow">while</span> (*line) {
        <span class="comment">/* handle empty line */</span>
        <span class="keywordflow">if</span> (*line == <span class="charliteral">&#39;\n&#39;</span>) {
            ++line;
            <span class="keywordflow">continue</span>;
        }

        <span class="keywordflow">for</span> (next = line; *next != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; *next; ++next) ;
        *next = <span class="charliteral">&#39;\0&#39;</span>;
        
        <span class="keywordflow">for</span> (space = line; space &lt; next &amp;&amp; *space != <span class="charliteral">&#39; &#39;</span>; ++space) ;
        <span class="keywordflow">if</span> (*space != <span class="charliteral">&#39; &#39;</span>) {
            g_warning (<span class="stringliteral">&quot;Bad key value format: %s\n&quot;</span>, line);
            <span class="keywordflow">return</span>;
        }
        *space = <span class="charliteral">&#39;\0&#39;</span>;
        key = line;
        value = space + 1;
        
        func (data, key, value);

        line = next + 1;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d7d7513a3e6fb072e6ce9b630097634"></a><!-- doxytag: member="utils.h::parse_key_value_pairs2" ref="a2d7d7513a3e6fb072e6ce9b630097634" args="(char *string, KeyValueFunc2 func, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a2d7d7513a3e6fb072e6ce9b630097634">parse_key_value_pairs2</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab8819219965036f1df6aad17bd9503c7">KeyValueFunc2</a>&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01246">1246</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *line = string, *next, *space;
    <span class="keywordtype">char</span> *key, *value;

    <span class="keywordflow">while</span> (*line) {
        <span class="comment">/* handle empty line */</span>
        <span class="keywordflow">if</span> (*line == <span class="charliteral">&#39;\n&#39;</span>) {
            ++line;
            <span class="keywordflow">continue</span>;
        }

        <span class="keywordflow">for</span> (next = line; *next != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; *next; ++next) ;
        *next = <span class="charliteral">&#39;\0&#39;</span>;
        
        <span class="keywordflow">for</span> (space = line; space &lt; next &amp;&amp; *space != <span class="charliteral">&#39; &#39;</span>; ++space) ;
        <span class="keywordflow">if</span> (*space != <span class="charliteral">&#39; &#39;</span>) {
            g_warning (<span class="stringliteral">&quot;Bad key value format: %s\n&quot;</span>, line);
            <span class="keywordflow">return</span>;
        }
        *space = <span class="charliteral">&#39;\0&#39;</span>;
        key = line;
        value = space + 1;
        
        <span class="keywordflow">if</span> (func(data, key, value) == FALSE)
            <span class="keywordflow">break</span>;

        line = next + 1;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3434241b665ef5363ba0459e40dc5733"></a><!-- doxytag: member="utils.h::process_is_running" ref="a3434241b665ef5363ba0459e40dc5733" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a3434241b665ef5363ba0459e40dc5733">process_is_running</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae947b53110fc0132e83445d76ddded09"></a><!-- doxytag: member="utils.h::rawdata_to_hex" ref="ae947b53110fc0132e83445d76ddded09" args="(const unsigned char *rawdata, char *hex_str, int n_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ae947b53110fc0132e83445d76ddded09">rawdata_to_hex</a> </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>rawdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>hex_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00073">73</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> hex[] = <span class="stringliteral">&quot;0123456789abcdef&quot;</span>;
    <span class="keywordtype">int</span> i;

    <span class="keywordflow">for</span> (i = 0; i &lt; n_bytes; i++) {
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> val = *rawdata++;
        *hex_str++ = hex[val &gt;&gt; 4];
        *hex_str++ = hex[val &amp; 0xf];
    }
    *hex_str = <span class="charliteral">&#39;\0&#39;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05f0eae648599d413d03103758473e30"></a><!-- doxytag: member="utils.h::readn" ref="a05f0eae648599d413d03103758473e30" args="(int fd, void *vptr, size_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a05f0eae648599d413d03103758473e30">readn</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00721">721</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span>  nleft;
        ssize_t nread;
        <span class="keywordtype">char</span>    *ptr;

        ptr = vptr;
        nleft = n;
        <span class="keywordflow">while</span> (nleft &gt; 0) {
                <span class="keywordflow">if</span> ( (nread = read(fd, ptr, nleft)) &lt; 0) {
                        <span class="keywordflow">if</span> (errno == EINTR)
                                nread = 0;              <span class="comment">/* and call read() again */</span>
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span>(-1);
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nread == 0)
                        <span class="keywordflow">break</span>;                          <span class="comment">/* EOF */</span>

                nleft -= nread;
                ptr   += nread;
        }
        <span class="keywordflow">return</span>(n - nleft);              <span class="comment">/* return &gt;= 0 */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a94142a37553a5232b714c3e1b4d91d92"></a><!-- doxytag: member="utils.h::recvn" ref="a94142a37553a5232b714c3e1b4d91d92" args="(evutil_socket_t fd, void *vptr, size_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a94142a37553a5232b714c3e1b4d91d92">recvn</a> </td>
          <td>(</td>
          <td class="paramtype">evutil_socket_t&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ace06e9888a8adf6cd341163d3f7f504f"></a><!-- doxytag: member="utils.h::seaf_compress" ref="ace06e9888a8adf6cd341163d3f7f504f" args="(guint8 *input, int inlen, guint8 **output, int *outlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ace06e9888a8adf6cd341163d3f7f504f">seaf_compress</a> </td>
          <td>(</td>
          <td class="paramtype">guint8 *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>inlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">guint8 **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>outlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02375">2375</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> ret;
    <span class="keywordtype">unsigned</span> have;
    z_stream strm;
    guint8 out[<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aee79ea870e3b3807cae3db5655993a7e">ZLIB_BUF_SIZE</a>];
    GByteArray *barray;

    <span class="keywordflow">if</span> (inlen == 0)
        <span class="keywordflow">return</span> -1;

    <span class="comment">/* allocate deflate state */</span>
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    ret = deflateInit(&amp;strm, Z_DEFAULT_COMPRESSION);
    <span class="keywordflow">if</span> (ret != Z_OK) {
        g_warning (<span class="stringliteral">&quot;deflateInit failed.\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    strm.avail_in = inlen;
    strm.next_in = input;
    barray = g_byte_array_new ();

    <span class="keywordflow">do</span> {
        strm.avail_out = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aee79ea870e3b3807cae3db5655993a7e">ZLIB_BUF_SIZE</a>;
        strm.next_out = out;
        ret = deflate(&amp;strm, Z_FINISH);    <span class="comment">/* no bad return value */</span>
        have = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aee79ea870e3b3807cae3db5655993a7e">ZLIB_BUF_SIZE</a> - strm.avail_out;
        g_byte_array_append (barray, out, have);
    } <span class="keywordflow">while</span> (ret != Z_STREAM_END);

    *outlen = barray-&gt;len;
    *output = g_byte_array_free (barray, FALSE);

    <span class="comment">/* clean up and return */</span>
    (void)deflateEnd(&amp;strm);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac7d9f3eae8999794ca0f59cab62c486e"></a><!-- doxytag: member="utils.h::seaf_decompress" ref="ac7d9f3eae8999794ca0f59cab62c486e" args="(guint8 *input, int inlen, guint8 **output, int *outlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ac7d9f3eae8999794ca0f59cab62c486e">seaf_decompress</a> </td>
          <td>(</td>
          <td class="paramtype">guint8 *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>inlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">guint8 **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>outlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l02417">2417</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> ret;
    <span class="keywordtype">unsigned</span> have;
    z_stream strm;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aee79ea870e3b3807cae3db5655993a7e">ZLIB_BUF_SIZE</a>];
    GByteArray *barray;

    <span class="keywordflow">if</span> (inlen == 0) {
        g_warning (<span class="stringliteral">&quot;Empty input for zlib, invalid.\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    <span class="comment">/* allocate inflate state */</span>
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    strm.avail_in = 0;
    strm.next_in = Z_NULL;
    ret = inflateInit(&amp;strm);
    <span class="keywordflow">if</span> (ret != Z_OK) {
        g_warning (<span class="stringliteral">&quot;inflateInit failed.\n&quot;</span>);
        <span class="keywordflow">return</span> -1;
    }

    strm.avail_in = inlen;
    strm.next_in = input;
    barray = g_byte_array_new ();

    <span class="keywordflow">do</span> {
        strm.avail_out = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aee79ea870e3b3807cae3db5655993a7e">ZLIB_BUF_SIZE</a>;
        strm.next_out = out;
        ret = inflate(&amp;strm, Z_NO_FLUSH);
        <span class="keywordflow">switch</span> (ret) {
        <span class="keywordflow">case</span> Z_NEED_DICT:
            ret = Z_DATA_ERROR;     <span class="comment">/* and fall through */</span>
        <span class="keywordflow">case</span> Z_DATA_ERROR:
        <span class="keywordflow">case</span> Z_MEM_ERROR:
            g_warning (<span class="stringliteral">&quot;Failed to inflate.\n&quot;</span>);
            <span class="keywordflow">goto</span> out;
        }
        have = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#aee79ea870e3b3807cae3db5655993a7e">ZLIB_BUF_SIZE</a> - strm.avail_out;
        g_byte_array_append (barray, out, have);
    } <span class="keywordflow">while</span> (ret != Z_STREAM_END);

out:
    <span class="comment">/* clean up and return */</span>
    (void)inflateEnd(&amp;strm);

    <span class="keywordflow">if</span> (ret == Z_STREAM_END) {
        *outlen = barray-&gt;len;
        *output = g_byte_array_free (barray, FALSE);
        <span class="keywordflow">return</span> 0;
    } <span class="keywordflow">else</span> {
        g_byte_array_free (barray, TRUE);
        <span class="keywordflow">return</span> -1;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a09f0677ad28b98b7a85bcda57f71e7c8"></a><!-- doxytag: member="utils.h::seaf_fstat" ref="a09f0677ad28b98b7a85bcda57f71e7c8" args="(int fd, SeafStat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a09f0677ad28b98b7a85bcda57f71e7c8">seaf_fstat</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00420">420</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (_fstat64 (fd, st) &lt; 0)
        <span class="keywordflow">return</span> -1;

    <span class="keywordflow">if</span> (get_utc_file_time_fd (fd, &amp;st-&gt;st_mtime, &amp;st-&gt;st_ctime) &lt; 0)
        <span class="keywordflow">return</span> -1;

    <span class="keywordflow">return</span> 0;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> fstat (fd, st);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="abc8dd3d83f54a07998aea73c4071d818"></a><!-- doxytag: member="utils.h::seaf_set_file_time" ref="abc8dd3d83f54a07998aea73c4071d818" args="(const char *path, guint64 mtime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#abc8dd3d83f54a07998aea73c4071d818">seaf_set_file_time</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">guint64&#160;</td>
          <td class="paramname"><em>mtime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00457">457</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifndef WIN32</span>
<span class="preprocessor"></span>    <span class="keyword">struct </span>stat st;
    <span class="keyword">struct </span>utimbuf times;

    <span class="keywordflow">if</span> (stat (path, &amp;st) &lt; 0) {
        g_warning (<span class="stringliteral">&quot;Failed to stat %s: %s.\n&quot;</span>, path, strerror(errno));
        <span class="keywordflow">return</span> -1;
    }

    times.actime = st.st_atime;
    times.modtime = (time_t)<a class="code" href="index_8h.html#adb9fb1ca66f1a67516c2ee1492e6ab2b">mtime</a>;

    <span class="keywordflow">return</span> utime (path, &amp;times);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath = win32_long_path (path);
    <span class="keywordtype">int</span> ret = 0;

    <span class="keywordflow">if</span> (set_utc_file_time (path, wpath, <a class="code" href="index_8h.html#adb9fb1ca66f1a67516c2ee1492e6ab2b">mtime</a>) &lt; 0)
        ret = -1;

    g_free (wpath);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ab46893ad4a68049bcd80eac8dcc2e299"></a><!-- doxytag: member="utils.h::seaf_stat" ref="ab46893ad4a68049bcd80eac8dcc2e299" args="(const char *path, SeafStat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ab46893ad4a68049bcd80eac8dcc2e299">seaf_stat</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00384">384</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath = win32_long_path (path);
    WIN32_FILE_ATTRIBUTE_DATA attrs;
    <span class="keywordtype">int</span> ret = 0;

    <span class="keywordflow">if</span> (!GetFileAttributesExW (wpath, GetFileExInfoStandard, &amp;attrs)) {
        ret = -1;
        windows_error_to_errno (GetLastError());
        <span class="keywordflow">goto</span> out;
    }

    memset (st, 0, <span class="keyword">sizeof</span>(<a class="code" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a>));

    <span class="keywordflow">if</span> (attrs.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)
        st-&gt;st_mode = (S_IFDIR | S_IRWXU);
    <span class="keywordflow">else</span>
        st-&gt;st_mode = (S_IFREG | S_IRUSR | S_IWUSR);

    st-&gt;st_atime = file_time_to_unix_time (&amp;attrs.ftLastAccessTime);
    st-&gt;st_ctime = file_time_to_unix_time (&amp;attrs.ftCreationTime);
    st-&gt;st_mtime = file_time_to_unix_time (&amp;attrs.ftLastWriteTime);

    st-&gt;st_size = ((((__int64)attrs.nFileSizeHigh)&lt;&lt;32) + attrs.nFileSizeLow);

out:
    g_free (wpath);

    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> stat (path, st);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a822971bc55edc699449c6f6f2e03225e"></a><!-- doxytag: member="utils.h::seaf_util_create" ref="a822971bc55edc699449c6f6f2e03225e" args="(const char *path, int flags, mode_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a822971bc55edc699449c6f6f2e03225e">seaf_util_create</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00579">579</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath;
    DWORD access = 0;
    HANDLE handle;
    <span class="keywordtype">int</span> fd;

    access |= GENERIC_READ;
    <span class="keywordflow">if</span> (<a class="code" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a> &amp; (O_WRONLY | O_RDWR))
        access |= GENERIC_WRITE;

    wpath = win32_long_path (path);

    handle = CreateFileW (wpath,
                          access,
                          FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
                          NULL,
                          CREATE_ALWAYS,
                          0,
                          NULL);
    <span class="keywordflow">if</span> (handle == INVALID_HANDLE_VALUE) {
        errno = windows_error_to_errno (GetLastError());
        g_free (wpath);
        <span class="keywordflow">return</span> -1;
    }

    fd = _open_osfhandle ((intptr_t)handle, 0);

    g_free (wpath);
    <span class="keywordflow">return</span> fd;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> open (path, <a class="code" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>, <a class="code" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a1c2448a989efb1ce953a90f3db3c8042"></a><!-- doxytag: member="utils.h::seaf_util_exists" ref="a1c2448a989efb1ce953a90f3db3c8042" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a1c2448a989efb1ce953a90f3db3c8042">seaf_util_exists</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00637">637</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath = win32_long_path (path);
    DWORD attrs;
    gboolean ret;

    attrs = GetFileAttributesW (wpath);
    ret = (attrs != INVALID_FILE_ATTRIBUTES);

    g_free (wpath);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> (access (path, F_OK) == 0);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a51aa6c51cc437a2766ca666660289bce"></a><!-- doxytag: member="utils.h::seaf_util_mkdir" ref="a51aa6c51cc437a2766ca666660289bce" args="(const char *path, mode_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a51aa6c51cc437a2766ca666660289bce">seaf_util_mkdir</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00523">523</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath = win32_long_path (path);
    <span class="keywordtype">int</span> ret = 0;

    <span class="keywordflow">if</span> (!CreateDirectoryW (wpath, NULL)) {
        ret = -1;
        errno = windows_error_to_errno (GetLastError());
    }

    g_free (wpath);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> mkdir (path, <a class="code" href="index_8h.html#ac1b4d694fc07a39e06900e82872aac7f">mode</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ad154e736c3751fe880395dff55fab739"></a><!-- doxytag: member="utils.h::seaf_util_open" ref="ad154e736c3751fe880395dff55fab739" args="(const char *path, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#ad154e736c3751fe880395dff55fab739">seaf_util_open</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00542">542</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath;
    DWORD access = 0;
    HANDLE handle;
    <span class="keywordtype">int</span> fd;

    access |= GENERIC_READ;
    <span class="keywordflow">if</span> (<a class="code" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a> &amp; (O_WRONLY | O_RDWR))
        access |= GENERIC_WRITE;

    wpath = win32_long_path (path);

    handle = CreateFileW (wpath,
                          access,
                          FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
                          NULL,
                          OPEN_EXISTING,
                          0,
                          NULL);
    <span class="keywordflow">if</span> (handle == INVALID_HANDLE_VALUE) {
        errno = windows_error_to_errno (GetLastError());
        g_free (wpath);
        <span class="keywordflow">return</span> -1;
    }

    fd = _open_osfhandle ((intptr_t)handle, 0);

    g_free (wpath);
    <span class="keywordflow">return</span> fd;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> open (path, <a class="code" href="index_8h.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a46307856992913eeb741c8203cfc93c2"></a><!-- doxytag: member="utils.h::seaf_util_rename" ref="a46307856992913eeb741c8203cfc93c2" args="(const char *oldpath, const char *newpath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a46307856992913eeb741c8203cfc93c2">seaf_util_rename</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oldpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newpath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00616">616</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *oldpathw = win32_long_path (oldpath);
    <span class="keywordtype">wchar_t</span> *newpathw = win32_long_path (newpath);
    <span class="keywordtype">int</span> ret = 0;

    <span class="keywordflow">if</span> (!MoveFileExW (oldpathw, newpathw, MOVEFILE_REPLACE_EXISTING)) {
        ret = -1;
        errno = windows_error_to_errno (GetLastError());
    }

    g_free (oldpathw);
    g_free (newpathw);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> rename (oldpath, newpath);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="abab8a37cf996c1cf68c1cc8f6dfc757c"></a><!-- doxytag: member="utils.h::seaf_util_rmdir" ref="abab8a37cf996c1cf68c1cc8f6dfc757c" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#abab8a37cf996c1cf68c1cc8f6dfc757c">seaf_util_rmdir</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00504">504</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath = win32_long_path (path);
    <span class="keywordtype">int</span> ret = 0;

    <span class="keywordflow">if</span> (!RemoveDirectoryW (wpath)) {
        ret = -1;
        errno = windows_error_to_errno (GetLastError());
    }

    g_free (wpath);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> rmdir (path);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a26f091009701c5a9d1886b9d6ceb9c8e"></a><!-- doxytag: member="utils.h::seaf_util_unlink" ref="a26f091009701c5a9d1886b9d6ceb9c8e" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="seafile-4_81_82_2lib_2utils_8h.html#a26f091009701c5a9d1886b9d6ceb9c8e">seaf_util_unlink</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00485">485</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef WIN32</span>
<span class="preprocessor"></span>    <span class="keywordtype">wchar_t</span> *wpath = win32_long_path (path);
    <span class="keywordtype">int</span> ret = 0;

    <span class="keywordflow">if</span> (!DeleteFileW (wpath)) {
        ret = -1;
        errno = windows_error_to_errno (GetLastError());
    }

    g_free (wpath);
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> unlink (path);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a30d2fd3f3e5797b240223f700294a517"></a><!-- doxytag: member="utils.h::sendn" ref="a30d2fd3f3e5797b240223f700294a517" args="(evutil_socket_t fd, const void *vptr, size_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a30d2fd3f3e5797b240223f700294a517">sendn</a> </td>
          <td>(</td>
          <td class="paramtype">evutil_socket_t&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>vptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aefe1dabfce05643fed7d83c2bb4c615c"></a><!-- doxytag: member="utils.h::string_list_append" ref="aefe1dabfce05643fed7d83c2bb4c615c" args="(GList *str_list, const char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#aefe1dabfce05643fed7d83c2bb4c615c">string_list_append</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>str_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>string_list_append: : : a C string (can't be NULL</p>
<p>Append  to  if it is in the list.</p>
<p>returns: the new start of the list </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01329">1329</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    g_return_val_if_fail (<span class="keywordtype">string</span> != NULL, str_list);

    <span class="keywordflow">if</span> (<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a38f449c218477960cf9dc2136453db10">string_list_is_exists</a>(str_list, <span class="keywordtype">string</span>))
        <span class="keywordflow">return</span> str_list;

    str_list = g_list_append (str_list, g_strdup(<span class="keywordtype">string</span>));
    <span class="keywordflow">return</span> str_list;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7295a8677eade8b86c15b06715dc902"></a><!-- doxytag: member="utils.h::string_list_append_sorted" ref="ab7295a8677eade8b86c15b06715dc902" args="(GList *str_list, const char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab7295a8677eade8b86c15b06715dc902">string_list_append_sorted</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>str_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01341">1341</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    g_return_val_if_fail (<span class="keywordtype">string</span> != NULL, str_list);

    <span class="keywordflow">if</span> (<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a38f449c218477960cf9dc2136453db10">string_list_is_exists</a>(str_list, <span class="keywordtype">string</span>))
        <span class="keywordflow">return</span> str_list;

    str_list = g_list_insert_sorted_with_data (str_list, g_strdup(<span class="keywordtype">string</span>),
                                 (GCompareDataFunc)g_strcmp0, NULL);
    <span class="keywordflow">return</span> str_list;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af85d9a3e4ab846a6eedfb509508367f2"></a><!-- doxytag: member="utils.h::string_list_free" ref="af85d9a3e4ab846a6eedfb509508367f2" args="(GList *str_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#af85d9a3e4ab846a6eedfb509508367f2">string_list_free</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>str_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01372">1372</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *ptr = str_list;

    <span class="keywordflow">while</span> (ptr) {
        g_free (ptr-&gt;data);
        ptr = ptr-&gt;next;
    }

    g_list_free (str_list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a38f449c218477960cf9dc2136453db10"></a><!-- doxytag: member="utils.h::string_list_is_exists" ref="a38f449c218477960cf9dc2136453db10" args="(GList *str_list, const char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a38f449c218477960cf9dc2136453db10">string_list_is_exists</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>str_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>string_list_is_exists: : : a C string or NULL</p>
<p>Check whether  is in .</p>
<p>returns: TRUE if  is in str_list, FALSE otherwise </p>

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01309">1309</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *ptr;
    <span class="keywordflow">for</span> (ptr = str_list; ptr; ptr = ptr-&gt;next) {
        <span class="keywordflow">if</span> (g_strcmp0(<span class="keywordtype">string</span>, ptr-&gt;data) == 0)
            <span class="keywordflow">return</span> TRUE;
    }
    <span class="keywordflow">return</span> FALSE;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5800cf387e8c70ad58e70cae752c854c"></a><!-- doxytag: member="utils.h::string_list_join" ref="a5800cf387e8c70ad58e70cae752c854c" args="(GList *str_list, GString *strbuf, const char *seperator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a5800cf387e8c70ad58e70cae752c854c">string_list_join</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>str_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GString *&#160;</td>
          <td class="paramname"><em>strbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seperator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01386">1386</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *ptr;
    <span class="keywordflow">if</span> (!str_list)
        <span class="keywordflow">return</span>;

    ptr = str_list;
    g_string_append (str, ptr-&gt;data);

    <span class="keywordflow">for</span> (ptr = ptr-&gt;next; ptr; ptr = ptr-&gt;next) {
        g_string_append (str, seperator);
        g_string_append (str, (<span class="keywordtype">char</span> *)ptr-&gt;data);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45ff8617e4273dddf37bccc992d9d505"></a><!-- doxytag: member="utils.h::string_list_parse" ref="a45ff8617e4273dddf37bccc992d9d505" args="(const char *list_in_str, const char *seperator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a45ff8617e4273dddf37bccc992d9d505">string_list_parse</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>list_in_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seperator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01402">1402</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!list_in_str)
        <span class="keywordflow">return</span> NULL;

    GList *list = NULL;
    <span class="keywordtype">char</span> **array = g_strsplit (list_in_str, seperator, 0);
    <span class="keywordtype">char</span> **ptr;

    <span class="keywordflow">for</span> (ptr = array; *ptr; ptr++) {
        list = g_list_prepend (list, g_strdup(*ptr));
    }
    list = g_list_reverse (list);
    
    g_strfreev (array);
    <span class="keywordflow">return</span> list;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afbee5493f93a3ddbed45c38d2682683d"></a><!-- doxytag: member="utils.h::string_list_parse_sorted" ref="afbee5493f93a3ddbed45c38d2682683d" args="(const char *list_in_str, const char *seperator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#afbee5493f93a3ddbed45c38d2682683d">string_list_parse_sorted</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>list_in_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seperator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01421">1421</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *list = <a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#a45ff8617e4273dddf37bccc992d9d505">string_list_parse</a> (list_in_str, seperator);

    <span class="keywordflow">return</span> g_list_sort (list, (GCompareFunc)g_strcmp0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6eb8b0fccfe316157ddb5a47d9cd3a71"></a><!-- doxytag: member="utils.h::string_list_remove" ref="a6eb8b0fccfe316157ddb5a47d9cd3a71" args="(GList *str_list, const char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a6eb8b0fccfe316157ddb5a47d9cd3a71">string_list_remove</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>str_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01355">1355</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    g_return_val_if_fail (<span class="keywordtype">string</span> != NULL, str_list);

    GList *ptr;

    <span class="keywordflow">for</span> (ptr = str_list; ptr; ptr = ptr-&gt;next) {
        <span class="keywordflow">if</span> (strcmp((<span class="keywordtype">char</span> *)ptr-&gt;data, <span class="keywordtype">string</span>) == 0) {
            g_free (ptr-&gt;data);
            <span class="keywordflow">return</span> g_list_delete_link (str_list, ptr);
        }
    }
    <span class="keywordflow">return</span> str_list;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4bed2c887b506e8e25c0b9f1725f4684"></a><!-- doxytag: member="utils.h::string_list_sorted_is_equal" ref="a4bed2c887b506e8e25c0b9f1725f4684" args="(GList *list1, GList *list2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a4bed2c887b506e8e25c0b9f1725f4684">string_list_sorted_is_equal</a> </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>list1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>list2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01429">1429</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GList *ptr1 = list1, *ptr2 = list2;

    <span class="keywordflow">while</span> (ptr1 &amp;&amp; ptr2) {
        <span class="keywordflow">if</span> (g_strcmp0(ptr1-&gt;data, ptr2-&gt;data) != 0)
            <span class="keywordflow">break</span>;

        ptr1 = ptr1-&gt;next;
        ptr2 = ptr2-&gt;next;
    }

    <span class="keywordflow">if</span> (!ptr1 &amp;&amp; !ptr2)
        <span class="keywordflow">return</span> TRUE;
    <span class="keywordflow">return</span> FALSE;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab11a77475b1b6258fd066c9e7413dd3e"></a><!-- doxytag: member="utils.h::strjoin_n" ref="ab11a77475b1b6258fd066c9e7413dd3e" args="(const char *seperator, int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ab11a77475b1b6258fd066c9e7413dd3e">strjoin_n</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seperator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01182">1182</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    GString *buf;
    <span class="keywordtype">int</span> i;
    <span class="keywordtype">char</span> *str;

    <span class="keywordflow">if</span> (argc == 0)
        <span class="keywordflow">return</span> NULL;
    
    buf = g_string_new (argv[0]);
    <span class="keywordflow">for</span> (i = 1; i &lt; argc; ++i) {
        g_string_append (buf, seperator);
        g_string_append (buf, argv[i]);
    }

    str = buf-&gt;str;
    g_string_free (buf, FALSE);
    <span class="keywordflow">return</span> str;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4fff2ff146c8734a7dd56989631e451e"></a><!-- doxytag: member="utils.h::strsplit_by_char" ref="a4fff2ff146c8734a7dd56989631e451e" args="(char *string, int *length, char c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a4fff2ff146c8734a7dd56989631e451e">strsplit_by_char</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01136">1136</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *remainder, *s;
    <span class="keywordtype">int</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a> = 8, num = 0, done = 0;
    <span class="keywordtype">char</span> **array;
    
    <span class="keywordflow">if</span> (<span class="keywordtype">string</span> == NULL || <span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;\0&#39;</span>) {
        *length = 0;
        <span class="keywordflow">return</span> NULL;
    }

    array = malloc (<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * size);
    <span class="keywordflow">if</span> (array == NULL) {
      <span class="keywordflow">return</span> NULL;
    }
    
    remainder = string;
    <span class="keywordflow">while</span> (!done) {
        <span class="keywordflow">for</span> (s = remainder; *s != c &amp;&amp; *s != <span class="charliteral">&#39;\0&#39;</span>; ++s) ;

        <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\0&#39;</span>)
            done = 1;
        <span class="keywordflow">else</span>
            *s = <span class="charliteral">&#39;\0&#39;</span>;

        array[num++] = remainder;
        <span class="keywordflow">if</span> (!done &amp;&amp; num == size) {
            size &lt;&lt;= 1;
            <span class="keywordtype">char</span>** tmp = realloc (array, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * size);
            <span class="keywordflow">if</span> (tmp == NULL) {
              free(array);
              <span class="keywordflow">return</span> NULL;
            }
            array = tmp;
        }

        remainder = s + 1;
    }
    
    <span class="keywordflow">if</span> (length != NULL) {
      *length = num;
    }

    <span class="keywordflow">return</span> array;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac488386314994c1d379a02d1ffd10993"></a><!-- doxytag: member="utils.h::strsplit_by_space" ref="ac488386314994c1d379a02d1ffd10993" args="(char *string, int *length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ac488386314994c1d379a02d1ffd10993">strsplit_by_space</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l01088">1088</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> *remainder, *s;
    <span class="keywordtype">int</span> <a class="code" href="index_8h.html#af931a8871310b4dad23f0f0b0f623560">size</a> = 8, num = 0, done = 0;
    <span class="keywordtype">char</span> **array;
    
    <span class="keywordflow">if</span> (<span class="keywordtype">string</span> == NULL || <span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;\0&#39;</span>) {
        <span class="keywordflow">if</span> (length != NULL) {
          *length = 0;
        }
        <span class="keywordflow">return</span> NULL;
    }

    array = malloc (<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * size);
    <span class="keywordflow">if</span> (array == NULL) {
      <span class="keywordflow">return</span> NULL;
    }
    
    remainder = string;
    <span class="keywordflow">while</span> (!done) {
        <span class="keywordflow">for</span> (s = remainder; *s != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *s != <span class="charliteral">&#39;\0&#39;</span>; ++s) ;

        <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\0&#39;</span>)
            done = 1;
        <span class="keywordflow">else</span>
            *s = <span class="charliteral">&#39;\0&#39;</span>;

        array[num++] = remainder;
        <span class="keywordflow">if</span> (!done &amp;&amp; num == size) {
            size &lt;&lt;= 1;
            <span class="keywordtype">char</span>** tmp = realloc (array, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * size);
            <span class="keywordflow">if</span> (tmp == NULL) {
              free(array);
              <span class="keywordflow">return</span> NULL;
            }
            array = tmp;
        }

        remainder = s + 1;
    }
    
    <span class="keywordflow">if</span> (length != NULL) {
      *length = num;
    }

    <span class="keywordflow">return</span> array;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0aa6c70f613ad3344b5f1f917b6b68a"></a><!-- doxytag: member="utils.h::timeval_from_msec" ref="ac0aa6c70f613ad3344b5f1f917b6b68a" args="(uint64_t milliseconds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#ac0aa6c70f613ad3344b5f1f917b6b68a">timeval_from_msec</a> </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>milliseconds</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00063">63</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span>timeval ret;
    <span class="keyword">const</span> uint64_t microseconds = milliseconds * 1000;
    ret.tv_sec  = microseconds / 1000000;
    ret.tv_usec = microseconds % 1000000;
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a9988632dc9e05f10a71688fd280cc9"></a><!-- doxytag: member="utils.h::writen" ref="a6a9988632dc9e05f10a71688fd280cc9" args="(int fd, const void *vptr, size_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="ccnet-4_81_82_2lib_2utils_8h.html#a6a9988632dc9e05f10a71688fd280cc9">writen</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>vptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html#l00745">745</a> of file <a class="el" href="seafile-4_81_82_2lib_2utils_8c_source.html">utils.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span>          nleft;
        ssize_t         nwritten;
        <span class="keyword">const</span> <span class="keywordtype">char</span>      *ptr;

        ptr = vptr;
        nleft = n;
        <span class="keywordflow">while</span> (nleft &gt; 0) {
                <span class="keywordflow">if</span> ( (nwritten = write(fd, ptr, nleft)) &lt;= 0) {
                        <span class="keywordflow">if</span> (nwritten &lt; 0 &amp;&amp; errno == EINTR)
                                nwritten = 0;           <span class="comment">/* and call write() again */</span>
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span>(-1);                     <span class="comment">/* error */</span>
                }

                nleft -= nwritten;
                ptr   += nwritten;
        }
        <span class="keywordflow">return</span>(n);
}
</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 19 2015 02:52:53 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
