<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: seafile-4.1.2/daemon/status.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">seafile-4.1.2/daemon/status.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;glib.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="daemon_2repo-mgr_8h_source.html">repo-mgr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="index_8h_source.html">index/index.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="diff-simple_8h_source.html">diff-simple.h</a>&quot;</code><br/>
</div>
<p><a href="status_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef gboolean(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="status_8h.html#a4c3f2356abeb49dfb2dcd3c7d8236843">IgnoreFunc</a> )(const char *basepath, const char *filename, void *data)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="status_8h.html#aedde1fa2f15b7c6a05b14c2dcc04f6be">wt_status_collect_changes_worktree</a> (struct <a class="el" href="structindex__state.html">index_state</a> *index, GList **results, const char *worktree)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="status_8h.html#ae9ecb4f4ad21d7ff69f36e16cc6996de">wt_status_collect_untracked</a> (struct <a class="el" href="structindex__state.html">index_state</a> *index, GList **results, const char *worktree, <a class="el" href="status_8h.html#a4c3f2356abeb49dfb2dcd3c7d8236843">IgnoreFunc</a> ignore_func)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="status_8h.html#a5aaef0b3a73d20b9f422c9d39f0a2325">wt_status_collect_changes_index</a> (struct <a class="el" href="structindex__state.html">index_state</a> *index, GList **results, <a class="el" href="daemon_2repo-mgr_8h.html#a3e8b6c8c2a077518a17c75c6ace3ae1c">SeafRepo</a> *repo)</td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a4c3f2356abeb49dfb2dcd3c7d8236843"></a><!-- doxytag: member="status.h::IgnoreFunc" ref="a4c3f2356abeb49dfb2dcd3c7d8236843" args=")(const char *basepath, const char *filename, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef gboolean(* <a class="el" href="status_8h.html#a4c3f2356abeb49dfb2dcd3c7d8236843">IgnoreFunc</a>)(const char *basepath, const char *filename, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="status_8h_source.html#l00010">10</a> of file <a class="el" href="status_8h_source.html">status.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5aaef0b3a73d20b9f422c9d39f0a2325"></a><!-- doxytag: member="status.h::wt_status_collect_changes_index" ref="a5aaef0b3a73d20b9f422c9d39f0a2325" args="(struct index_state *index, GList **results, SeafRepo *repo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="status_8h.html#a5aaef0b3a73d20b9f422c9d39f0a2325">wt_status_collect_changes_index</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GList **&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="daemon_2repo-mgr_8h.html#a3e8b6c8c2a077518a17c75c6ace3ae1c">SeafRepo</a> *&#160;</td>
          <td class="paramname"><em>repo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="status_8c_source.html#l00323">323</a> of file <a class="el" href="status_8c_source.html">status.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct__SeafFSManager.html">SeafFSManager</a> *fs_mgr;
    <a class="code" href="struct__SeafCommit.html">SeafCommit</a> *head;
    <span class="keywordtype">int</span> pos = 0;
    <a class="code" href="structDiffEntry.html">DiffEntry</a> *de;

    fs_mgr = repo-&gt;<a class="code" href="struct__SeafRepo.html#a9bae0acc12e2e63b0686027f7399e034">manager</a>-&gt;<a class="code" href="struct__SeafRepoManager.html#a16f3c4659df75ed4fe76acba492f1865">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a7ab44dd0bf8e3b3df6ee858e7d07e86d">fs_mgr</a>;
    head = <a class="code" href="commit-mgr_8c.html#adaf4b74c4dba25ddaa746f4ff9221b3f">seaf_commit_manager_get_commit</a> (<a class="code" href="seaf-daemon_8c.html#ae66636d1834d105bd51d89ff01acfe15">seaf</a>-&gt;<a class="code" href="struct__SeafileSession.html#a62979f26f91fc5e54e0a670e8d69ef67">commit_mgr</a>,
                                           repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#ab75d342176657e7504c5cddd5ca2c56a">version</a>,
                                           repo-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>);
    <span class="keywordflow">if</span> (!head) {
        seaf_warning (<span class="stringliteral">&quot;Failed to get commit %s.\n&quot;</span>, repo-&gt;<a class="code" href="struct__SeafRepo.html#a8e635ccff244ee483d3b4abe576e388e">head</a>-&gt;<a class="code" href="struct__SeafBranch.html#a244ae046d92274c745de9f2b4d115962">commit_id</a>);
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="index_8c.html#a1bcae1e686ad516d8b562a214c9e2cd8">mark_all_ce_unused</a> (index);

    <span class="comment">/* if repo is initial, we don&#39;t need to check index changes */</span>
    <span class="keywordflow">if</span> (strncmp(<a class="code" href="seafile-4_81_82_2common_2common_8h.html#aaa0130adfcd2ec28ea4cf85337ace2da">EMPTY_SHA1</a>, head-&gt;<a class="code" href="struct__SeafCommit.html#a2268a50b170dc23bfa0f5108a2b764e5">root_id</a>, 40) != 0) {
        <a class="code" href="struct__SeafDir.html">SeafDir</a> *root;

        <span class="comment">/* call diff_index to get status */</span>
        root = <a class="code" href="fs-mgr_8c.html#a08103ffc3a5cd19b70167404c39ce3e4">seaf_fs_manager_get_seafdir</a> (fs_mgr,
                                            repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>,
                                            repo-&gt;<a class="code" href="struct__SeafRepo.html#ab75d342176657e7504c5cddd5ca2c56a">version</a>,
                                            head-&gt;<a class="code" href="struct__SeafCommit.html#a2268a50b170dc23bfa0f5108a2b764e5">root_id</a>);
        <span class="keywordflow">if</span> (!root) {
            seaf_warning (<span class="stringliteral">&quot;Failed to get root %s.\n&quot;</span>, head-&gt;<a class="code" href="struct__SeafCommit.html#a2268a50b170dc23bfa0f5108a2b764e5">root_id</a>);
            <a class="code" href="commit-mgr_8c.html#a436a9092e9c5711820dc1a09234aac04">seaf_commit_unref</a> (head);
            <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> (<a class="code" href="diff-simple_8c.html#a61fa5d287ecd1508b220a422b250d676">diff_index</a>(repo-&gt;<a class="code" href="struct__SeafRepo.html#a9d6bc9ae525da00bc4c7d1f62dc9b762">id</a>, repo-&gt;<a class="code" href="struct__SeafRepo.html#ab75d342176657e7504c5cddd5ca2c56a">version</a>, index, root, results) &lt; 0)
            g_warning(<span class="stringliteral">&quot;diff index failed\n&quot;</span>);
        <a class="code" href="fs-mgr_8c.html#ae04d3c4669cd7b0fc691cd2da6dc2de1">seaf_dir_free</a> (root);
        <a class="code" href="commit-mgr_8c.html#a436a9092e9c5711820dc1a09234aac04">seaf_commit_unref</a> (head);
        <span class="keywordflow">return</span>;
    }
    <a class="code" href="commit-mgr_8c.html#a436a9092e9c5711820dc1a09234aac04">seaf_commit_unref</a> (head);

    <span class="keywordflow">while</span> (1) {
        <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce = next_cache_entry(index, &amp;pos);

        <span class="keywordflow">if</span> (!ce || <a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(ce))
            <span class="keywordflow">break</span>;

        ce-&gt;<a class="code" href="structcache__entry.html#a4dab14fd813a1bb6b67352674ff4afb2">ce_flags</a> |= <a class="code" href="index_8h.html#ab9f9391faf6b3de1d55d71cb07417d0e">CE_UNPACKED</a>;
        de = <a class="code" href="diff-simple_8c.html#a5a9e3f70659801a181ca4ff6004bf021">diff_entry_new</a> (<a class="code" href="diff-simple_8h.html#a1dbad127a740e1a35a6e051c6366139e">DIFF_TYPE_INDEX</a>, <a class="code" href="diff-simple_8h.html#a8a5184ba68f5168383e7a1017e89e290">DIFF_STATUS_ADDED</a>, ce-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);
        *results = g_list_prepend (*results, de);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aedde1fa2f15b7c6a05b14c2dcc04f6be"></a><!-- doxytag: member="status.h::wt_status_collect_changes_worktree" ref="aedde1fa2f15b7c6a05b14c2dcc04f6be" args="(struct index_state *index, GList **results, const char *worktree)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="status_8h.html#aedde1fa2f15b7c6a05b14c2dcc04f6be">wt_status_collect_changes_worktree</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GList **&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>worktree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="status_8c_source.html#l00206">206</a> of file <a class="el" href="status_8c_source.html">status.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="structDiffEntry.html">DiffEntry</a> *de;
    <span class="keywordtype">int</span> entries, i;

    GList *ignore_list = <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#abdf6d76830c08b16b49d76e2f34037a5">seaf_repo_load_ignore_files</a> (worktree);

    entries = index-&gt;<a class="code" href="structindex__state.html#a15b38cdd30ad2374bc12da429f39312f">cache_nr</a>;
    <span class="keywordflow">for</span> (i = 0; i &lt; entries; i++) {
        <span class="keywordtype">char</span> *realpath;
        <a class="code" href="seafile-4_81_82_2lib_2utils_8h.html#a5b073bcbe1516b249924c3702002d32c">SeafStat</a> st;
        <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *ce = index-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>[i];
        <span class="keywordtype">int</span> changed = 0;

        <span class="keywordflow">if</span> (<a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(ce)) {
            <span class="keywordtype">int</span> mask = 0;

            mask |= 1 &lt;&lt; <a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(ce);
            <span class="keywordflow">while</span> (i &lt; entries) {
                <span class="keyword">struct </span><a class="code" href="structcache__entry.html">cache_entry</a> *nce = index-&gt;<a class="code" href="structindex__state.html#a8aa7a8aa984ec5a39ff2eee96412db07">cache</a>[i];

                <span class="keywordflow">if</span> (strcmp(ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, nce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>))
                    <span class="keywordflow">break</span>;

                mask |= 1 &lt;&lt; <a class="code" href="index_8h.html#a0379c411a3dc56c2d5ac0b1fcce22ead">ce_stage</a>(nce);
                i++;
            }

            <span class="comment">/*</span>
<span class="comment">             * Compensate for loop update</span>
<span class="comment">             */</span>
            i--;

            de = <a class="code" href="diff-simple_8c.html#a5a9e3f70659801a181ca4ff6004bf021">diff_entry_new</a> (<a class="code" href="diff-simple_8h.html#a8436a6626f11ceb18921279b4f4995dc">DIFF_TYPE_WORKTREE</a>, <a class="code" href="diff-simple_8h.html#a8183f9366482a221164b57a98ce03014">DIFF_STATUS_UNMERGED</a>,
                                 ce-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);
            de-&gt;<a class="code" href="structDiffEntry.html#ac104f9910f0da8c74fa0a5ad7a4827ad">unmerge_state</a> = <a class="code" href="diff-simple_8c.html#a1e04d69761cc66544df3dc5577def9c1">diff_unmerged_state</a> (mask);
            *results = g_list_prepend (*results, de);

            <span class="keywordflow">continue</span>;
        }

        <span class="keywordflow">if</span> (<a class="code" href="index_8h.html#ad55a581e1adce0475f3b6e044e8b3411">ce_uptodate</a>(ce) || <a class="code" href="index_8h.html#aa9cb581aaeefbbd01aa6c7997f44a5e4">ce_skip_worktree</a>(ce))
            <span class="keywordflow">continue</span>;

        realpath = g_build_path (<a class="code" href="vc-utils_8h.html#aa7da4cdc6796b13fca1a4b263488dfdd">PATH_SEPERATOR</a>, worktree, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, NULL);
        <span class="keywordflow">if</span> (<a class="code" href="seafile-4_81_82_2lib_2utils_8c.html#ab46893ad4a68049bcd80eac8dcc2e299">seaf_stat</a>(realpath, &amp;st) &lt; 0) {
            <span class="keywordflow">if</span> (errno != ENOENT &amp;&amp; errno != ENOTDIR)
                changed = -1;
            <span class="keywordflow">else</span>
                changed = 1;
        }

        <span class="keywordflow">if</span> (changed) {
            <span class="keywordflow">if</span> (changed &lt; 0) {
                g_warning (<span class="stringliteral">&quot;Faile to stat %s: %s\n&quot;</span>, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>, strerror(errno));
                g_free (realpath);
                <span class="keywordflow">continue</span>;
            }

            <span class="keywordflow">if</span> (ce-&gt;<a class="code" href="structcache__entry.html#a5258a9a9e2fc3bfcd4859049912b65e8">ce_ctime</a>.<a class="code" href="structcache__time64.html#ae37877c7f3995f5a44a4a9fd7bb91d46">sec</a> == 0) {
                g_free (realpath);
                <span class="keywordflow">continue</span>;
            }

            de = <a class="code" href="diff-simple_8c.html#a5a9e3f70659801a181ca4ff6004bf021">diff_entry_new</a> (<a class="code" href="diff-simple_8h.html#a8436a6626f11ceb18921279b4f4995dc">DIFF_TYPE_WORKTREE</a>, <a class="code" href="diff-simple_8h.html#a33f1598ea0372aa7bd1dcf4b36bad9e8">DIFF_STATUS_DELETED</a>,
                                 ce-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);
            *results = g_list_prepend (*results, de);
            g_free (realpath);
            <span class="keywordflow">continue</span>;
        }

        <span class="keywordflow">if</span> (S_ISDIR (ce-&gt;<a class="code" href="structcache__entry.html#a5fcbcc4e7265ae8150f136380ed92c05">ce_mode</a>)) {
            g_free (realpath);
            <span class="keywordflow">continue</span>;
        }

        <span class="comment">/* Don&#39;t check changes to ignored files.</span>
<span class="comment">         * This can happen when a file is committed and then added to</span>
<span class="comment">         * ignore.txt. After that changes to this file will not committed,</span>
<span class="comment">         * and it should be ignored here.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (<a class="code" href="daemon_2Backups_2repo-mgr_8c.html#a32907bbaf9e2790699ddb7aaa97a3052">seaf_repo_check_ignore_file</a> (ignore_list, realpath)) {
            g_free (realpath);
            <span class="keywordflow">continue</span>;
        }

        g_free (realpath);

        changed = <a class="code" href="index_8c.html#a2a76921da1fbb55b7b33983ca9e8edc4">ie_match_stat</a> (ce, &amp;st, 0);
        <span class="keywordflow">if</span> (!changed) {
            <a class="code" href="index_8h.html#af89192589f914101b8c8cea880ab350d">ce_mark_uptodate</a> (ce);
            <span class="keywordflow">continue</span>;
        }

        de = <a class="code" href="diff-simple_8c.html#a5a9e3f70659801a181ca4ff6004bf021">diff_entry_new</a> (<a class="code" href="diff-simple_8h.html#a8436a6626f11ceb18921279b4f4995dc">DIFF_TYPE_WORKTREE</a>, <a class="code" href="diff-simple_8h.html#a94791401bdf8fe513b0a744823436190">DIFF_STATUS_MODIFIED</a>,
                             ce-&gt;<a class="code" href="structcache__entry.html#a119ab5c5e9db495e6e5f8d301f01421c">sha1</a>, ce-&gt;<a class="code" href="structcache__entry.html#a792e4ea24cb16c76abe3229651e414a0">name</a>);
        *results = g_list_prepend (*results, de);
    }

    <a class="code" href="daemon_2Backups_2repo-mgr_8c.html#ae640da4e7db6b316cd0e3c1ba463f9bd">seaf_repo_free_ignore_files</a> (ignore_list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9ecb4f4ad21d7ff69f36e16cc6996de"></a><!-- doxytag: member="status.h::wt_status_collect_untracked" ref="ae9ecb4f4ad21d7ff69f36e16cc6996de" args="(struct index_state *index, GList **results, const char *worktree, IgnoreFunc ignore_func)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="status_8h.html#ae9ecb4f4ad21d7ff69f36e16cc6996de">wt_status_collect_untracked</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structindex__state.html">index_state</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GList **&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>worktree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="status_8h.html#a4c3f2356abeb49dfb2dcd3c7d8236843">IgnoreFunc</a>&#160;</td>
          <td class="paramname"><em>ignore_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="status_8c_source.html#l00181">181</a> of file <a class="el" href="status_8c_source.html">status.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    <span class="keyword">struct </span><a class="code" href="structdir__struct.html">dir_struct</a> dir;
    <a class="code" href="structDiffEntry.html">DiffEntry</a> *de;

    memset(&amp;dir, 0, <span class="keyword">sizeof</span>(dir));

    read_directory(&amp;dir, worktree, index, ignore_func);
    <span class="keywordflow">for</span> (i = 0; i &lt; dir.nr; i++) {
        <span class="keyword">struct </span><a class="code" href="structdir__entry.html">dir_entry</a> *ent = dir.entries[i];
        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="index_8h.html#a96e76167c968d38441e90ee0488ee4aa">sha1</a>[20] = { 0 };

        de = <a class="code" href="diff-simple_8c.html#a5a9e3f70659801a181ca4ff6004bf021">diff_entry_new</a> (<a class="code" href="diff-simple_8h.html#a8436a6626f11ceb18921279b4f4995dc">DIFF_TYPE_WORKTREE</a>, <a class="code" href="diff-simple_8h.html#a8a5184ba68f5168383e7a1017e89e290">DIFF_STATUS_ADDED</a>, sha1, ent-&gt;<a class="code" href="structdir__entry.html#a1cc8a89ba0107244c285bcc16d81319b">name</a>);
        *results = g_list_prepend (*results, de);

        free(ent);
    }

    free(dir.entries);
}
</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 19 2015 03:19:57 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
